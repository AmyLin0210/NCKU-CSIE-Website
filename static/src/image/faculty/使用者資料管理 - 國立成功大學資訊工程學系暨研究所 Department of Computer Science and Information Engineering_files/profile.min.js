/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./static/src/js/user/profile.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./models/common/maps/language.js":
/*!****************************************!*\
  !*** ./models/common/maps/language.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var deep_freeze__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-freeze */ "./node_modules/deep-freeze/index.js");
/* harmony import */ var deep_freeze__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(deep_freeze__WEBPACK_IMPORTED_MODULE_0__);
/**
 * Language map module.
 * @namespace
 * @readonly
 * @property {string[]} support - Supporting language list.
 * @property {string}   default - Default language.
 */



const languageMap = {
    'support': [
        'zh-TW',
        'en-US',
    ],
    'default': 'zh-TW',
};

deep_freeze__WEBPACK_IMPORTED_MODULE_0___default()( languageMap );

/* harmony default export */ __webpack_exports__["default"] = (languageMap);


/***/ }),

/***/ "./models/common/utils/i18n.js":
/*!*************************************!*\
  !*** ./models/common/utils/i18n.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return I18nUtils; });
/* harmony import */ var _language_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./language.js */ "./models/common/utils/language.js");
/**
 * I18nUtils module.
 *
 * All `^default*` and `^get*` methods should only return one of the following types:
 *     - `string`
 *     - `number`
 *     - `undefined`
 * All `^is*` methods should only return `boolean`.
 * All `^supported*` methods should return an `array` having following properties:
 *     - `configurable: true`
 *     - `writable: true`
 *     - `enumerable: true`.
 *
 * In each function call stack,
 * function `LanguageUtils.isSupportedLanguageId` should only be called at most once,
 * functions other than called function should also only be called at most once.
 */



class I18nUtils {
    constructor ( opt ) {
        const {
            defaultOption = null,
            i18n = null,
            map = null,
        } = opt || {};

        if ( defaultOption === null || i18n === null || map === null )
            throw new Error( 'Invalid arguments' );

        this.default = defaultOption;
        this.i18n = i18n;
        this.map = map;
    }

    defaultValue ( languageId = _language_js__WEBPACK_IMPORTED_MODULE_0__["default"].defaultLanguageId ) {
        if ( _language_js__WEBPACK_IMPORTED_MODULE_0__["default"].isSupportedLanguageId( languageId ) )
            return this.i18n[ languageId ][ this.default ];
    }

    get defaultOption () {
        return this.default;
    }

    get defaultId () {
        return this.map.indexOf( this.default );
    }

    supportedValues ( languageId = _language_js__WEBPACK_IMPORTED_MODULE_0__["default"].defaultLanguageId ) {
        if ( _language_js__WEBPACK_IMPORTED_MODULE_0__["default"].isSupportedLanguageId( languageId ) )
            return Array.from( this.map.map( option => this.i18n[ languageId ][ option ] ) );
        return [];
    }

    get supportedOptions () {
        return Array.from( this.map );
    }

    get supportedId () {
        return this.map.map( ( {}, index ) => index );
    }

    isSupportedValue ( opt ) {
        const {
            value = null,
            languageId = null,
        } = opt || {};

        if ( typeof ( value ) === 'string' )
            return this.supportedValues( languageId ).includes( value );
        return false;
    }

    isSupportedOption ( option = null ) {
        if ( typeof ( option ) === 'string' )
            return this.supportedOptions.includes( option );
        return false;
    }

    isSupportedId ( id = null ) {
        if ( typeof ( id ) === 'number' )
            return this.supportedId.includes( id );
        return false;
    }

    getValueByOption ( opt ) {
        const {
            option = null,
            languageId = null,
        } = opt || {};

        if ( this.isSupportedOption( option ) && _language_js__WEBPACK_IMPORTED_MODULE_0__["default"].isSupportedLanguageId( languageId ) )
            return this.i18n[ languageId ][ option ];
    }

    getValueById ( opt ) {
        const {
            id = null,
            languageId = null,
        } = opt || {};

        if ( this.isSupportedId( id ) && _language_js__WEBPACK_IMPORTED_MODULE_0__["default"].isSupportedLanguageId( languageId ) )
            return this.i18n[ languageId ][ this.map[ id ] ];
    }

    getOptionByValue ( opt ) {
        const {
            value = null,
            languageId = null,
        } = opt || {};

        if ( this.isSupportedValue( opt ) )
            return this.map.find( option => this.map[ languageId ][ option ] === value, this );
    }

    getOptionById ( id = null ) {
        if ( this.isSupportedId( id ) )
            return this.map[ id ];
    }

    getIdByValue ( opt ) {
        if ( this.isSupportedValue( opt ) )
            return this.map.indexOf( this.getOptionByValue( opt ) );
    }

    getIdByOption ( option = null ) {
        if ( this.isSupportedOption( option ) )
            return this.map.indexOf( option );
    }
}


/***/ }),

/***/ "./models/common/utils/language.js":
/*!*****************************************!*\
  !*** ./models/common/utils/language.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _maps_language_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../maps/language.js */ "./models/common/maps/language.js");
/**
 * LanguageUtils module.
 *
 * All `^default*` and `^get*` methods should only return one of the following types:
 *     - `string`
 *     - `number`
 *     - `undefined`
 * All `^is*` methods should only return `boolean`.
 * All `^supported*` methods should return an `array` having following properties:
 *     - `configurable: true`
 *     - `writable: true`
 *     - `enumerable: true`
 *
 * In each function call stack,
 * functions other than called function should only be called at most once.
 */



class LanguageUtils {
    static get defaultLanguage () {
        return _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].default;
    }

    static get defaultLanguageId () {
        return _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].support.indexOf( _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].default );
    }

    static get supportedLanguage () {
        return Array.from( _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].support );
    }

    static get supportedLanguageId () {
        return _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].support.map( ( {}, index ) => index );
    }

    static isSupportedLanguage ( language = null ) {
        if ( typeof ( language ) === 'string' )
            return _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].support.includes( language );
        return false;
    }

    static isSupportedLanguageId ( languageId = null ) {
        if ( typeof ( languageId ) === 'number' )
            return LanguageUtils.supportedLanguageId.includes( languageId );
        return false;
    }

    static getLanguageId ( language = null ) {
        if ( LanguageUtils.isSupportedLanguage( language ) )
            return _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].support.indexOf( language );
    }

    static getLanguageById ( languageId = null ) {
        if ( LanguageUtils.isSupportedLanguageId( languageId ) )
            return _maps_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].support[ languageId ];
    }
}

/* harmony default export */ __webpack_exports__["default"] = (LanguageUtils);


/***/ }),

/***/ "./models/common/utils/validate.js":
/*!*****************************************!*\
  !*** ./models/common/utils/validate.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! validate.js */ "./node_modules/validate.js/validate.js");
/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(validate_js__WEBPACK_IMPORTED_MODULE_0__);


class ValidateUtils {
    static isValidDate ( date ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isDate( date ) && !Number.isNaN( Number( date ) );
    }

    static isPositiveInteger ( number ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isInteger( number ) &&
            number > 0 &&
            number <= Number.MAX_SAFE_INTEGER;
    }

    static isValidId ( number ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber( number ) &&
            number >= 0 &&
            number <= Number.MAX_SAFE_INTEGER;
    }

    static isDomElement ( element ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isDomElement( element );
    }

    static isValidString ( str ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isString( str );
    }

    static isValidBoolean ( bool ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isInteger( bool ) &&
            ( bool === 0 || bool === 1 );
    }

    static isValidArray ( arr ) {
        return validate_js__WEBPACK_IMPORTED_MODULE_0___default.a.isArray( arr );
    }
}

/* harmony default export */ __webpack_exports__["default"] = (ValidateUtils);


/***/ }),

/***/ "./models/faculty/maps/degree.js":
/*!***************************************!*\
  !*** ./models/faculty/maps/degree.js ***!
  \***************************************/
/*! exports provided: default, defaultOption, i18n, map */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultOption", function() { return defaultOption; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i18n", function() { return i18n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "map", function() { return map; });
/* harmony import */ var _common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils/language.js */ "./models/common/utils/language.js");
/* harmony import */ var deep_freeze__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! deep-freeze */ "./node_modules/deep-freeze/index.js");
/* harmony import */ var deep_freeze__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(deep_freeze__WEBPACK_IMPORTED_MODULE_1__);



const map = [
    'bachelor',
    'master',
    'phd',
];

const defaultOption = 'bachelor';

const i18n = {
    [ _common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
        bachelor: 'bachelor',
        master:   'master',
        phd:      'phd',
    },
    [ _common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
        bachelor: '學士',
        master:   '碩士',
        phd:      '博士',
    },
};

deep_freeze__WEBPACK_IMPORTED_MODULE_1___default()( i18n );
deep_freeze__WEBPACK_IMPORTED_MODULE_1___default()( map );

/* harmony default export */ __webpack_exports__["default"] = ({
    defaultOption,
    i18n,
    map,
});




/***/ }),

/***/ "./models/faculty/maps/nation.js":
/*!***************************************!*\
  !*** ./models/faculty/maps/nation.js ***!
  \***************************************/
/*! exports provided: default, defaultOption, i18n, map */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultOption", function() { return defaultOption; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i18n", function() { return i18n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "map", function() { return map; });
/* harmony import */ var _common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils/language.js */ "./models/common/utils/language.js");
/* harmony import */ var deep_freeze__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! deep-freeze */ "./node_modules/deep-freeze/index.js");
/* harmony import */ var deep_freeze__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(deep_freeze__WEBPACK_IMPORTED_MODULE_1__);



/**
 * `map` should following ISO 3166-1.
 */

const map = [
    'tw',
    'us',
    'cn',
    'gb',
    'jp',
    'de',
    'au',
];

const defaultOption = 'tw';

const i18n = {
    [ _common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
        tw: 'Taiwan',
        us: 'USA',
        cn: 'China',
        gb: 'UK',
        jp: 'Japan',
        de: 'Germany',
        au: 'Australia',
    },
    [ _common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
        tw: '臺灣',
        us: '美國',
        cn: '中國',
        gb: '英國',
        jp: '日本',
        de: '德國',
        au: '澳洲',
    },
};

deep_freeze__WEBPACK_IMPORTED_MODULE_1___default()( i18n );
deep_freeze__WEBPACK_IMPORTED_MODULE_1___default()( map );

/* harmony default export */ __webpack_exports__["default"] = ({
    defaultOption,
    i18n,
    map,
});




/***/ }),

/***/ "./models/faculty/utils/degree.js":
/*!****************************************!*\
  !*** ./models/faculty/utils/degree.js ***!
  \****************************************/
/*! exports provided: degreeUtils, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "degreeUtils", function() { return degreeUtils; });
/* harmony import */ var _common_utils_i18n_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils/i18n.js */ "./models/common/utils/i18n.js");
/* harmony import */ var _maps_degree_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../maps/degree.js */ "./models/faculty/maps/degree.js");



const degreeUtils = new _common_utils_i18n_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
    defaultOption: _maps_degree_js__WEBPACK_IMPORTED_MODULE_1__["defaultOption"],
    i18n: _maps_degree_js__WEBPACK_IMPORTED_MODULE_1__["i18n"],
    map: _maps_degree_js__WEBPACK_IMPORTED_MODULE_1__["map"],
} );

/* harmony default export */ __webpack_exports__["default"] = (degreeUtils);


/***/ }),

/***/ "./models/faculty/utils/nation.js":
/*!****************************************!*\
  !*** ./models/faculty/utils/nation.js ***!
  \****************************************/
/*! exports provided: nationUtils, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nationUtils", function() { return nationUtils; });
/* harmony import */ var _common_utils_i18n_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils/i18n.js */ "./models/common/utils/i18n.js");
/* harmony import */ var _maps_nation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../maps/nation.js */ "./models/faculty/maps/nation.js");



const nationUtils = new _common_utils_i18n_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
    defaultOption: _maps_nation_js__WEBPACK_IMPORTED_MODULE_1__["defaultOption"],
    i18n: _maps_nation_js__WEBPACK_IMPORTED_MODULE_1__["i18n"],
    map: _maps_nation_js__WEBPACK_IMPORTED_MODULE_1__["map"],
} );

/* harmony default export */ __webpack_exports__["default"] = (nationUtils);


/***/ }),

/***/ "./node_modules/deep-freeze/index.js":
/*!*******************************************!*\
  !*** ./node_modules/deep-freeze/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function deepFreeze (o) {
  Object.freeze(o);

  Object.getOwnPropertyNames(o).forEach(function (prop) {
    if (o.hasOwnProperty(prop)
    && o[prop] !== null
    && (typeof o[prop] === "object" || typeof o[prop] === "function")
    && !Object.isFrozen(o[prop])) {
      deepFreeze(o[prop]);
    }
  });
  
  return o;
};


/***/ }),

/***/ "./node_modules/pug-runtime/index.js":
/*!*******************************************!*\
  !*** ./node_modules/pug-runtime/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var pug_has_own_property = Object.prototype.hasOwnProperty;

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = pug_merge;
function pug_merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = pug_merge(attrs, a[i]);
    }
    return attrs;
  }

  for (var key in b) {
    if (key === 'class') {
      var valA = a[key] || [];
      a[key] = (Array.isArray(valA) ? valA : [valA]).concat(b[key] || []);
    } else if (key === 'style') {
      var valA = pug_style(a[key]);
      valA = valA && valA[valA.length - 1] !== ';' ? valA + ';' : valA;
      var valB = pug_style(b[key]);
      valB = valB && valB[valB.length - 1] !== ';' ? valB + ';' : valB;
      a[key] = valA + valB;
    } else {
      a[key] = b[key];
    }
  }

  return a;
};

/**
 * Process array, object, or string as a string of classes delimited by a space.
 *
 * If `val` is an array, all members of it and its subarrays are counted as
 * classes. If `escaping` is an array, then whether or not the item in `val` is
 * escaped depends on the corresponding item in `escaping`. If `escaping` is
 * not an array, no escaping is done.
 *
 * If `val` is an object, all the keys whose value is truthy are counted as
 * classes. No escaping is done.
 *
 * If `val` is a string, it is counted as a class. No escaping is done.
 *
 * @param {(Array.<string>|Object.<string, boolean>|string)} val
 * @param {?Array.<string>} escaping
 * @return {String}
 */
exports.classes = pug_classes;
function pug_classes_array(val, escaping) {
  var classString = '', className, padding = '', escapeEnabled = Array.isArray(escaping);
  for (var i = 0; i < val.length; i++) {
    className = pug_classes(val[i]);
    if (!className) continue;
    escapeEnabled && escaping[i] && (className = pug_escape(className));
    classString = classString + padding + className;
    padding = ' ';
  }
  return classString;
}
function pug_classes_object(val) {
  var classString = '', padding = '';
  for (var key in val) {
    if (key && val[key] && pug_has_own_property.call(val, key)) {
      classString = classString + padding + key;
      padding = ' ';
    }
  }
  return classString;
}
function pug_classes(val, escaping) {
  if (Array.isArray(val)) {
    return pug_classes_array(val, escaping);
  } else if (val && typeof val === 'object') {
    return pug_classes_object(val);
  } else {
    return val || '';
  }
}

/**
 * Convert object or string to a string of CSS styles delimited by a semicolon.
 *
 * @param {(Object.<string, string>|string)} val
 * @return {String}
 */

exports.style = pug_style;
function pug_style(val) {
  if (!val) return '';
  if (typeof val === 'object') {
    var out = '';
    for (var style in val) {
      /* istanbul ignore else */
      if (pug_has_own_property.call(val, style)) {
        out = out + style + ':' + val[style] + ';';
      }
    }
    return out;
  } else {
    return val + '';
  }
};

/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = pug_attr;
function pug_attr(key, val, escaped, terse) {
  if (val === false || val == null || !val && (key === 'class' || key === 'style')) {
    return '';
  }
  if (val === true) {
    return ' ' + (terse ? key : key + '="' + key + '"');
  }
  if (typeof val.toJSON === 'function') {
    val = val.toJSON();
  }
  if (typeof val !== 'string') {
    val = JSON.stringify(val);
    if (!escaped && val.indexOf('"') !== -1) {
      return ' ' + key + '=\'' + val.replace(/'/g, '&#39;') + '\'';
    }
  }
  if (escaped) val = pug_escape(val);
  return ' ' + key + '="' + val + '"';
};

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} terse whether to use HTML5 terse boolean attributes
 * @return {String}
 */
exports.attrs = pug_attrs;
function pug_attrs(obj, terse){
  var attrs = '';

  for (var key in obj) {
    if (pug_has_own_property.call(obj, key)) {
      var val = obj[key];

      if ('class' === key) {
        val = pug_classes(val);
        attrs = pug_attr(key, val, false, terse) + attrs;
        continue;
      }
      if ('style' === key) {
        val = pug_style(val);
      }
      attrs += pug_attr(key, val, false, terse);
    }
  }

  return attrs;
};

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var pug_match_html = /["&<>]/;
exports.escape = pug_escape;
function pug_escape(_html){
  var html = '' + _html;
  var regexResult = pug_match_html.exec(html);
  if (!regexResult) return _html;

  var result = '';
  var i, lastIndex, escape;
  for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {
    switch (html.charCodeAt(i)) {
      case 34: escape = '&quot;'; break;
      case 38: escape = '&amp;'; break;
      case 60: escape = '&lt;'; break;
      case 62: escape = '&gt;'; break;
      default: continue;
    }
    if (lastIndex !== i) result += html.substring(lastIndex, i);
    lastIndex = i + 1;
    result += escape;
  }
  if (lastIndex !== i) return result + html.substring(lastIndex, i);
  else return result;
};

/**
 * Re-throw the given `err` in context to the
 * the pug in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @param {String} str original source
 * @api private
 */

exports.rethrow = pug_rethrow;
function pug_rethrow(err, filename, lineno, str){
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  try {
    str = str || __webpack_require__(/*! fs */ 0).readFileSync(filename, 'utf8')
  } catch (ex) {
    pug_rethrow(err, null, lineno)
  }
  var context = 3
    , lines = str.split('\n')
    , start = Math.max(lineno - context, 0)
    , end = Math.min(lines.length, lineno + context);

  // Error context
  var context = lines.slice(start, end).map(function(line, i){
    var curr = i + start + 1;
    return (curr == lineno ? '  > ' : '    ')
      + curr
      + '| '
      + line;
  }).join('\n');

  // Alter exception message
  err.path = filename;
  err.message = (filename || 'Pug') + ':' + lineno
    + '\n' + context + '\n\n' + err.message;
  throw err;
};


/***/ }),

/***/ "./node_modules/validate.js/validate.js":
/*!**********************************************!*\
  !*** ./node_modules/validate.js/validate.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */

(function(exports, module, define) {
  "use strict";

  // The main function that calls the validators specified by the constraints.
  // The options are the following:
  //   - format (string) - An option that controls how the returned value is formatted
  //     * flat - Returns a flat array of just the error messages
  //     * grouped - Returns the messages grouped by attribute (default)
  //     * detailed - Returns an array of the raw validation data
  //   - fullMessages (boolean) - If `true` (default) the attribute name is prepended to the error.
  //
  // Please note that the options are also passed to each validator.
  var validate = function(attributes, constraints, options) {
    options = v.extend({}, v.options, options);

    var results = v.runValidations(attributes, constraints, options)
      , attr
      , validator;

    if (results.some(function(r) { return v.isPromise(r.error); })) {
      throw new Error("Use validate.async if you want support for promises");
    }
    return validate.processValidationResults(results, options);
  };

  var v = validate;

  // Copies over attributes from one or more sources to a single destination.
  // Very much similar to underscore's extend.
  // The first argument is the target object and the remaining arguments will be
  // used as sources.
  v.extend = function(obj) {
    [].slice.call(arguments, 1).forEach(function(source) {
      for (var attr in source) {
        obj[attr] = source[attr];
      }
    });
    return obj;
  };

  v.extend(validate, {
    // This is the version of the library as a semver.
    // The toString function will allow it to be coerced into a string
    version: {
      major: 0,
      minor: 13,
      patch: 1,
      metadata: null,
      toString: function() {
        var version = v.format("%{major}.%{minor}.%{patch}", v.version);
        if (!v.isEmpty(v.version.metadata)) {
          version += "+" + v.version.metadata;
        }
        return version;
      }
    },

    // Below is the dependencies that are used in validate.js

    // The constructor of the Promise implementation.
    // If you are using Q.js, RSVP or any other A+ compatible implementation
    // override this attribute to be the constructor of that promise.
    // Since jQuery promises aren't A+ compatible they won't work.
    Promise: typeof Promise !== "undefined" ? Promise : /* istanbul ignore next */ null,

    EMPTY_STRING_REGEXP: /^\s*$/,

    // Runs the validators specified by the constraints object.
    // Will return an array of the format:
    //     [{attribute: "<attribute name>", error: "<validation result>"}, ...]
    runValidations: function(attributes, constraints, options) {
      var results = []
        , attr
        , validatorName
        , value
        , validators
        , validator
        , validatorOptions
        , error;

      if (v.isDomElement(attributes) || v.isJqueryElement(attributes)) {
        attributes = v.collectFormValues(attributes);
      }

      // Loops through each constraints, finds the correct validator and run it.
      for (attr in constraints) {
        value = v.getDeepObjectValue(attributes, attr);
        // This allows the constraints for an attribute to be a function.
        // The function will be called with the value, attribute name, the complete dict of
        // attributes as well as the options and constraints passed in.
        // This is useful when you want to have different
        // validations depending on the attribute value.
        validators = v.result(constraints[attr], value, attributes, attr, options, constraints);

        for (validatorName in validators) {
          validator = v.validators[validatorName];

          if (!validator) {
            error = v.format("Unknown validator %{name}", {name: validatorName});
            throw new Error(error);
          }

          validatorOptions = validators[validatorName];
          // This allows the options to be a function. The function will be
          // called with the value, attribute name, the complete dict of
          // attributes as well as the options and constraints passed in.
          // This is useful when you want to have different
          // validations depending on the attribute value.
          validatorOptions = v.result(validatorOptions, value, attributes, attr, options, constraints);
          if (!validatorOptions) {
            continue;
          }
          results.push({
            attribute: attr,
            value: value,
            validator: validatorName,
            globalOptions: options,
            attributes: attributes,
            options: validatorOptions,
            error: validator.call(validator,
                value,
                validatorOptions,
                attr,
                attributes,
                options)
          });
        }
      }

      return results;
    },

    // Takes the output from runValidations and converts it to the correct
    // output format.
    processValidationResults: function(errors, options) {
      errors = v.pruneEmptyErrors(errors, options);
      errors = v.expandMultipleErrors(errors, options);
      errors = v.convertErrorMessages(errors, options);

      var format = options.format || "grouped";

      if (typeof v.formatters[format] === 'function') {
        errors = v.formatters[format](errors);
      } else {
        throw new Error(v.format("Unknown format %{format}", options));
      }

      return v.isEmpty(errors) ? undefined : errors;
    },

    // Runs the validations with support for promises.
    // This function will return a promise that is settled when all the
    // validation promises have been completed.
    // It can be called even if no validations returned a promise.
    async: function(attributes, constraints, options) {
      options = v.extend({}, v.async.options, options);

      var WrapErrors = options.wrapErrors || function(errors) {
        return errors;
      };

      // Removes unknown attributes
      if (options.cleanAttributes !== false) {
        attributes = v.cleanAttributes(attributes, constraints);
      }

      var results = v.runValidations(attributes, constraints, options);

      return new v.Promise(function(resolve, reject) {
        v.waitForResults(results).then(function() {
          var errors = v.processValidationResults(results, options);
          if (errors) {
            reject(new WrapErrors(errors, options, attributes, constraints));
          } else {
            resolve(attributes);
          }
        }, function(err) {
          reject(err);
        });
      });
    },

    single: function(value, constraints, options) {
      options = v.extend({}, v.single.options, options, {
        format: "flat",
        fullMessages: false
      });
      return v({single: value}, {single: constraints}, options);
    },

    // Returns a promise that is resolved when all promises in the results array
    // are settled. The promise returned from this function is always resolved,
    // never rejected.
    // This function modifies the input argument, it replaces the promises
    // with the value returned from the promise.
    waitForResults: function(results) {
      // Create a sequence of all the results starting with a resolved promise.
      return results.reduce(function(memo, result) {
        // If this result isn't a promise skip it in the sequence.
        if (!v.isPromise(result.error)) {
          return memo;
        }

        return memo.then(function() {
          return result.error.then(function(error) {
            result.error = error || null;
          });
        });
      }, new v.Promise(function(r) { r(); })); // A resolved promise
    },

    // If the given argument is a call: function the and: function return the value
    // otherwise just return the value. Additional arguments will be passed as
    // arguments to the function.
    // Example:
    // ```
    // result('foo') // 'foo'
    // result(Math.max, 1, 2) // 2
    // ```
    result: function(value) {
      var args = [].slice.call(arguments, 1);
      if (typeof value === 'function') {
        value = value.apply(null, args);
      }
      return value;
    },

    // Checks if the value is a number. This function does not consider NaN a
    // number like many other `isNumber` functions do.
    isNumber: function(value) {
      return typeof value === 'number' && !isNaN(value);
    },

    // Returns false if the object is not a function
    isFunction: function(value) {
      return typeof value === 'function';
    },

    // A simple check to verify that the value is an integer. Uses `isNumber`
    // and a simple modulo check.
    isInteger: function(value) {
      return v.isNumber(value) && value % 1 === 0;
    },

    // Checks if the value is a boolean
    isBoolean: function(value) {
      return typeof value === 'boolean';
    },

    // Uses the `Object` function to check if the given argument is an object.
    isObject: function(obj) {
      return obj === Object(obj);
    },

    // Simply checks if the object is an instance of a date
    isDate: function(obj) {
      return obj instanceof Date;
    },

    // Returns false if the object is `null` of `undefined`
    isDefined: function(obj) {
      return obj !== null && obj !== undefined;
    },

    // Checks if the given argument is a promise. Anything with a `then`
    // function is considered a promise.
    isPromise: function(p) {
      return !!p && v.isFunction(p.then);
    },

    isJqueryElement: function(o) {
      return o && v.isString(o.jquery);
    },

    isDomElement: function(o) {
      if (!o) {
        return false;
      }

      if (!o.querySelectorAll || !o.querySelector) {
        return false;
      }

      if (v.isObject(document) && o === document) {
        return true;
      }

      // http://stackoverflow.com/a/384380/699304
      /* istanbul ignore else */
      if (typeof HTMLElement === "object") {
        return o instanceof HTMLElement;
      } else {
        return o &&
          typeof o === "object" &&
          o !== null &&
          o.nodeType === 1 &&
          typeof o.nodeName === "string";
      }
    },

    isEmpty: function(value) {
      var attr;

      // Null and undefined are empty
      if (!v.isDefined(value)) {
        return true;
      }

      // functions are non empty
      if (v.isFunction(value)) {
        return false;
      }

      // Whitespace only strings are empty
      if (v.isString(value)) {
        return v.EMPTY_STRING_REGEXP.test(value);
      }

      // For arrays we use the length property
      if (v.isArray(value)) {
        return value.length === 0;
      }

      // Dates have no attributes but aren't empty
      if (v.isDate(value)) {
        return false;
      }

      // If we find at least one property we consider it non empty
      if (v.isObject(value)) {
        for (attr in value) {
          return false;
        }
        return true;
      }

      return false;
    },

    // Formats the specified strings with the given values like so:
    // ```
    // format("Foo: %{foo}", {foo: "bar"}) // "Foo bar"
    // ```
    // If you want to write %{...} without having it replaced simply
    // prefix it with % like this `Foo: %%{foo}` and it will be returned
    // as `"Foo: %{foo}"`
    format: v.extend(function(str, vals) {
      if (!v.isString(str)) {
        return str;
      }
      return str.replace(v.format.FORMAT_REGEXP, function(m0, m1, m2) {
        if (m1 === '%') {
          return "%{" + m2 + "}";
        } else {
          return String(vals[m2]);
        }
      });
    }, {
      // Finds %{key} style patterns in the given string
      FORMAT_REGEXP: /(%?)%\{([^\}]+)\}/g
    }),

    // "Prettifies" the given string.
    // Prettifying means replacing [.\_-] with spaces as well as splitting
    // camel case words.
    prettify: function(str) {
      if (v.isNumber(str)) {
        // If there are more than 2 decimals round it to two
        if ((str * 100) % 1 === 0) {
          return "" + str;
        } else {
          return parseFloat(Math.round(str * 100) / 100).toFixed(2);
        }
      }

      if (v.isArray(str)) {
        return str.map(function(s) { return v.prettify(s); }).join(", ");
      }

      if (v.isObject(str)) {
        if (!v.isDefined(str.toString)) {
          return JSON.stringify(str);
        }

        return str.toString();
      }

      // Ensure the string is actually a string
      str = "" + str;

      return str
        // Splits keys separated by periods
        .replace(/([^\s])\.([^\s])/g, '$1 $2')
        // Removes backslashes
        .replace(/\\+/g, '')
        // Replaces - and - with space
        .replace(/[_-]/g, ' ')
        // Splits camel cased words
        .replace(/([a-z])([A-Z])/g, function(m0, m1, m2) {
          return "" + m1 + " " + m2.toLowerCase();
        })
        .toLowerCase();
    },

    stringifyValue: function(value, options) {
      var prettify = options && options.prettify || v.prettify;
      return prettify(value);
    },

    isString: function(value) {
      return typeof value === 'string';
    },

    isArray: function(value) {
      return {}.toString.call(value) === '[object Array]';
    },

    // Checks if the object is a hash, which is equivalent to an object that
    // is neither an array nor a function.
    isHash: function(value) {
      return v.isObject(value) && !v.isArray(value) && !v.isFunction(value);
    },

    contains: function(obj, value) {
      if (!v.isDefined(obj)) {
        return false;
      }
      if (v.isArray(obj)) {
        return obj.indexOf(value) !== -1;
      }
      return value in obj;
    },

    unique: function(array) {
      if (!v.isArray(array)) {
        return array;
      }
      return array.filter(function(el, index, array) {
        return array.indexOf(el) == index;
      });
    },

    forEachKeyInKeypath: function(object, keypath, callback) {
      if (!v.isString(keypath)) {
        return undefined;
      }

      var key = ""
        , i
        , escape = false;

      for (i = 0; i < keypath.length; ++i) {
        switch (keypath[i]) {
          case '.':
            if (escape) {
              escape = false;
              key += '.';
            } else {
              object = callback(object, key, false);
              key = "";
            }
            break;

          case '\\':
            if (escape) {
              escape = false;
              key += '\\';
            } else {
              escape = true;
            }
            break;

          default:
            escape = false;
            key += keypath[i];
            break;
        }
      }

      return callback(object, key, true);
    },

    getDeepObjectValue: function(obj, keypath) {
      if (!v.isObject(obj)) {
        return undefined;
      }

      return v.forEachKeyInKeypath(obj, keypath, function(obj, key) {
        if (v.isObject(obj)) {
          return obj[key];
        }
      });
    },

    // This returns an object with all the values of the form.
    // It uses the input name as key and the value as value
    // So for example this:
    // <input type="text" name="email" value="foo@bar.com" />
    // would return:
    // {email: "foo@bar.com"}
    collectFormValues: function(form, options) {
      var values = {}
        , i
        , j
        , input
        , inputs
        , option
        , value;

      if (v.isJqueryElement(form)) {
        form = form[0];
      }

      if (!form) {
        return values;
      }

      options = options || {};

      inputs = form.querySelectorAll("input[name], textarea[name]");
      for (i = 0; i < inputs.length; ++i) {
        input = inputs.item(i);

        if (v.isDefined(input.getAttribute("data-ignored"))) {
          continue;
        }

        var name = input.name.replace(/\./g, "\\\\.");
        value = v.sanitizeFormValue(input.value, options);
        if (input.type === "number") {
          value = value ? +value : null;
        } else if (input.type === "checkbox") {
          if (input.attributes.value) {
            if (!input.checked) {
              value = values[name] || null;
            }
          } else {
            value = input.checked;
          }
        } else if (input.type === "radio") {
          if (!input.checked) {
            value = values[name] || null;
          }
        }
        values[name] = value;
      }

      inputs = form.querySelectorAll("select[name]");
      for (i = 0; i < inputs.length; ++i) {
        input = inputs.item(i);
        if (v.isDefined(input.getAttribute("data-ignored"))) {
          continue;
        }

        if (input.multiple) {
          value = [];
          for (j in input.options) {
            option = input.options[j];
             if (option && option.selected) {
              value.push(v.sanitizeFormValue(option.value, options));
            }
          }
        } else {
          var _val = typeof input.options[input.selectedIndex] !== 'undefined' ? input.options[input.selectedIndex].value : /* istanbul ignore next */ '';
          value = v.sanitizeFormValue(_val, options);
        }
        values[input.name] = value;
      }

      return values;
    },

    sanitizeFormValue: function(value, options) {
      if (options.trim && v.isString(value)) {
        value = value.trim();
      }

      if (options.nullify !== false && value === "") {
        return null;
      }
      return value;
    },

    capitalize: function(str) {
      if (!v.isString(str)) {
        return str;
      }
      return str[0].toUpperCase() + str.slice(1);
    },

    // Remove all errors who's error attribute is empty (null or undefined)
    pruneEmptyErrors: function(errors) {
      return errors.filter(function(error) {
        return !v.isEmpty(error.error);
      });
    },

    // In
    // [{error: ["err1", "err2"], ...}]
    // Out
    // [{error: "err1", ...}, {error: "err2", ...}]
    //
    // All attributes in an error with multiple messages are duplicated
    // when expanding the errors.
    expandMultipleErrors: function(errors) {
      var ret = [];
      errors.forEach(function(error) {
        // Removes errors without a message
        if (v.isArray(error.error)) {
          error.error.forEach(function(msg) {
            ret.push(v.extend({}, error, {error: msg}));
          });
        } else {
          ret.push(error);
        }
      });
      return ret;
    },

    // Converts the error mesages by prepending the attribute name unless the
    // message is prefixed by ^
    convertErrorMessages: function(errors, options) {
      options = options || {};

      var ret = []
        , prettify = options.prettify || v.prettify;
      errors.forEach(function(errorInfo) {
        var error = v.result(errorInfo.error,
            errorInfo.value,
            errorInfo.attribute,
            errorInfo.options,
            errorInfo.attributes,
            errorInfo.globalOptions);

        if (!v.isString(error)) {
          ret.push(errorInfo);
          return;
        }

        if (error[0] === '^') {
          error = error.slice(1);
        } else if (options.fullMessages !== false) {
          error = v.capitalize(prettify(errorInfo.attribute)) + " " + error;
        }
        error = error.replace(/\\\^/g, "^");
        error = v.format(error, {
          value: v.stringifyValue(errorInfo.value, options)
        });
        ret.push(v.extend({}, errorInfo, {error: error}));
      });
      return ret;
    },

    // In:
    // [{attribute: "<attributeName>", ...}]
    // Out:
    // {"<attributeName>": [{attribute: "<attributeName>", ...}]}
    groupErrorsByAttribute: function(errors) {
      var ret = {};
      errors.forEach(function(error) {
        var list = ret[error.attribute];
        if (list) {
          list.push(error);
        } else {
          ret[error.attribute] = [error];
        }
      });
      return ret;
    },

    // In:
    // [{error: "<message 1>", ...}, {error: "<message 2>", ...}]
    // Out:
    // ["<message 1>", "<message 2>"]
    flattenErrorsToArray: function(errors) {
      return errors
        .map(function(error) { return error.error; })
        .filter(function(value, index, self) {
          return self.indexOf(value) === index;
        });
    },

    cleanAttributes: function(attributes, whitelist) {
      function whitelistCreator(obj, key, last) {
        if (v.isObject(obj[key])) {
          return obj[key];
        }
        return (obj[key] = last ? true : {});
      }

      function buildObjectWhitelist(whitelist) {
        var ow = {}
          , lastObject
          , attr;
        for (attr in whitelist) {
          if (!whitelist[attr]) {
            continue;
          }
          v.forEachKeyInKeypath(ow, attr, whitelistCreator);
        }
        return ow;
      }

      function cleanRecursive(attributes, whitelist) {
        if (!v.isObject(attributes)) {
          return attributes;
        }

        var ret = v.extend({}, attributes)
          , w
          , attribute;

        for (attribute in attributes) {
          w = whitelist[attribute];

          if (v.isObject(w)) {
            ret[attribute] = cleanRecursive(ret[attribute], w);
          } else if (!w) {
            delete ret[attribute];
          }
        }
        return ret;
      }

      if (!v.isObject(whitelist) || !v.isObject(attributes)) {
        return {};
      }

      whitelist = buildObjectWhitelist(whitelist);
      return cleanRecursive(attributes, whitelist);
    },

    exposeModule: function(validate, root, exports, module, define) {
      if (exports) {
        if (module && module.exports) {
          exports = module.exports = validate;
        }
        exports.validate = validate;
      } else {
        root.validate = validate;
        if (validate.isFunction(define) && define.amd) {
          define([], function () { return validate; });
        }
      }
    },

    warn: function(msg) {
      if (typeof console !== "undefined" && console.warn) {
        console.warn("[validate.js] " + msg);
      }
    },

    error: function(msg) {
      if (typeof console !== "undefined" && console.error) {
        console.error("[validate.js] " + msg);
      }
    }
  });

  validate.validators = {
    // Presence validates that the value isn't empty
    presence: function(value, options) {
      options = v.extend({}, this.options, options);
      if (options.allowEmpty !== false ? !v.isDefined(value) : v.isEmpty(value)) {
        return options.message || this.message || "can't be blank";
      }
    },
    length: function(value, options, attribute) {
      // Empty values are allowed
      if (!v.isDefined(value)) {
        return;
      }

      options = v.extend({}, this.options, options);

      var is = options.is
        , maximum = options.maximum
        , minimum = options.minimum
        , tokenizer = options.tokenizer || function(val) { return val; }
        , err
        , errors = [];

      value = tokenizer(value);
      var length = value.length;
      if(!v.isNumber(length)) {
        return options.message || this.notValid || "has an incorrect length";
      }

      // Is checks
      if (v.isNumber(is) && length !== is) {
        err = options.wrongLength ||
          this.wrongLength ||
          "is the wrong length (should be %{count} characters)";
        errors.push(v.format(err, {count: is}));
      }

      if (v.isNumber(minimum) && length < minimum) {
        err = options.tooShort ||
          this.tooShort ||
          "is too short (minimum is %{count} characters)";
        errors.push(v.format(err, {count: minimum}));
      }

      if (v.isNumber(maximum) && length > maximum) {
        err = options.tooLong ||
          this.tooLong ||
          "is too long (maximum is %{count} characters)";
        errors.push(v.format(err, {count: maximum}));
      }

      if (errors.length > 0) {
        return options.message || errors;
      }
    },
    numericality: function(value, options, attribute, attributes, globalOptions) {
      // Empty values are fine
      if (!v.isDefined(value)) {
        return;
      }

      options = v.extend({}, this.options, options);

      var errors = []
        , name
        , count
        , checks = {
            greaterThan:          function(v, c) { return v > c; },
            greaterThanOrEqualTo: function(v, c) { return v >= c; },
            equalTo:              function(v, c) { return v === c; },
            lessThan:             function(v, c) { return v < c; },
            lessThanOrEqualTo:    function(v, c) { return v <= c; },
            divisibleBy:          function(v, c) { return v % c === 0; }
          }
        , prettify = options.prettify ||
          (globalOptions && globalOptions.prettify) ||
          v.prettify;

      // Strict will check that it is a valid looking number
      if (v.isString(value) && options.strict) {
        var pattern = "^-?(0|[1-9]\\d*)";
        if (!options.onlyInteger) {
          pattern += "(\\.\\d+)?";
        }
        pattern += "$";

        if (!(new RegExp(pattern).test(value))) {
          return options.message ||
            options.notValid ||
            this.notValid ||
            this.message ||
            "must be a valid number";
        }
      }

      // Coerce the value to a number unless we're being strict.
      if (options.noStrings !== true && v.isString(value) && !v.isEmpty(value)) {
        value = +value;
      }

      // If it's not a number we shouldn't continue since it will compare it.
      if (!v.isNumber(value)) {
        return options.message ||
          options.notValid ||
          this.notValid ||
          this.message ||
          "is not a number";
      }

      // Same logic as above, sort of. Don't bother with comparisons if this
      // doesn't pass.
      if (options.onlyInteger && !v.isInteger(value)) {
        return options.message ||
          options.notInteger ||
          this.notInteger ||
          this.message ||
          "must be an integer";
      }

      for (name in checks) {
        count = options[name];
        if (v.isNumber(count) && !checks[name](value, count)) {
          // This picks the default message if specified
          // For example the greaterThan check uses the message from
          // this.notGreaterThan so we capitalize the name and prepend "not"
          var key = "not" + v.capitalize(name);
          var msg = options[key] ||
            this[key] ||
            this.message ||
            "must be %{type} %{count}";

          errors.push(v.format(msg, {
            count: count,
            type: prettify(name)
          }));
        }
      }

      if (options.odd && value % 2 !== 1) {
        errors.push(options.notOdd ||
            this.notOdd ||
            this.message ||
            "must be odd");
      }
      if (options.even && value % 2 !== 0) {
        errors.push(options.notEven ||
            this.notEven ||
            this.message ||
            "must be even");
      }

      if (errors.length) {
        return options.message || errors;
      }
    },
    datetime: v.extend(function(value, options) {
      if (!v.isFunction(this.parse) || !v.isFunction(this.format)) {
        throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");
      }

      // Empty values are fine
      if (!v.isDefined(value)) {
        return;
      }

      options = v.extend({}, this.options, options);

      var err
        , errors = []
        , earliest = options.earliest ? this.parse(options.earliest, options) : NaN
        , latest = options.latest ? this.parse(options.latest, options) : NaN;

      value = this.parse(value, options);

      // 86400000 is the number of milliseconds in a day, this is used to remove
      // the time from the date
      if (isNaN(value) || options.dateOnly && value % 86400000 !== 0) {
        err = options.notValid ||
          options.message ||
          this.notValid ||
          "must be a valid date";
        return v.format(err, {value: arguments[0]});
      }

      if (!isNaN(earliest) && value < earliest) {
        err = options.tooEarly ||
          options.message ||
          this.tooEarly ||
          "must be no earlier than %{date}";
        err = v.format(err, {
          value: this.format(value, options),
          date: this.format(earliest, options)
        });
        errors.push(err);
      }

      if (!isNaN(latest) && value > latest) {
        err = options.tooLate ||
          options.message ||
          this.tooLate ||
          "must be no later than %{date}";
        err = v.format(err, {
          date: this.format(latest, options),
          value: this.format(value, options)
        });
        errors.push(err);
      }

      if (errors.length) {
        return v.unique(errors);
      }
    }, {
      parse: null,
      format: null
    }),
    date: function(value, options) {
      options = v.extend({}, options, {dateOnly: true});
      return v.validators.datetime.call(v.validators.datetime, value, options);
    },
    format: function(value, options) {
      if (v.isString(options) || (options instanceof RegExp)) {
        options = {pattern: options};
      }

      options = v.extend({}, this.options, options);

      var message = options.message || this.message || "is invalid"
        , pattern = options.pattern
        , match;

      // Empty values are allowed
      if (!v.isDefined(value)) {
        return;
      }
      if (!v.isString(value)) {
        return message;
      }

      if (v.isString(pattern)) {
        pattern = new RegExp(options.pattern, options.flags);
      }
      match = pattern.exec(value);
      if (!match || match[0].length != value.length) {
        return message;
      }
    },
    inclusion: function(value, options) {
      // Empty values are fine
      if (!v.isDefined(value)) {
        return;
      }
      if (v.isArray(options)) {
        options = {within: options};
      }
      options = v.extend({}, this.options, options);
      if (v.contains(options.within, value)) {
        return;
      }
      var message = options.message ||
        this.message ||
        "^%{value} is not included in the list";
      return v.format(message, {value: value});
    },
    exclusion: function(value, options) {
      // Empty values are fine
      if (!v.isDefined(value)) {
        return;
      }
      if (v.isArray(options)) {
        options = {within: options};
      }
      options = v.extend({}, this.options, options);
      if (!v.contains(options.within, value)) {
        return;
      }
      var message = options.message || this.message || "^%{value} is restricted";
      if (v.isString(options.within[value])) {
        value = options.within[value];
      }
      return v.format(message, {value: value});
    },
    email: v.extend(function(value, options) {
      options = v.extend({}, this.options, options);
      var message = options.message || this.message || "is not a valid email";
      // Empty values are fine
      if (!v.isDefined(value)) {
        return;
      }
      if (!v.isString(value)) {
        return message;
      }
      if (!this.PATTERN.exec(value)) {
        return message;
      }
    }, {
      PATTERN: /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i
    }),
    equality: function(value, options, attribute, attributes, globalOptions) {
      if (!v.isDefined(value)) {
        return;
      }

      if (v.isString(options)) {
        options = {attribute: options};
      }
      options = v.extend({}, this.options, options);
      var message = options.message ||
        this.message ||
        "is not equal to %{attribute}";

      if (v.isEmpty(options.attribute) || !v.isString(options.attribute)) {
        throw new Error("The attribute must be a non empty string");
      }

      var otherValue = v.getDeepObjectValue(attributes, options.attribute)
        , comparator = options.comparator || function(v1, v2) {
          return v1 === v2;
        }
        , prettify = options.prettify ||
          (globalOptions && globalOptions.prettify) ||
          v.prettify;

      if (!comparator(value, otherValue, options, attribute, attributes)) {
        return v.format(message, {attribute: prettify(options.attribute)});
      }
    },
    // A URL validator that is used to validate URLs with the ability to
    // restrict schemes and some domains.
    url: function(value, options) {
      if (!v.isDefined(value)) {
        return;
      }

      options = v.extend({}, this.options, options);

      var message = options.message || this.message || "is not a valid url"
        , schemes = options.schemes || this.schemes || ['http', 'https']
        , allowLocal = options.allowLocal || this.allowLocal || false
        , allowDataUrl = options.allowDataUrl || this.allowDataUrl || false;
      if (!v.isString(value)) {
        return message;
      }

      // https://gist.github.com/dperini/729294
      var regex =
        "^" +
        // protocol identifier
        "(?:(?:" + schemes.join("|") + ")://)" +
        // user:pass authentication
        "(?:\\S+(?::\\S*)?@)?" +
        "(?:";

      var tld = "(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";

      if (allowLocal) {
        tld += "?";
      } else {
        regex +=
          // IP address exclusion
          // private & local networks
          "(?!(?:10|127)(?:\\.\\d{1,3}){3})" +
          "(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})" +
          "(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})";
      }

      regex +=
          // IP address dotted notation octets
          // excludes loopback network 0.0.0.0
          // excludes reserved space >= 224.0.0.0
          // excludes network & broacast addresses
          // (first & last IP address of each class)
          "(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])" +
          "(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}" +
          "(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))" +
        "|" +
          // host name
          "(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)" +
          // domain name
          "(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*" +
          tld +
        ")" +
        // port number
        "(?::\\d{2,5})?" +
        // resource path
        "(?:[/?#]\\S*)?" +
      "$";

      if (allowDataUrl) {
        // RFC 2397
        var mediaType = "\\w+\\/[-+.\\w]+(?:;[\\w=]+)*";
        var urlchar = "[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*";
        var dataurl = "data:(?:"+mediaType+")?(?:;base64)?,"+urlchar;
        regex = "(?:"+regex+")|(?:^"+dataurl+"$)";
      }

      var PATTERN = new RegExp(regex, 'i');
      if (!PATTERN.exec(value)) {
        return message;
      }
    },
    type: v.extend(function(value, originalOptions, attribute, attributes, globalOptions) {
      if (v.isString(originalOptions)) {
        originalOptions = {type: originalOptions};
      }

      if (!v.isDefined(value)) {
        return;
      }

      var options = v.extend({}, this.options, originalOptions);

      var type = options.type;
      if (!v.isDefined(type)) {
        throw new Error("No type was specified");
      }

      var check;
      if (v.isFunction(type)) {
        check = type;
      } else {
        check = this.types[type];
      }

      if (!v.isFunction(check)) {
        throw new Error("validate.validators.type.types." + type + " must be a function.");
      }

      if (!check(value, options, attribute, attributes, globalOptions)) {
        var message = originalOptions.message ||
          this.messages[type] ||
          this.message ||
          options.message ||
          (v.isFunction(type) ? "must be of the correct type" : "must be of type %{type}");

        if (v.isFunction(message)) {
          message = message(value, originalOptions, attribute, attributes, globalOptions);
        }

        return v.format(message, {attribute: v.prettify(attribute), type: type});
      }
    }, {
      types: {
        object: function(value) {
          return v.isObject(value) && !v.isArray(value);
        },
        array: v.isArray,
        integer: v.isInteger,
        number: v.isNumber,
        string: v.isString,
        date: v.isDate,
        boolean: v.isBoolean
      },
      messages: {}
    })
  };

  validate.formatters = {
    detailed: function(errors) {return errors;},
    flat: v.flattenErrorsToArray,
    grouped: function(errors) {
      var attr;

      errors = v.groupErrorsByAttribute(errors);
      for (attr in errors) {
        errors[attr] = v.flattenErrorsToArray(errors[attr]);
      }
      return errors;
    },
    constraint: function(errors) {
      var attr;
      errors = v.groupErrorsByAttribute(errors);
      for (attr in errors) {
        errors[attr] = errors[attr].map(function(result) {
          return result.validator;
        }).sort();
      }
      return errors;
    }
  };

  validate.exposeModule(validate, this, exports, module, __webpack_require__(/*! !webpack amd define */ "./node_modules/webpack/buildin/amd-define.js"));
}).call(this,
         true ? /* istanbul ignore next */ exports : undefined,
         true ? /* istanbul ignore next */ module : undefined,
        __webpack_require__(/*! !webpack amd define */ "./node_modules/webpack/buildin/amd-define.js"));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./node_modules/webpack/buildin/amd-define.js":
/*!***************************************!*\
  !*** (webpack)/buildin/amd-define.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function() {
	throw new Error("define cannot be used indirect");
};


/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./settings/server/config.js":
/*!***********************************!*\
  !*** ./settings/server/config.js ***!
  \***********************************/
/*! exports provided: domainName, host, maxAge, port, projectRoot, protocol, secret, staticHost, whiteList, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "domainName", function() { return domainName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "host", function() { return host; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxAge", function() { return maxAge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "port", function() { return port; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "projectRoot", function() { return projectRoot; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "protocol", function() { return protocol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "secret", function() { return secret; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticHost", function() { return staticHost; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "whiteList", function() { return whiteList; });
/**
 * Web server settings module.
 * @namespace
 * @readonly
 * @property {string} domainName  - Web server domain name/IP.
 * @property {string} host        - Web server host.
 * @property {number} maxAge      - Client maximum time to cache result.
 * @property {number} port        - Web server binding port.
 * @property {string} projectRoot - This very project's root path.
 * @property {string} protocol    - Web server protocol, can be either 'http' or 'https'.
 * @property {string} secret      - secret key used to sign cookie.
 * @property {string} staticHost  - Static file server host.
 * @property {string[]} whiteList - Acceptable host list for Content Security Policy.
 */

const config = {
    domainName:  'localhost',
    get host () {
        return `${ config.protocol }://${ config.domainName }${
            config.port === '80' || config.port === '443' ?
                '' :
                `:${ config.port }`
        }`;
    },
    maxAge:      1000 * 60 * 60 * 24 * 7,
    port:        3000,
    projectRoot: '',
    protocol:    'http',
    secret:      'deepest darkest secret of ncku csie',
    get staticHost () {
        return `${ config.host }/static`;
    },
    whiteList: [
        'localhost:3000',
        'localhost:3001',
        'www.csie.ncku.edu.tw',
    ],
};

Object.freeze( config );

const domainName = config.domainName;
const host = config.host;
const maxAge = config.maxAge;
const port = config.port;
const projectRoot = '/Users/0210amy/Desktop/school/web/NCKU-CSIE-Website';
const protocol = config.protocol;
const secret = config.secret;
const staticHost = config.staticHost;
const whiteList = config.whiteList;
/* harmony default export */ __webpack_exports__["default"] = (config);


/***/ }),

/***/ "./static/src/js/components/common/header-base.js":
/*!********************************************************!*\
  !*** ./static/src/js/components/common/header-base.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GetHeaderBase; });
/* harmony import */ var static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/js/utils/style.js */ "./static/src/js/utils/style.js");
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");
/**
 * @file header event module.
 * @author ProFatXuanAll <ProFatXuanAll@gmail.com>
 * @version 1.0.0
 * @since 1.0.0
 */




class GetHeaderBase {
    /**
     * @param {object} opt
     * @param {HTMLElement} opt.headerDOM
     */

    constructor ( opt ) {
        opt = opt || {};

        if (
            !opt.headerDOM ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( opt.headerDOM ) ||
            opt.allHeaderDOMs.length === 0 ||
            !Array.from( opt.allHeaderDOMs ).every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement )
        )
            throw new TypeError( 'invalid arguments' );

        const headerElementQuerySelector = element => `.header > .header__${ element }`;
        const headerBlockQuerySelector = block => `${ headerElementQuerySelector( block ) }.${ block }`;
        const navigationElementQuerySelector = element => `${ headerBlockQuerySelector( 'navigation' ) } > .navigation__${ element }`;
        const navigationBlockQuerySelector = block => `${ navigationElementQuerySelector( block ) }.${ block }`;
        const languageElementQuerySelector = element => `${ navigationBlockQuerySelector( 'language' ) } > .language__${ element }`;
        const languageBlockQuerySelector = block => `${ languageElementQuerySelector( block ) }.${ block }`;
        const listItemModifiers = [
            'about',
            'research',
            'student',
            'announcement',
            'resource',
        ];
        const listQuerySelector = modifier => `${ navigationBlockQuerySelector( 'list' ) } > .list__item.item.list__item--${ modifier }`;
        const listItemElementQuerySelector = ( element, modifier ) => `${ listQuerySelector( modifier ) } > .item__${ element }`;
        const listItemBlockQuerySelector = ( block, modifier ) => `${ listItemElementQuerySelector( block, modifier ) }.${ block }`;

        this.DOM = {
            header:         opt.headerDOM,
            allNavigations: Array.from( opt.allHeaderDOMs )
            .map( header => header.querySelector( headerBlockQuerySelector( 'navigation' ) ) ),
            menu:           opt.headerDOM.querySelector( headerElementQuerySelector( 'menu' ) ),
            navigation:     opt.headerDOM.querySelector( headerBlockQuerySelector( 'navigation' ) ),
            cancel:         opt.headerDOM.querySelector( navigationElementQuerySelector( 'cancel' ) ),
            item:           listItemModifiers.map( modifier => ( {
                switch:    opt.headerDOM.querySelector( listItemElementQuerySelector( 'switch', modifier ) ),
                switches:  Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( listItemElementQuerySelector( 'switch', modifier ) ) )
                .filter( switchDOM => switchDOM !== null ),
                dropdowns: Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( listItemBlockQuerySelector( 'dropdown', modifier ) ) )
                .filter( dropdownDOM => dropdownDOM !== null ),
            } ) )
            .filter( itemObj => itemObj.switch !== null ),
            language: {
                switch:    opt.headerDOM.querySelector( languageElementQuerySelector( 'switch' ) ),
                switches:  Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( languageElementQuerySelector( 'switch' ) ) )
                .filter( switchDOM => switchDOM !== null ),
                dropdowns: Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( languageBlockQuerySelector( 'dropdown' ) ) )
                .filter( dropdownDOM => dropdownDOM !== null ),
            },
        };

        if (
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.menu ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.cancel ) ||
            !this.DOM.item.length ||
            !this.DOM.item.every( itemObj => models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( itemObj.switch ) &&
                itemObj.dropdowns.every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement ) &&
                itemObj.dropdowns.length !== 0 ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.language.switch ) ||
            !this.DOM.language.switches.length ||
            !this.DOM.language.switches.every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement ) ||
            !this.DOM.language.dropdowns.length ||
            !this.DOM.language.dropdowns.every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement )
        )
            throw new Error( 'DOM not found.' );

        this.subscribeMenuEvent();
        this.subscribeDropdownEvent();
        this.subscribeLanguageEvent();
        this.subscribeScrollEvent();

        return this;
    }

    subscribeMenuEvent () {
        window.addEventListener( 'click', ( event ) => {
            if ( event.target !== this.DOM.menu &&
                 !this.DOM.navigation.contains( event.target ) &&
                 window.getComputedStyle( this.DOM.header ).display !== 'none'
            ) {
                this.DOM.allNavigations.forEach( ( navigationDOM ) => {
                    Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( navigationDOM, 'header__navigation--active' );
                } );
            }
        } );

        this.DOM.menu.addEventListener( 'click', () => {
            this.DOM.allNavigations.forEach( ( navigationDOM ) => {
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( navigationDOM, 'header__navigation--active' );
            } );
        } );

        this.DOM.cancel.addEventListener( 'click', () => {
            this.DOM.allNavigations.forEach( ( navigationDOM ) => {
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( navigationDOM, 'header__navigation--active' );
            } );
        } );
    }

    subscribeDropdownEvent () {
        this.DOM.item.forEach( ( itemObj ) => {
            itemObj.switch.addEventListener( 'click', () => {
                if ( itemObj.switch.classList.contains( 'item__switch--active' ) ) {
                    itemObj.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( switchDOM, 'item__switch--active' ) );
                    itemObj.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( dropdownDOM, 'item__dropdown--open' ) );
                }
                else {
                    this.DOM.item.forEach( ( itemObj ) => {
                        itemObj.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( switchDOM, 'item__switch--active' ) );
                        itemObj.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( dropdownDOM, 'item__dropdown--open' ) );
                    } );
                    itemObj.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( switchDOM, 'item__switch--active' ) );
                    itemObj.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( dropdownDOM, 'item__dropdown--open' ) );
                }
            } );
        } );
    }

    subscribeLanguageEvent () {
        this.DOM.language.switch.addEventListener( 'click', () => {
            if ( this.DOM.language.switch.classList.contains( 'language__switch--active' ) ) {
                this.DOM.language.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( dropdownDOM, 'language__dropdown--open' ) );
                this.DOM.language.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( switchDOM, 'language__switch--active' ) );
            }
            else {
                this.DOM.language.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( dropdownDOM, 'language__dropdown--open' ) );
                this.DOM.language.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( switchDOM, 'language__switch--active' ) );
            }
        } );
    }

    subscribeScrollEvent () {
        let prevScrollpos = window.pageYOffset;
        window.addEventListener( 'scroll', () => {
            const currentScrollPos = window.pageYOffset;
            if ( prevScrollpos < currentScrollPos && currentScrollPos > 91 )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.header, 'header--active' );
            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.header, 'header--active' );

            if ( currentScrollPos > 91 )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.header, 'header--fixed' );
            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.header, 'header--fixed' );
            prevScrollpos = currentScrollPos;
        } );
    }
}


/***/ }),

/***/ "./static/src/js/components/common/header-large.js":
/*!*********************************************************!*\
  !*** ./static/src/js/components/common/header-large.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GetHeaderLarge; });
/* harmony import */ var static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/js/utils/style.js */ "./static/src/js/utils/style.js");
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");
/**
 * @file header event module.
 * @author ProFatXuanAll <ProFatXuanAll@gmail.com>
 * @version 1.0.0
 * @since 1.0.0
 */




class GetHeaderLarge {
    /**
     * @param {object} opt
     * @param {HTMLElement} opt.headerDOM
     */

    constructor ( opt ) {
        opt = opt || {};

        if (
            !opt.headerDOM ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( opt.headerDOM )
        )
            throw new TypeError( 'invalid arguments' );

        const headerElementQuerySelector = element => `.header > .header__${ element }`;
        const headerBlockQuerySelector = block => `${ headerElementQuerySelector( block ) }.${ block }`;
        const functionElementQuerySelector = element => `${ headerBlockQuerySelector( 'functions' ) } > .functions__${ element }`;
        const functionBlockQuerySelector = block => `${ functionElementQuerySelector( block ) }.${ block }`;
        const functionRightElementQuerySelector = element => `${ functionBlockQuerySelector( 'right' ) } > .right__${ element }`;
        const functionRightBlockQuerySelector = block => `${ functionRightElementQuerySelector( block ) }.${ block }`;
        const searchElementQuerySelector = element => `${ functionRightBlockQuerySelector( 'search' ) } > .search__${ element }`;
        const searchBlockQuerySelector = block => `${ searchElementQuerySelector( block ) }.${ block }`;
        const languageElementQuerySelector = element => `${ functionRightBlockQuerySelector( 'language' ) } > .language__${ element }`;
        const languageBlockQuerySelector = block => `${ languageElementQuerySelector( block ) }.${ block }`;
        const languageButtonElementQuerySelector = element => `${ languageBlockQuerySelector( 'button' ) } > .button__${ element }`;

        this.DOM = {
            header:         opt.headerDOM,
            language:       {
                button:   opt.headerDOM.querySelector( languageBlockQuerySelector( 'button' ) ),
                dropdown: opt.headerDOM.querySelector( languageButtonElementQuerySelector( 'dropdown' ) ),
                active:   false,
            },
            search: {
                button:   opt.headerDOM.querySelector( searchBlockQuerySelector( 'button' ) ),
                dropdown: opt.headerDOM.querySelector( searchBlockQuerySelector( 'dropdown' ) ),
                cancel:   opt.headerDOM.querySelector( `${ searchBlockQuerySelector( 'dropdown' ) } > .dropdown__cancel` ),
            },
        };

        if (
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.language.button ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.language.dropdown ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.search.button ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.search.dropdown ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.search.cancel )
        )
            throw new Error( 'DOM not found.' );

        this.subscribeLanguageEvent();
        this.subscribeSearchEvent();
        this.subscribeScrollEvent();

        return this;
    }

    subscribeLanguageEvent () {
        this.DOM.language.button.addEventListener( 'click', () => {
            if ( this.DOM.language.active )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.language.dropdown, 'button__dropdown--active' );

            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.language.dropdown, 'button__dropdown--active' );

            this.DOM.language.active = !this.DOM.language.active;
        } );
    }

    subscribeSearchEvent () {
        this.DOM.search.button.addEventListener( 'click', () => {
            Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.search.dropdown, 'search__dropdown--active' );
        } );
        this.DOM.search.cancel.addEventListener( 'click', () => {
            Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.search.dropdown, 'search__dropdown--active' );
        } );
    }

    subscribeScrollEvent () {
        let prevScrollpos = window.pageYOffset;
        window.addEventListener( 'scroll', () => {
            const currentScrollPos = window.pageYOffset;
            if ( prevScrollpos < currentScrollPos && currentScrollPos > 70 )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.header, 'header--active' );
            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.header, 'header--active' );

            if ( currentScrollPos > 70 )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.header, 'header--fixed' );
            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.header, 'header--fixed' );
            prevScrollpos = currentScrollPos;
        } );
    }
}



/***/ }),

/***/ "./static/src/js/components/common/header-medium.js":
/*!**********************************************************!*\
  !*** ./static/src/js/components/common/header-medium.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GetHeaderMedium; });
/* harmony import */ var static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/js/utils/style.js */ "./static/src/js/utils/style.js");
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");
/**
 * @file header event module.
 * @author ProFatXuanAll <ProFatXuanAll@gmail.com>
 * @version 1.0.0
 * @since 1.0.0
 */




class GetHeaderMedium {
    /**
     * @param {object} opt
     * @param {HTMLElement} opt.headerDOM
     */

    constructor ( opt ) {
        opt = opt || {};

        if (
            !opt.headerDOM ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( opt.headerDOM ) ||
            opt.allHeaderDOMs.length === 0 ||
            !Array.from( opt.allHeaderDOMs ).every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement )
        )
            throw new TypeError( 'invalid arguments' );

        const headerElementQuerySelector = element => `.header > .header__${ element }`;
        const headerBlockQuerySelector = block => `${ headerElementQuerySelector( block ) }.${ block }`;
        const navigationElementQuerySelector = element => `${ headerBlockQuerySelector( 'navigation' ) } > .navigation__${ element }`;
        const navigationBlockQuerySelector = block => `${ navigationElementQuerySelector( block ) }.${ block }`;
        const languageElementQuerySelector = element => `${ navigationBlockQuerySelector( 'language' ) } > .language__${ element }`;
        const languageBlockQuerySelector = block => `${ languageElementQuerySelector( block ) }.${ block }`;
        const listItemModifiers = [
            'about',
            'research',
            'student',
            'announcement',
            'resource',
        ];
        const listQuerySelector = modifier => `${ navigationBlockQuerySelector( 'list' ) } > .list__item.item.list__item--${ modifier }`;
        const listItemElementQuerySelector = ( element, modifier ) => `${ listQuerySelector( modifier ) } > .item__${ element }`;
        const listItemBlockQuerySelector = ( block, modifier ) => `${ listItemElementQuerySelector( block, modifier ) }.${ block }`;

        this.DOM = {
            header:         opt.headerDOM,
            allNavigations: Array.from( opt.allHeaderDOMs ).map( header => header.querySelector( headerBlockQuerySelector( 'navigation' ) ) ),
            menu:           opt.headerDOM.querySelector( headerElementQuerySelector( 'menu' ) ),
            navigation:     opt.headerDOM.querySelector( headerBlockQuerySelector( 'navigation' ) ),
            cancel:         opt.headerDOM.querySelector( navigationElementQuerySelector( 'cancel' ) ),
            item:           listItemModifiers.map( modifier => ( {
                switch:    opt.headerDOM.querySelector( listItemElementQuerySelector( 'switch', modifier ) ),
                switches:  Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( listItemElementQuerySelector( 'switch', modifier ) ) )
                .filter( switchDOM => switchDOM !== null ),
                dropdowns: Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( listItemBlockQuerySelector( 'dropdown', modifier ) ) )
                .filter( dropdownDOM => dropdownDOM !== null ),
            } ) )
            .filter( itemObj => itemObj.switch !== null ),
            language: {
                switch:    opt.headerDOM.querySelector( languageElementQuerySelector( 'switch' ) ),
                switches:  Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( languageElementQuerySelector( 'switch' ) ) )
                .filter( switchDOM => switchDOM !== null ),
                dropdowns: Array.from( opt.allHeaderDOMs )
                .map( header => header.querySelector( languageBlockQuerySelector( 'dropdown' ) ) )
                .filter( dropdownDOM => dropdownDOM !== null ),
            },
        };

        if (
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.menu ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.cancel ) ||
            !this.DOM.item.length ||
            !this.DOM.item.every( itemObj => models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( itemObj.switch ) &&
                itemObj.dropdowns.every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement ) &&
                itemObj.dropdowns.length !== 0 ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement( this.DOM.language.switch ) ||
            !this.DOM.language.switches.length ||
            !this.DOM.language.switches.every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement ) ||
            !this.DOM.language.dropdowns.length ||
            !this.DOM.language.dropdowns.every( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_1__["default"].isDomElement )
        )
            throw new Error( 'DOM not found.' );

        this.subscribeMenuEvent();
        this.subscribeDropdownEvent();
        this.subscribeLanguageEvent();
        this.subscribeScrollEvent();

        return this;
    }

    subscribeMenuEvent () {
        window.addEventListener( 'click', ( event ) => {
            if ( event.target !== this.DOM.menu &&
                !this.DOM.navigation.contains( event.target ) &&
                window.getComputedStyle( this.DOM.header ).display !== 'none'
            ) {
                this.DOM.allNavigations.forEach( ( navigationDOM ) => {
                    Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( navigationDOM, 'header__navigation--active' );
                } );
            }
        } );

        this.DOM.menu.addEventListener( 'click', () => {
            this.DOM.allNavigations.forEach( ( navigationDOM ) => {
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( navigationDOM, 'header__navigation--active' );
            } );
        } );

        this.DOM.cancel.addEventListener( 'click', () => {
            this.DOM.allNavigations.forEach( ( navigationDOM ) => {
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( navigationDOM, 'header__navigation--active' );
            } );
        } );
    }

    subscribeDropdownEvent () {
        this.DOM.item.forEach( ( itemObj ) => {
            itemObj.switch.addEventListener( 'click', () => {
                if ( itemObj.switch.classList.contains( 'item__switch--active' ) ) {
                    itemObj.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( switchDOM, 'item__switch--active' ) );
                    itemObj.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( dropdownDOM, 'item__dropdown--open' ) );
                }
                else {
                    this.DOM.item.forEach( ( itemObj ) => {
                        itemObj.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( switchDOM, 'item__switch--active' ) );
                        itemObj.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( dropdownDOM, 'item__dropdown--open' ) );
                    } );
                    itemObj.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( switchDOM, 'item__switch--active' ) );
                    itemObj.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( dropdownDOM, 'item__dropdown--open' ) );
                }
            } );
        } );
    }

    subscribeLanguageEvent () {
        this.DOM.language.switch.addEventListener( 'click', () => {
            if ( this.DOM.language.switch.classList.contains( 'language__switch--active' ) ) {
                this.DOM.language.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( dropdownDOM, 'language__dropdown--open' ) );
                this.DOM.language.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( switchDOM, 'language__switch--active' ) );
            }
            else {
                this.DOM.language.dropdowns.forEach( dropdownDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( dropdownDOM, 'language__dropdown--open' ) );
                this.DOM.language.switches.forEach( switchDOM => Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( switchDOM, 'language__switch--active' ) );
            }
        } );
    }

    subscribeScrollEvent () {
        let prevScrollpos = window.pageYOffset;
        window.addEventListener( 'scroll', () => {
            const currentScrollPos = window.pageYOffset;
            if ( prevScrollpos < currentScrollPos && currentScrollPos > 96 )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.header, 'header--active' );
            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.header, 'header--active' );

            if ( currentScrollPos > 96 )
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classAdd"])( this.DOM.header, 'header--fixed' );
            else
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_0__["classRemove"])( this.DOM.header, 'header--fixed' );
            prevScrollpos = currentScrollPos;
        } );
    }
}


/***/ }),

/***/ "./static/src/js/components/user/data-config.js":
/*!******************************************************!*\
  !*** ./static/src/js/components/user/data-config.js ***!
  \******************************************************/
/*! exports provided: dataI18n, dataEditPageConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataI18n", function() { return dataI18n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataEditPageConfig", function() { return dataEditPageConfig; });
/* harmony import */ var models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! models/common/utils/language.js */ "./models/common/utils/language.js");
/* harmony import */ var models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/faculty/utils/degree.js */ "./models/faculty/utils/degree.js");
/* harmony import */ var static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! static/src/js/utils/language.js */ "./static/src/js/utils/language.js");
/* harmony import */ var static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! static/src/js/components/user/edit-page.js */ "./static/src/js/components/user/edit-page.js");
/* harmony import */ var models_faculty_utils_nation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! models/faculty/utils/nation.js */ "./models/faculty/utils/nation.js");






const dataI18n = Object.freeze( {
    profile: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            topic: {
                name:          'name',
                nation:        'naiton',
                officeAddress: 'office address',
                officeTel:     'office tel',
                labName:       'lab name',
                labAddress:    'lab address',
                labTel:        'lab tel',
                labWeb:        'lab web',
                email:         'email',
                personalWeb:   'personal web',
                fax:           'fax',
            },
            default: {
                name:          'ex. Sam Wang',
                officeAddress: 'ex. 65xxx, 12F, CSIE new building',
                officeTel:     'ex. 06-xxxxxxx,ext',
                labName:       'please input your lab name',
                labAddress:    'ex. 65xxx, 5F, CSIE new building',
                labTel:        'ex. 06-xxxxxxx,ext',
                labWeb:        'ex. http://your_web_site.com',
                email:         'ex. example@xxxxxxxx',
                personalWeb:   'ex. http://your_web_site.com',
                fax:           'please input your fax number',
                nation:        0,
            },
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            topic: {
                name:          '姓名',
                nation:        '國籍',
                officeAddress: '辦公室位置',
                officeTel:     '辦公室電話',
                labName:       '實驗室名稱',
                labAddress:    '實驗室位置',
                labTel:        '實驗室電話',
                labWeb:        '實驗室網站',
                email:         'email',
                personalWeb:   '個人網站',
                fax:           '傳真',
            },
            default: {
                name:          'ex. 王小明',
                officeAddress: 'ex. 資訊系新館 65xxx',
                officeTel:     'ex. 06-xxxxxxx,分機號碼',
                labName:       'ex. xxx實驗室',
                labAddress:    'ex. 資訊系新館 65xxx',
                labTel:        'ex. 06-xxxxxxx,分機號碼',
                labWeb:        'ex. http://your_web_site.com',
                email:         'ex. example@xxxxxxxx',
                personalWeb:   'ex. http://your_web_site.com',
                fax:           '請輸入您的傳真號碼',
            },
        },
    },
    title: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            topic:   'title',
            default: {
                title:        'ex. Professor',
            },
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            topic:   '職稱',
            default: {
                title:        'ex. 教授',
            },
        },
    },
    specialty: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            topic:   'specialty',
            default: {
                specialty:     'ex. machine learning',
            },
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            topic:   '專長領域',
            default: {
                specialty:     'ex. 機器學習',
            },
        },
    },
    education: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            topic:   'education',
            default: {
                degree: 0,
                school:       'ex. Nation Cheng Kung University',
                major:        'ex. CSIE',
            },
            localTopic: {
                degree: 'degree',
                school: 'school',
                major:  'major',
            },
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            topic:   '學歷',
            default: {
                degree: 0,
                school:       'ex. 國立成功大學',
                major:        'ex. 資訊工程學系',
            },
            localTopic: {
                degree: '學位',
                school: '學校',
                major:  '主修',
            },
        },
    },
    experience: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            topic:   'experience',
            default: {
                organization: 'ex. Nation Cheng Kung University',
                department:   'ex. CSIE',
                title:        'ex. Professor',
            },
            localTopic: {
                organization: 'organization',
                department:   'department',
                title:        'title',
            },
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            topic:   '經歷',
            default: {
                organization: 'ex. 國立成功大學',
                department:   'ex. 資訊工程學系',
                title:        'ex. 教授',
            },
            localTopic: {
                organization: '任職單位',
                department:   '任職部門',
                title:        '職位',
            },
        },
    },
    editPage: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            button: {
                cancel: 'cancel',
                check:  'check',
            },
            topic: {
                add:    'add your ',
                update: 'update your ',
                delete: 'delete your ',
            },
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            button: {
                cancel: '取消',
                check:  '確定',
            },
            topic: {
                add:    '新增您的',
                update: '修改您的',
                delete: '刪除您的',
            },
        },
    },
    button: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            delete: 'delete',
            update:  'update',
            add:     'add',
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            delete: '刪除',
            update:  '變更',
            add:     '新增',
        },
    },
    time: {
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'en-US' ) ]: {
            from:    'from',
            to:      'to',
        },
        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLanguageId( 'zh-TW' ) ]: {
            from:    '從',
            to:      '至',
        },
    },
} );

const dataEditPageConfig = Object.freeze( {
    profile: {
        name: [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'name',
                dataType:    'text',
                i18n:        true,
            } ),
        ],
        officeAddress: [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'officeAddress',
                dataType:    'text',
                i18n:        true,
            } ),
        ],
        labName: [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'labName',
                dataType:    'text',
                i18n:        true,
            } ),
        ],
        labAddress:  [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'labAddress',
                dataType:    'text',
                i18n:        true,
            } ),
        ],
        labTel:  [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'labTel',
                dataType:    'tel',
                i18n:        false,
            } ),
        ],
        labWeb:  [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'labWeb',
                dataType:    'url',
                i18n:        false,
            } ),
        ],
        officeTel: [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'officeTel',
                dataType:    'tel',
                i18n:        false,
            } ),
        ],
        email:    [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'email',
                dataType:    'email',
                i18n:        false,
            } ),
        ],
        fax:    [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'fax',
                dataType:    'tel',
                i18n:        false,
            } ),
        ],
        personalWeb:  [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:        'text',
                dbTableItem: 'personalWeb',
                dataType:    'url',
                i18n:        false,
            } ),
        ],
        nation: [
            Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])( {
                type:         'dropdown',
                dbTableItem:  'nation',
                dropdownItem: models_faculty_utils_nation_js__WEBPACK_IMPORTED_MODULE_4__["default"].i18n[ static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_2__["default"].currentLanguageId ],
                util:         models_faculty_utils_nation_js__WEBPACK_IMPORTED_MODULE_4__["default"],
            } ),
        ],
    },
    education: [
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type: 'time',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'localTopic',
                dbTableItem: 'school',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'school',
                dataType:    'text',
                i18n:        true,
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'localTopic',
                dbTableItem: 'major',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'major',
                dataType:    'text',
                i18n:        true,
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'localTopic',
                dbTableItem: 'degree',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:         'dropdown',
                dbTableItem:  'degree',
                dataType:     'text',
                dropdownItem: models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_1__["default"].i18n[ static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_2__["default"].currentLanguageId ],
                util:         models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_1__["default"],
            }
        ),
    ],
    experience: [
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type: 'time',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'localTopic',
                dbTableItem: 'organization',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'organization',
                dataType:    'text',
                i18n:        true,
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'localTopic',
                dbTableItem: 'department',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'department',
                dataType:    'text',
                i18n:        true,
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'localTopic',
                dbTableItem: 'title',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'title',
                dataType:    'text',
                i18n:        true,
            }
        ),
    ],
    title: [
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type: 'time',
            }
        ),
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'title',
                dataType:    'text',
                i18n:        true,
            }
        ),
    ],
    specialty: [
        Object(static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_3__["editPageType"])(
            {
                type:        'text',
                dbTableItem: 'specialty',
                dataType:    'text',
                i18n:        true,
            }
        ),
    ],
} );




/***/ }),

/***/ "./static/src/js/components/user/edit-page.js":
/*!****************************************************!*\
  !*** ./static/src/js/components/user/edit-page.js ***!
  \****************************************************/
/*! exports provided: default, EditPage, editPageType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditPage", function() { return EditPage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "editPageType", function() { return editPageType; });
/* harmony import */ var static_src_pug_components_user_edit_page_pug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/pug/components/user/edit-page.pug */ "./static/src/pug/components/user/edit-page.pug");
/* harmony import */ var static_src_pug_components_user_edit_page_pug__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(static_src_pug_components_user_edit_page_pug__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! static/src/pug/components/user/edit-page-content.pug */ "./static/src/pug/components/user/edit-page-content.pug");
/* harmony import */ var static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! static/src/js/components/user/data-config.js */ "./static/src/js/components/user/data-config.js");
/* harmony import */ var models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! models/common/utils/language.js */ "./models/common/utils/language.js");
/* harmony import */ var static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! static/src/js/utils/style.js */ "./static/src/js/utils/style.js");
/* harmony import */ var settings_server_config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! settings/server/config.js */ "./settings/server/config.js");
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");
/* harmony import */ var static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! static/src/js/utils/language.js */ "./static/src/js/utils/language.js");









/**
 * @param {object} opt
 * @return {Promise}
 */


class EditPage {
    constructor ( opt ) {
        if (
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_6__["default"].isDomElement( opt.editPageDOM ) ||
            !static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_7__["default"].isSupportedLanguageId( opt.languageId )
        )
            throw new TypeError( 'invalid arguments' );

        this.DOM = {
            editPage: opt.editPageDOM,
        };
        this.config = {
            languageId:    opt.languageId,
            buttonMethod:  opt.buttonMethod,
            dbTable:       opt.dbTable,
            dbTableItemId: opt.id,
        };
        this.dataI18n = opt.dataI18n;
        this.editPageConfig = opt.editPageConfig;
        this.dbData = ( opt.buttonMethod === 'update' ) ? opt.dbData : {};
        this.content = opt.content;
    }

    async renderEditPageWindow () {
        const i18n = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_2__["dataI18n"].editPage;
        Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_4__["classRemove"])( this.DOM.editPage, 'content__edit-page--hidden' );
        this.DOM.editPage.innerHTML = '';
        this.DOM.editPage.innerHTML += static_src_pug_components_user_edit_page_pug__WEBPACK_IMPORTED_MODULE_0___default()( {
            url:    `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_5__["host"] }/user/profile`,
            cancel: i18n[ this.config.languageId ].button.cancel,
            check:  i18n[ this.config.languageId ].button.check,
            topic:  `${ i18n[ this.config.languageId ].topic[ this.config.buttonMethod ] }${ this.dataI18n[ this.config.languageId ].topic }`,
        } );
        return {
            info:   this.DOM.editPage.querySelector( '.edit-page__window > .window__form > .form__content > .content__info' ),
            check:   this.DOM.editPage.querySelector( '.edit-page__window > .window__form > .form__button > .button__item--check' ),
            cancel:  this.DOM.editPage.querySelector( '.edit-page__window > .window__form > .form__button > .button__item--cancel' ),
            error:   this.DOM.editPage.querySelector( '.edit-page__window > .window__form > .form__content > .content__error > .error__message' ),
        };
    }

    setTextInput ( editPageConfig, editPageInfoDOM ) {
        const flag = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLanguageId( 'zh-TW' ) ]: `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_5__["host"] }/static/image/icon/tw.png`,
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLanguageId( 'en-US' ) ]: `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_5__["host"] }/static/image/icon/us.png`,
        };
        const languageIds = ( editPageConfig.i18n ) ? models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].supportedLanguageId : [ this.config.languageId, ];
        languageIds.forEach( ( languageId ) => {
            const placeholder = this.dataI18n[ languageId ].default[ editPageConfig.dbTableItem ];

            editPageInfoDOM.innerHTML += static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1___default()( {
                flag:        ( editPageConfig.i18n ) ? flag[ languageId ] : null,
                value:       ( this.config.buttonMethod === 'update' ) ? this.dbData[ languageId ][ editPageConfig.dbTableItem ] : '',
                placeholder,
                name:        ( editPageConfig.i18n ) ? `${ editPageConfig.dbTableItem }_${ languageId }` : `${ editPageConfig.dbTableItem }`,
                dataType:    editPageConfig.dataType,
                type:        editPageConfig.type,
                dbTableItem: editPageConfig.dbTableItem,
                languageId,
                i18n:        editPageConfig.i18n,
            } );
        } );
    }

    setTimeInput ( editPageInfoDOM ) {
        const timeI18n = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_2__["dataI18n"].time[ this.config.languageId ];
        const valueFrom = ( this.config.buttonMethod === 'update' ) ? this.dbData[ this.config.languageId ].from : null;
        const valueTo = ( this.config.buttonMethod === 'update' ) ? this.dbData[ this.config.languageId ].to : null;

        editPageInfoDOM.innerHTML += static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1___default()( {
            from:       timeI18n.from,
            to:         timeI18n.to,
            valueFrom,
            valueTo,
            nameFrom:   'from',
            nameTo:     'to',
            type:       'time',
        } );
    }

    setLocalTopic ( topic, editPageInfoDOM ) {
        editPageInfoDOM.innerHTML += static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1___default()( {
            localTopic:   topic,
            type:        'local-topic',
        } );
    }

    setDropdownInput ( editPageConfig, editPageInfoDOM ) {
        const util = editPageConfig.util;

        let value = util.map.indexOf( util.defaultOption );
        if ( this.config.buttonMethod === 'update' )
            value = this.dbData[ this.config.languageId ][ editPageConfig.dbTableItem ];

        const top = util.i18n[ this.config.languageId ][ util.map[ value ] ];

        editPageInfoDOM.innerHTML += static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1___default()( {
            top,
            value,
            data:        editPageConfig.dropdownItem,
            name:        `${ this.config.dbTable }_${ editPageConfig.dbTableItem }`,
            dbTableItem: editPageConfig.dbTableItem,
            type:        'dropdown',
        } );

        const dropdownTop = editPageInfoDOM.querySelector( '.input__dropdown > .dropdown__top' );
        const dropdownItems = editPageInfoDOM.querySelectorAll( '.input__dropdown > .dropdown__button > .button__content > .content__item' );
        const dropdownSubmit = editPageInfoDOM.querySelector( '.input__dropdown > .dropdown__button > .button__submit' );
        dropdownTop.addEventListener( 'click', () => {
            Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_4__["classAdd"])( editPageInfoDOM.querySelector( '.input__dropdown > .dropdown__button' ), 'dropdown__button--active' );
        } );
        dropdownItems.forEach( ( item ) => {
            item.addEventListener( 'click', ( element ) => {
                const newValue = element.target.getAttribute( 'value' );
                dropdownTop.innerHTML = util.i18n[ this.config.languageId ][ newValue ];
                dropdownSubmit.value = util.map.indexOf( newValue );
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_4__["classRemove"])( editPageInfoDOM.querySelector( '.input__dropdown > .dropdown__button' ), 'dropdown__button--active' );
            } );
        } );
    }

    async setEditPageInputBlock ( editPageInfoDOM ) {
        editPageInfoDOM.innerHTML = '';
        this.editPageConfig.forEach( ( element ) => {
            switch ( element.type ) {
                case 'text':
                    this.setTextInput( element, editPageInfoDOM );
                    break;
                case 'time':
                    this.setTimeInput( editPageInfoDOM );
                    break;
                case 'local-topic':
                    const topic =  this.dataI18n[ this.config.languageId ].localTopic[ element.dbTableItem ];
                    this.setLocalTopic( topic, editPageInfoDOM );
                    break;
                case 'dropdown':
                    this.setDropdownInput( element, editPageInfoDOM );
                    break;
                default:
                    break;
            }
        } );
    }

    async setEditPageDeleteBlock ( editPageInfoDOM ) {
        editPageInfoDOM.innerHTML += static_src_pug_components_user_edit_page_content_pug__WEBPACK_IMPORTED_MODULE_1___default()( {
            localTopic:  this.content,
            type:       'local-topic',
        } );
    }

    setFocus () {
        const input = this.DOM.editPage.getElementsByTagName( 'input' );
        const val   = input[ 0 ].value;
        input[ 0 ].focus();
        input[ 0 ].value = '';
        input[ 0 ].value = val;
    }

    async renderEditPage () {
        const editPageContentDOM = await this.renderEditPageWindow();

        if ( this.config.buttonMethod === 'delete' )
            await this.setEditPageDeleteBlock( editPageContentDOM.info );

        else {
            await this.setEditPageInputBlock( editPageContentDOM.info );
            this.setFocus();
        }

        return editPageContentDOM;
    }
}

/**
 * Return a object about editPage info
 * @param {object} info
 * @return {object}
 */

function editPageType ( info ) {
    const typeObj = {
        text: {
            type:        'text',
            dataType:    info.dataType,
            dbTableItem: info.dbTableItem,
            i18n:        info.i18n,
        },
        time: {
            type: 'time',
        },
        localTopic: {
            type:        'local-topic',
            dbTableItem: info.dbTableItem,
        },
        dropdown: {
            type:         'dropdown',
            util:         info.util,
            dbTableItem:  info.dbTableItem,
            dropdownItem: info.dropdownItem,
        },
    };

    return typeObj[ info.type ];
}

/* harmony default export */ __webpack_exports__["default"] = (EditPage);





/***/ }),

/***/ "./static/src/js/components/user/set-data.js":
/*!***************************************************!*\
  !*** ./static/src/js/components/user/set-data.js ***!
  \***************************************************/
/*! exports provided: SetData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetData", function() { return SetData; });
/* harmony import */ var static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/js/components/user/edit-page.js */ "./static/src/js/components/user/edit-page.js");
/* harmony import */ var static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! static/src/js/utils/language.js */ "./static/src/js/utils/language.js");
/* harmony import */ var static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! static/src/js/utils/style.js */ "./static/src/js/utils/style.js");
/* harmony import */ var settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! settings/server/config.js */ "./settings/server/config.js");
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");
/* harmony import */ var static_src_pug_components_user_dynamic_input_block_pug__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! static/src/pug/components/user/dynamic-input-block.pug */ "./static/src/pug/components/user/dynamic-input-block.pug");
/* harmony import */ var static_src_pug_components_user_dynamic_input_block_pug__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(static_src_pug_components_user_dynamic_input_block_pug__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! models/common/utils/language.js */ "./models/common/utils/language.js");
/* harmony import */ var models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! models/faculty/utils/degree.js */ "./models/faculty/utils/degree.js");
/* harmony import */ var static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! static/src/js/components/user/data-config.js */ "./static/src/js/components/user/data-config.js");
/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! validate.js */ "./node_modules/validate.js/validate.js");
/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(validate_js__WEBPACK_IMPORTED_MODULE_9__);











class SetData {
    constructor ( opt ) {
        opt = opt || {};

        if (
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isDomElement( opt.blockDOM ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isDomElement( opt.editPageDOM ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isDomElement( opt.addButtonDOM ) ||
            !static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_1__["default"].isSupportedLanguageId( opt.languageId )
        )
            throw new TypeError( 'invalid arguments' );

        this.config = {
            languageId: opt.languageId,
            profileId:  opt.profileId,
            dbTable:    opt.dbTable,
        };

        this.i18n = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataI18n"][ opt.dbTable ];

        this.DOM = {
            block:     opt.blockDOM,
            editPage:  opt.editPageDOM,
            addButton: opt.addButtonDOM,
        };

        this.updateButtonQuerySelector = ( block, id ) => `.input-block__block > .block__content > .content__modify--${ block }-${ id }`;
        this.deleteButtonQuerySelector = ( block, id ) => `.input-block__block > .block__content > .content__remove--${ block }-${ id }`;

        this.editPageConfig = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataEditPageConfig"][ opt.dbTable ];
    }

    queryApi ( lang ) {
        return `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/api/faculty/facultyWithId/${ this.config.profileId }?languageId=${ lang }`;
    }

    async fetchData ( lang ) {
        try {
            const res = await fetch( this.queryApi( lang ) );

            if ( !res.ok )
                throw new Error( 'No faculty found' );

            return res.json();
        }
        catch ( err ) {
            throw err;
        }
    }

    async renderBlock ( info ) {
        try {
            const buttonI18n = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataI18n"].button;
            const data = {
                info,
                button:   {
                    remove: buttonI18n[ this.config.languageId ].delete,
                    modify: buttonI18n[ this.config.languageId ].update,
                },
            };
            this.DOM.block.innerHTML += static_src_pug_components_user_dynamic_input_block_pug__WEBPACK_IMPORTED_MODULE_5___default()( {
                data,
            } );
        }
        catch ( err ) {
            console.error( err );
        }
    }

    async renderEducationBlock ( data ) {
        try {
            this.DOM.block.innerHTML = '';
            data[ this.config.languageId ][ this.config.dbTable ].forEach( async ( res, index ) => {
                await this.renderBlock( {
                    modifier: 'education',
                    id:       res.educationId,
                    content:  `${ res.school } ${ res.major } ${ models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_7__["default"].i18n[ this.config.languageId ][ models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_7__["default"].map[ res.degree ] ] }`,
                    res:      {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ].education[ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ].education[ index ],
                    },
                } );
                await this.setUpdateButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.updateButtonQuerySelector( this.config.dbTable, res.educationId ) ),
                    res:       {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                    id:       res.educationId,
                } );
                await this.setDeleteButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.deleteButtonQuerySelector( this.config.dbTable, res.educationId ) ),
                    id:        res.educationId,
                    content:   `${ res.school } ${ res.major } ${ models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_7__["default"].i18n[ this.config.languageId ][ models_faculty_utils_degree_js__WEBPACK_IMPORTED_MODULE_7__["default"].map[ res.degree ] ] }`,
                } );
            } );
        }
        catch ( err ) {
            throw err;
        }
    }

    async renderExperienceBlock ( data ) {
        try {
            this.DOM.block.innerHTML = '';
            data[ this.config.languageId ][ this.config.dbTable ].forEach( async ( res, index ) => {
                await this.renderBlock( {
                    modifier: 'experience',
                    id:       res.experienceId,
                    content:  `${ res.organization } ${ res.department } ${ res.title }`,
                    res:      {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                } );
                await this.setUpdateButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.updateButtonQuerySelector( this.config.dbTable, res.experienceId ) ),
                    res:       {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                    id:       res.experienceId,
                } );
                await this.setDeleteButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.deleteButtonQuerySelector( this.config.dbTable, res.experienceId ) ),
                    id:        res.experienceId,
                    content:   `${ res.organization } ${ res.department } ${ res.title }`,
                } );
            } );
        }
        catch ( err ) {
            throw err;
        }
    }

    async renderTitleBlock ( data ) {
        try {
            this.DOM.block.innerHTML = '';
            data[ this.config.languageId ][ this.config.dbTable ].forEach( async ( res, index ) => {
                await this.renderBlock( {
                    modifier: 'title',
                    id:       res.titleId,
                    content:  res.title,
                    res:      {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                } );
                await this.setUpdateButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.updateButtonQuerySelector( this.config.dbTable, res.titleId ) ),
                    res:       {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                    id:       res.titleId,
                } );
                await this.setDeleteButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.deleteButtonQuerySelector( this.config.dbTable, res.titleId ) ),
                    id:        res.titleId,
                    content:   res.title,
                } );
            } );
        }
        catch ( err ) {
            throw err;
        }
    }

    async renderSpecialtyBlock ( data ) {
        try {
            this.DOM.block.innerHTML = '';
            data[ this.config.languageId ][ this.config.dbTable ].forEach( async ( res, index ) => {
                await this.renderBlock( {
                    modifier: 'specialty',
                    id:       res.specialtyId,
                    content:  res.specialty,
                    res:      {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                } );
                await this.setUpdateButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.updateButtonQuerySelector( this.config.dbTable, res.specialtyId ) ),
                    res:       {
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ][ this.config.dbTable ][ index ],
                        [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: data[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ][ this.config.dbTable ][ index ],
                    },
                    id:       res.specialtyId,
                } );
                await this.setDeleteButtonEvent( {
                    buttonDOM: this.DOM.block.querySelector( this.deleteButtonQuerySelector( this.config.dbTable, res.specialtyId ) ),
                    id:        res.specialtyId,
                    content:   res.specialty,
                } );
            } );
        }
        catch ( err ) {
            throw err;
        }
    }

    closeEditPageWindow () {
        Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__["classAdd"])( this.DOM.editPage, 'content__edit-page--hidden' );
    }

    uploadUpdateData ( dbTableItemId ) {
        this.checkSubmitData();
        const input = this.DOM.editPage.getElementsByTagName( 'input' );
        const item = {};
        const i18n = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: {},
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: {},
        };
        Array.from( input ).forEach( ( element ) => {
            if ( element.getAttribute( 'type' ) === 'text' && element.getAttribute( 'i18n' ) !== null )
                i18n[ element.getAttribute( 'languageId' ) ][ element.getAttribute( 'dbTableItem' ) ] = element.value;
            else
                item[ element.getAttribute( 'dbTableItem' ) ] = element.value;
        } );

        fetch( `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/user/profile`, {
            method:   'POST',
            body:   JSON.stringify( {
                'profileId':    this.config.profileId,
                'method':       'update',
                'dbTable':      this.config.dbTable,
                dbTableItemId,
                item,
                i18n,
            } ),
        } )
        .then( async () => {
            this.exec();
            this.closeEditPageWindow();
        } ).catch( ( err ) => {
            this.closeEditPageWindow();
            console.error( err );
        } );
    }

    uploadAddData () {
        const input = this.DOM.editPage.getElementsByTagName( 'input' );
        const item = {};
        const i18n = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: {},
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: {},
        };
        Array.from( input ).forEach( ( element ) => {
            if ( element.getAttribute( 'type' ) === 'text' && element.getAttribute( 'i18n' ) !== null )
                i18n[ element.getAttribute( 'languageId' ) ][ element.getAttribute( 'dbTableItem' ) ] = element.value;
            else
                item[ element.getAttribute( 'dbTableItem' ) ] = element.value;
        } );

        fetch( `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/user/profile`, {
            method:   'POST',
            body:   JSON.stringify( {
                profileId:    this.config.profileId,
                method:       'add',
                dbTable:      this.config.dbTable,
                item,
                i18n,
            } ),
        } )
        .then( async () => {
            this.exec();
            this.closeEditPageWindow();
        } ).catch( ( err ) => {
            this.closeEditPageWindow();
            console.error( err );
        } );
    }

    uploadDeleteData ( dbTableItemId ) {
        fetch( `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/user/profile`, {
            method:   'POST',
            body:   JSON.stringify( {
                profileId:     this.config.profileId,
                method:        'delete',
                dbTable:       this.config.dbTable,
                dbTableItemId,
            } ),
        } )
        .then( async () => {
            this.exec();
            this.closeEditPageWindow();
        } ).catch( ( err ) => {
            this.closeEditPageWindow();
            console.error( err );
        } );
    }

    checkSubmitData ( errorDOM ) {
        let isValid = true;
        const input = this.DOM.editPage.getElementsByTagName( 'input' );
        const today = new Date();

        const constraints = {
            [ `title_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文職稱是必填欄位',
                },
            },
            [ `title_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '英文職稱是必填欄位',
                },
            },
            [ `specialty_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文專長領域是必填欄位',
                },
            },
            [ `specialty_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '英文專長領域是必填欄位',
                },
            },
            [ `school_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文學校是必填欄位',
                },
            },
            [ `school_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '英文學校是必填欄位',
                },
            },
            [ `major_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文主修是必填欄位',
                },
            },
            [ `major_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '英文主修是必填欄位',
                },
            },
            [ `organization_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文任職單位是必填欄位',
                },
            },
            [ `organization_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '英文任職單位是必填欄位',
                },
            },
            from: {
                presence: {
                    allowEmpty: false,
                    message:    '年份是必填欄位',
                },
                numericality: {
                    onlyInteger:       true,
                    greaterThan:       1900,
                    lessThanOrEqualTo: today.getFullYear(),
                    message:           '年份應介於1900~現在',
                },
            },
            to: {
                presence: {
                    allowEmpty: false,
                    message:    '年份是必填欄位',
                },
                numericality: {
                    onlyInteger:       true,
                    greaterThan:       1900,
                    lessThanOrEqualTo: today.getFullYear(),
                    message:           '年份應介於1900~現在',
                },
            },
        };

        Array.from( input ).forEach( ( element ) => {
            if ( isValid ) {
                const errors = validate_js__WEBPACK_IMPORTED_MODULE_9___default.a.single( element.value, constraints[ element.name ] );
                if ( errors ) {
                    this.setErrorMessage( element, errors[ 0 ], errorDOM );
                    isValid = false;
                }
            }
        } );

        return isValid;
    }

    setErrorMessage ( inputDOM, errorMessage, errorDOM ) {
        inputDOM.focus();
        errorDOM.innerHTML = errorMessage;
    }

    setAddButtonEvent () {
        this.DOM.addButton.addEventListener( 'click', async () => {
            const editPage = new static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
                editPageConfig: static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataEditPageConfig"][ this.config.dbTable ],
                dataI18n:       static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataI18n"][ this.config.dbTable ],
                editPageDOM:    this.DOM.editPage,
                dbTable:        this.config.dbTable,
                languageId:     this.config.languageId,
                buttonMethod:   'add',
            } );
            const editPageDOM = await editPage.renderEditPage();

            editPageDOM.cancel.addEventListener( 'click', ( e ) => {
                e.preventDefault();
                this.closeEditPageWindow();
            } );
            editPageDOM.check.addEventListener( 'click', ( e ) => {
                e.preventDefault();
                const isValid = this.checkSubmitData( editPageDOM.error );
                if ( isValid )
                    this.uploadAddData();
            } );
        } );
    }

    setUpdateButtonEvent ( info ) {
        info.buttonDOM.addEventListener( 'click', async () => {
            const editPage = new static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
                editPageConfig: static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataEditPageConfig"][ this.config.dbTable ],
                dataI18n:       static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataI18n"][ this.config.dbTable ],
                editPageDOM:    this.DOM.editPage,
                dbTable:        this.config.dbTable,
                languageId:     this.config.languageId,
                dbData:         info.res,
                buttonMethod:   'update',
            } );
            const editPageDOM = await editPage.renderEditPage();

            editPageDOM.cancel.addEventListener( 'click', ( e ) => {
                e.preventDefault();
                this.closeEditPageWindow();
            } );
            editPageDOM.check.addEventListener( 'click', ( e ) => {
                e.preventDefault();

                const isValid = this.checkSubmitData( editPageDOM.error );
                if ( isValid )
                    this.uploadUpdateData( info.id );
            } );
        } );
    }

    setDeleteButtonEvent ( info ) {
        info.buttonDOM.addEventListener( 'click', async () => {
            const editPage = new static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
                dataI18n:       static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataI18n"][ this.config.dbTable ],
                editPageConfig: static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_8__["dataEditPageConfig"][ this.config.dbTable ],
                editPageDOM:    this.DOM.editPage,
                dbTable:        this.config.dbTable,
                languageId:     this.config.languageId,
                id:             info.id,
                content:        info.content,
                buttonMethod:   'delete',
            } );
            const editPageDOM = await editPage.renderEditPage();

            editPageDOM.cancel.addEventListener( 'click', ( e ) => {
                e.preventDefault();
                this.closeEditPageWindow();
            } );
            editPageDOM.check.addEventListener( 'click', ( e ) => {
                e.preventDefault();
                this.uploadDeleteData( info.id );
            } );
        } );
    }

    async exec () {
        const data = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ]: await this.fetchData( models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'en-US' ) ),
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ]: await this.fetchData( models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLanguageId( 'zh-TW' ) ),
        };

        switch ( this.config.dbTable ) {
            case 'education':
                await this.renderEducationBlock( data );
                break;
            case 'experience':
                await this.renderExperienceBlock( data );
                break;
            case 'title':
                await this.renderTitleBlock( data );
                break;
            case 'specialty':
                await this.renderSpecialtyBlock( data );
                break;
            default:
                break;
        }
        this.setAddButtonEvent();
    }
}




/***/ }),

/***/ "./static/src/js/components/user/set-profile-data.js":
/*!***********************************************************!*\
  !*** ./static/src/js/components/user/set-profile-data.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SetProfileData; });
/* harmony import */ var static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/js/components/user/edit-page.js */ "./static/src/js/components/user/edit-page.js");
/* harmony import */ var static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! static/src/js/utils/language.js */ "./static/src/js/utils/language.js");
/* harmony import */ var static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! static/src/js/utils/style.js */ "./static/src/js/utils/style.js");
/* harmony import */ var settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! settings/server/config.js */ "./settings/server/config.js");
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");
/* harmony import */ var models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! models/common/utils/language.js */ "./models/common/utils/language.js");
/* harmony import */ var models_faculty_utils_nation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! models/faculty/utils/nation.js */ "./models/faculty/utils/nation.js");
/* harmony import */ var static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! static/src/js/components/user/data-config.js */ "./static/src/js/components/user/data-config.js");
/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! validate.js */ "./node_modules/validate.js/validate.js");
/* harmony import */ var validate_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(validate_js__WEBPACK_IMPORTED_MODULE_8__);










class SetProfileData {
    constructor ( opt ) {
        opt = opt || {};

        if (
            !opt.profileDOM ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isDomElement( opt.profileDOM ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isDomElement( opt.editPageDOM ) ||
            !static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_1__["default"].isSupportedLanguageId( opt.languageId ) ||
            !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isValidId( opt.profileId )
        )
            throw new TypeError( 'invalid arguments' );

        this.DOM = {
            profile:  opt.profileDOM,
            editPage: opt.editPageDOM,
        };

        this.config = {
            dbTable:    'profile',
            languageId: opt.languageId,
            profileId:  opt.profileId,
        };

        this.selector = {
            node:   block => `.profile__${ block }`,
            text:   block => `.profile__input-block--${ block } > .input-block__block > .block__content > .content__word`,
            update: block => `.profile__input-block--${ block } > .input-block__block > .block__content > .content__modify`,
        };

        this.editPageConfig = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_7__["dataEditPageConfig"].profile;

        this.classModifier = Object.freeze( {
            name:          'name',
            officeAddress:  'office-location',
            labName:       'lab-name',
            labAddress:    'lab-location',
            labTel:        'lab-tel',
            labWeb:        'lab-web',
            officeTel:     'office-tel',
            email:         'email',
            fax:           'fax',
            personalWeb:   'personal-web',
            nation:        'nation',
        } );

        this.i18n = static_src_js_components_user_data_config_js__WEBPACK_IMPORTED_MODULE_7__["dataI18n"].profile;

        this.imageDOM = {
            block:   opt.profileDOM.querySelector( '.profile__image' ),
            button:  opt.profileDOM.querySelector( '.profile__image > .image__frame > .frame__upload' ),
            preview: opt.profileDOM.querySelector( '.profile__image > .image__frame' ),
        };

        this.department = Array
        .from( opt.profileDOM.querySelectorAll( '.input-block > .input-block__block > .block__content > .content__tag--department' ) )
        .map( node => ( {
            node,
            classModifier: 'department',
            selected:      false,
            id:            node.getAttribute( 'data-department-id' ),
        } ) );

        this.researchGroup = Array
        .from( opt.profileDOM.querySelectorAll( '.input-block > .input-block__block > .block__content > .content__tag--research' ) )
        .map( node => ( {
            node,
            classModifier: 'research',
            selected:      false,
            id:            node.getAttribute( 'data-research-id' ),
        } ) );
    }

    queryApi ( languageId ) {
        return `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/api/faculty/facultyWithId/${ this.config.profileId }?languageId=${ languageId }`;
    }

    async fetchData ( languageId ) {
        try {
            const res = await fetch( this.queryApi( languageId ) );

            if ( !res.ok )
                throw new Error( 'No faculty found' );

            return res.json();
        }
        catch ( err ) {
            throw err;
        }
    }

    async setData () {
        const res = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ]: await this.fetchData( models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ),
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ]: await this.fetchData( models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ),
        };

        console.log( res );

        Object.keys( this.classModifier ).forEach( ( key ) => {
            this.setProfileBlock( key, res );
        } );

        this.setTags( res[ this.config.languageId ] );
        this.setImage( res[ this.config.languageId ].profile );
    }

    closeEditPageWindow () {
        Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__["classAdd"])( this.DOM.editPage, 'content__edit-page--hidden' );
    }

    setProfileBlock ( dbTableItem, res ) {
        const textDOM         = this.DOM.profile.querySelector( this.selector.text( this.classModifier[ dbTableItem ] ) );
        const updateButtonDOM = this.DOM.profile.querySelector( this.selector.update( this.classModifier[ dbTableItem ] ) );

        textDOM.innerHTML = res[ this.config.languageId ].profile[ dbTableItem ];
        if ( dbTableItem === 'nation' )
            textDOM.innerHTML = models_faculty_utils_nation_js__WEBPACK_IMPORTED_MODULE_6__["default"].i18n[ this.config.languageId ][ models_faculty_utils_nation_js__WEBPACK_IMPORTED_MODULE_6__["default"].map[ res[ this.config.languageId ].profile.nation ] ];


        updateButtonDOM.addEventListener( 'click', async () => {
            await this.setUpdateButtonEvent( dbTableItem, res );
        } );
    }

    async setUpdateButtonEvent ( dbTableItem, res ) {
        const tempDataI18n = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ]: {
                default: {
                    [ dbTableItem ]: this.i18n[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ].default[ dbTableItem ],
                },
                topic:   this.i18n[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ].topic[ dbTableItem ],
            },
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ]:  {
                default: {
                    [ dbTableItem ]: this.i18n[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ].default[ dbTableItem ],
                },
                topic:   this.i18n[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ].topic[ dbTableItem ],
            },
        };
        const editPage = new static_src_js_components_user_edit_page_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
            editPageDOM:    this.DOM.editPage,
            dbTable:        'profile',
            editPageConfig: this.editPageConfig[ dbTableItem ],
            languageId:     this.config.languageId,
            dataI18n:       tempDataI18n,
            dbData:           {
                [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ]: res[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ].profile,
                [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ]: res[ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ].profile,
            },
            buttonMethod: 'update',
        } );
        const editPageDOM = await editPage.renderEditPage();

        editPageDOM.cancel.addEventListener( 'click', ( e ) => {
            e.preventDefault();
            this.closeEditPageWindow();
        } );
        editPageDOM.check.addEventListener( 'click', ( e ) => {
            e.preventDefault();
            const isValid = this.checkSubmitData( editPageDOM.error );
            if ( isValid )
                this.uploadProfileData( dbTableItem );
        } );
    }

    checkSubmitData ( errorDOM ) {
        let isValid = true;
        const input = this.DOM.editPage.getElementsByTagName( 'input' );

        const constraints = {
            [ `name_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文姓名是必填欄位',
                },
            },
            [ `name_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '英文姓名是必填欄位',
                },
            },
            email: {
                presence: {
                    allowEmpty: false,
                    message:    'email是必填欄位',
                },
                email: {
                    message: 'email格式錯誤',
                },
            },
            fax: {
                format: {
                    pattern: '[0-9-()]+',
                    message: '傳真格式錯誤',
                },
            },
            personalWeb: {
                presence: {
                    allowEmpty: true,
                },
                url: {
                    message:    '網址格式錯誤',
                },
            },
            [ `officeAddress_${ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) }` ]: {
                presence: {
                    allowEmpty: false,
                    message:    '中文辦公室位置是必填欄位',
                },
            },
            officeTel: {
                format: {
                    pattern: '[0-9-(),]+',
                    message: '電話格式錯誤',
                },
            },
            labTel: {
                format: {
                    pattern: '[0-9-(),]+',
                    message: '電話格式錯誤',
                },
            },
            labWeb: {
                url: {
                    message: '網址格式錯誤',
                },
            },
        };

        Array.from( input ).forEach( ( element ) => {
            const errors = validate_js__WEBPACK_IMPORTED_MODULE_8___default.a.single( element.value, constraints[ element.name ] );
            if ( errors ) {
                this.setErrorMessage( element, errors[ 0 ], errorDOM );
                isValid = false;
            }
        } );

        return isValid;
    }

    setErrorMessage ( inputDOM, errorMessage, errorDOM ) {
        inputDOM.focus();
        errorDOM.innerHTML = errorMessage;
    }

    async uploadProfileData ( dbTableItem ) {
        const input = this.DOM.editPage.getElementsByTagName( 'input' );
        const item = {};
        const i18n = {
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ]: {},
            [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ]: {},
        };
        Array.from( input ).forEach( ( element ) => {
            if ( element.getAttribute( 'type' ) === 'text' && element.getAttribute( 'i18n' ) !== null )
                i18n[ element.getAttribute( 'languageId' ) ][ element.getAttribute( 'dbTableItem' ) ] = element.value;
            else
                item[ element.getAttribute( 'dbTableItem' ) ] = element.value;
        } );

        fetch( `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/user/profile`, {
            method:   'POST',
            body:   JSON.stringify( {
                'profileId':    this.config.profileId,
                'method':       'update',
                'dbTable':      'profile',
                item,
                i18n,
            } ),
        } )
        .then( async () => {
            const data = {
                [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ]: await this.fetchData( models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'en-US' ) ),
                [ models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ]: await this.fetchData( models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_5__["default"].getLanguageId( 'zh-TW' ) ),
            };
            this.setProfileBlock( dbTableItem, data );
            this.closeEditPageWindow();
        } ).catch( ( err ) => {
            this.closeEditPageWindow();
            console.error( err );
        } );
    }

    setImage ( res ) {
        try {
            if ( models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_4__["default"].isValidString( res.photo ) ) {
                const photoUrl = `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/static/image/faculty/${ res.photo }`;
                this.imageDOM.preview.style.backgroundImage = `url('${ photoUrl }')`;
                this.imageDOM.button.name = `modify_profile_photo_0_${ this.config.profileId }`;
                this.imageDOM.button.setAttribute( 'method', 'update' );
                this.imageDOM.button.setAttribute( 'dbTable', 'profile' );
                this.imageDOM.button.setAttribute( 'dbTableItem', 'photo' );
                this.imageDOM.button.setAttribute( 'languageId', this.config.languageId );
                this.imageDOM.block.action = `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/user/profile`;
            }

            this.imageDOM.button.addEventListener( 'change', () => {
                const input = this.imageDOM.button;
                if ( input.files && input.files[ 0 ] ) {
                    const reader = new FileReader();

                    reader.onload = ( e ) => {
                        this.imageDOM.preview.style.backgroundImage = `url('${ e.target.result }')`;
                    };
                    reader.readAsDataURL( input.files[ 0 ] );
                }
            } );
        }
        catch ( err ) {
            console.error( err );
        }
    }

    setTags ( res ) {
        [ 'department',
            'researchGroup', ].forEach( ( dbTable ) => {
            res[ dbTable ].forEach( ( element ) => {
                Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__["classAdd"])( this[ dbTable ][ element.type ].node, `content__tag--${ this[ dbTable ][ element.type ].classModifier }--active` );
                this[ dbTable ][ element.type ].selected = true;
            } );
            this[ dbTable ].forEach( ( element ) => {
                element.node.addEventListener( 'click', () => {
                    const method = ( element.selected ) ? 'delete' : 'add';
                    fetch( `${ settings_server_config_js__WEBPACK_IMPORTED_MODULE_3__["host"] }/user/profile`, {
                        method:   'POST',
                        body:   JSON.stringify( {
                            profileId:     this.config.profileId,
                            method,
                            dbTable,
                            dbTableItemId: element.id,
                        } ),
                    } )
                    .then( () => {
                        if ( element.selected ) {
                            Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__["classRemove"])( element.node, `content__tag--${ this[ dbTable ][ element.id ].classModifier }--active` );
                            element.selected = false;
                        }
                        else {
                            Object(static_src_js_utils_style_js__WEBPACK_IMPORTED_MODULE_2__["classAdd"])( element.node, `content__tag--${ this[ dbTable ][ element.id ].classModifier }--active` );
                            element.selected = true;
                        }
                    } )
                    .catch( ( err ) => {
                        console.error( err );
                    } );
                } );
            } );
        } );
    }

    async exec () {
        await this.setData();
    }
}


/***/ }),

/***/ "./static/src/js/user/profile.js":
/*!***************************************!*\
  !*** ./static/src/js/user/profile.js ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var static_src_js_components_common_header_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! static/src/js/components/common/header-base.js */ "./static/src/js/components/common/header-base.js");
/* harmony import */ var static_src_js_components_common_header_medium_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! static/src/js/components/common/header-medium.js */ "./static/src/js/components/common/header-medium.js");
/* harmony import */ var static_src_js_components_common_header_large_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! static/src/js/components/common/header-large.js */ "./static/src/js/components/common/header-large.js");
/* harmony import */ var static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! static/src/js/utils/language.js */ "./static/src/js/utils/language.js");
/* harmony import */ var static_src_js_components_user_set_profile_data_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! static/src/js/components/user/set-profile-data.js */ "./static/src/js/components/user/set-profile-data.js");
/* harmony import */ var static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! static/src/js/components/user/set-data.js */ "./static/src/js/components/user/set-data.js");







try {
    const headerBase = new static_src_js_components_common_header_base_js__WEBPACK_IMPORTED_MODULE_0__["default"]( {
        headerDOM:     document.querySelector( '.body__header.header.header--base' ),
        allHeaderDOMs: document.querySelectorAll( '.body__header.header' ),
    } );
    if ( !( headerBase instanceof static_src_js_components_common_header_base_js__WEBPACK_IMPORTED_MODULE_0__["default"] ) )
        throw new Error( '.header.header--base not found.' );
}
catch ( err ) {
    console.error( err );
}

try {
    const headerMedium = new static_src_js_components_common_header_medium_js__WEBPACK_IMPORTED_MODULE_1__["default"]( {
        headerDOM:     document.querySelector( '.body__header.header.header--medium' ),
        allHeaderDOMs: document.querySelectorAll( '.body__header.header' ),
    } );
    if ( !( headerMedium instanceof static_src_js_components_common_header_medium_js__WEBPACK_IMPORTED_MODULE_1__["default"] ) )
        throw new Error( '.header.header--medium not found.' );
}
catch ( err ) {
    console.error( err );
}

try {
    const headerLarge = new static_src_js_components_common_header_large_js__WEBPACK_IMPORTED_MODULE_2__["default"]( {
        headerDOM:     document.querySelector( '.body__header.header.header--large' ),
    } );
    if ( !( headerLarge instanceof static_src_js_components_common_header_large_js__WEBPACK_IMPORTED_MODULE_2__["default"] ) )
        throw new Error( '.header.header--medium not found.' );
}
catch ( err ) {
    console.error( err );
}

try {
    const setProfileData = new static_src_js_components_user_set_profile_data_js__WEBPACK_IMPORTED_MODULE_4__["default"]( {
        profileDOM:       document.getElementById( 'profile' ),
        editPageDOM:      document.getElementById( 'edit-page' ),
        languageId:       static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].currentLanguageId,
        profileId:        24,
    } );

    setProfileData.exec();
}
catch ( err ) {
    console.error( err );
}

try {
    const setEducationData = new static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"]( {
        blockDOM:       document.getElementById( 'education' ),
        editPageDOM:      document.getElementById( 'edit-page' ),
        addButtonDOM:     document.getElementById( 'add__button--education-block' ),
        languageId:       static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].currentLanguageId,
        dbTable:          'education',
        profileId:        24,
    } );

    setEducationData.exec();
}
catch ( err ) {
    console.error( err );
}

try {
    const setExperienceData = new static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"]( {
        blockDOM:       document.getElementById( 'experience' ),
        editPageDOM:      document.getElementById( 'edit-page' ),
        addButtonDOM:     document.getElementById( 'add__button--experience-block' ),
        languageId:       static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].currentLanguageId,
        dbTable:          'experience',
        profileId:        24,
    } );
    if ( !( setExperienceData instanceof static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"] ) )
        throw new Error( 'setExperienceData inVaild' );

    setExperienceData.exec();
}
catch ( err ) {
    console.error( err );
}

try {
    const setTitleData = new static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"]( {
        blockDOM:         document.getElementById( 'title' ),
        editPageDOM:      document.getElementById( 'edit-page' ),
        addButtonDOM:     document.getElementById( 'add__button--title' ),
        languageId:       static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].currentLanguageId,
        dbTable:          'title',
        profileId:        24,
    } );
    if ( !( setTitleData instanceof static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"] ) )
        throw new Error( 'setTitleData inVaild' );

    setTitleData.exec();
}
catch ( err ) {
    console.error( err );
}

try {
    const setSpecialtyData = new static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"]( {
        blockDOM:         document.getElementById( 'specialty' ),
        editPageDOM:      document.getElementById( 'edit-page' ),
        addButtonDOM:     document.getElementById( 'add__button--specialty' ),
        languageId:       static_src_js_utils_language_js__WEBPACK_IMPORTED_MODULE_3__["default"].currentLanguageId,
        dbTable:          'specialty',
        profileId:        24,
    } );
    if ( !( setSpecialtyData instanceof static_src_js_components_user_set_data_js__WEBPACK_IMPORTED_MODULE_5__["SetData"] ) )
        throw new Error( 'setSpecialtyData inVaild' );

    setSpecialtyData.exec();
}
catch ( err ) {
    console.error( err );
}


/***/ }),

/***/ "./static/src/js/utils/language.js":
/*!*****************************************!*\
  !*** ./static/src/js/utils/language.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! models/common/utils/language.js */ "./models/common/utils/language.js");


class WebLanguageUtils extends models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static get currentLanguageId () {
        let languageId = new URLSearchParams( window.location.search ).get( 'languageId' );
        languageId = Number( languageId );
        if ( languageId && WebLanguageUtils.isSupportedLanguageId( languageId ) )
            return languageId;
        return models_common_utils_language_js__WEBPACK_IMPORTED_MODULE_0__["default"].defaultLanguageId;
    }
}

/* harmony default export */ __webpack_exports__["default"] = (WebLanguageUtils);


/***/ }),

/***/ "./static/src/js/utils/style.js":
/*!**************************************!*\
  !*** ./static/src/js/utils/style.js ***!
  \**************************************/
/*! exports provided: classAdd, classRemove, delay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "classAdd", function() { return classAdd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "classRemove", function() { return classRemove; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "delay", function() { return delay; });
/* harmony import */ var models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! models/common/utils/validate.js */ "./models/common/utils/validate.js");


/**
 * Making sure there is no `className` class on the element before adding the `className` class to the classlist.
 */

function classAdd ( element, className ) {
    if ( !element.classList.contains( className ) )
        element.classList.add( className );
}

/**
 * Making sure there is `className` class on the element before removing the `className` class from the classlist.
 */

function classRemove ( element, className ) {
    if ( element.classList.contains( className ) )
        element.classList.remove( className );
}

/**
 * Delay required milliseconds.
 * @param {number} ms
 * @return {Promise}
 * @throws {TypeError}
 */

function delay ( ms = 1 ) {
    if ( !models_common_utils_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"].isPositiveInteger( ms ) )
        throw new TypeError( 'Parameter `ms` should be a positive integer.' );
    return new Promise( res => setTimeout( res, ms ) );
}


/***/ }),

/***/ "./static/src/pug/components/user/dynamic-input-block.pug":
/*!****************************************************************!*\
  !*** ./static/src/pug/components/user/dynamic-input-block.pug ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var pug = __webpack_require__(/*! ../../../../../node_modules/pug-runtime/index.js */ "./node_modules/pug-runtime/index.js");

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (data) {
pug_html = pug_html + "\u003Csection" + (pug.attr("class", pug.classes(["input-block",`${ data.info.modifier }__input-block ${ data.info.modifier }__input-block--${ data.info.modifier }`], [false,true]), false, true)+pug.attr("id", `${ data.modifier }-${ data.id }`, true, true)) + "\u003E\u003Cmain class=\"input-block__block block\"\u003E \u003Carticle class=\"block__content content\"\u003E\u003Cp class=\"content__word\"\u003E" + (pug.escape(null == (pug_interp = data.info.content) ? "" : pug_interp)) + "\u003C\u002Fp\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["content__remove",`content__remove--${ data.info.modifier }-${ data.info.id }`], [false,true]), false, true)) + "\u003E" + (pug.escape(null == (pug_interp = data.button.remove) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["content__modify",`content__modify--${ data.info.modifier }-${ data.info.id }`], [false,true]), false, true)) + "\u003E" + (pug.escape(null == (pug_interp = data.button.modify) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E\u003C\u002Farticle\u003E\u003C\u002Fmain\u003E\u003C\u002Fsection\u003E";}.call(this,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined));;return pug_html;};
module.exports = template;

/***/ }),

/***/ "./static/src/pug/components/user/edit-page-content.pug":
/*!**************************************************************!*\
  !*** ./static/src/pug/components/user/edit-page-content.pug ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var pug = __webpack_require__(/*! ../../../../../node_modules/pug-runtime/index.js */ "./node_modules/pug-runtime/index.js");

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (content, data, dataType, dbTableItem, flag, from, i18n, languageId, localTopic, name, nameFrom, nameTo, placeholder, to, top, type, value, valueFrom, valueTo) {
pug_html = pug_html + "\u003Carticle class=\"info__input\" id=\"input\"\u003E";
if (type === 'text') {
pug_html = pug_html + "\u003Csection class=\"input__text\"\u003E";
if (flag !== null) {
pug_html = pug_html + "\u003Cimg" + (" class=\"input__flag\""+pug.attr("src", flag, true, true)+" alt=\"&gt;\"") + "\u003E";
}
if (content !== null) {
pug_html = pug_html + "\u003Cinput" + (" class=\"input__content\""+pug.attr("placeholder", placeholder, true, true)+pug.attr("type", dataType, true, true)+pug.attr("value", value, true, true)+pug.attr("name", name, true, true)+pug.attr("dbTableItem", dbTableItem, true, true)+pug.attr("languageId", languageId, true, true)+pug.attr("i18n", i18n, true, true)) + "\u003E";
}
pug_html = pug_html + "\u003C\u002Fsection\u003E";
}
else
if (type === 'time') {
pug_html = pug_html + "\u003Carticle class=\"input__time time\"\u003E\u003Caside class=\"time__from from\"\u003E\u003Clabel class=\"from__text\"\u003E" + (pug.escape(null == (pug_interp = from) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003Cspan class=\"from__input input\"\u003E\u003Cinput" + (" class=\"input__year\""+" type=\"number\""+pug.attr("value", valueFrom, true, true)+" dbTableItem=\"from\" placeholder=\"yyyy\""+pug.attr("name", nameFrom, true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Faside\u003E\u003Caside class=\"time__to to\"\u003E\u003Clabel class=\"to__text\"\u003E" + (pug.escape(null == (pug_interp = to) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003Cspan class=\"to__input input\"\u003E\u003Cinput" + (" class=\"input__year\""+" type=\"number\""+pug.attr("value", valueTo, true, true)+" placeholder=\"yyyy\""+pug.attr("name", nameTo, true, true)+" dbTableItem=\"to\"") + "\u003E\u003C\u002Fspan\u003E\u003C\u002Faside\u003E\u003C\u002Farticle\u003E";
}
else
if (type === 'local-topic') {
pug_html = pug_html + "\u003Csection class=\"input__local-topic local-topic\"\u003E \u003Cp class=\"local-topic__text\"\u003E" + (pug.escape(null == (pug_interp = localTopic) ? "" : pug_interp)) + "\u003C\u002Fp\u003E\u003C\u002Fsection\u003E";
}
else
if (type === 'dropdown') {
pug_html = pug_html + "\u003Csection class=\"input__dropdown dropdown\"\u003E\u003Csection class=\"dropdown__top\"\u003E" + (pug.escape(null == (pug_interp = top) ? "" : pug_interp)) + "\u003C\u002Fsection\u003E\u003Carticle class=\"dropdown__button button\"\u003E\u003Cinput" + (" class=\"button__submit\""+" type=\"hidden\""+pug.attr("name", name, true, true)+pug.attr("value", value, true, true)+pug.attr("dbTableItem", dbTableItem, true, true)) + "\u003E\u003Csection class=\"button__content content\"\u003E";
// iterate data  
;(function(){
  var $$obj = data  ;
  if ('number' == typeof $$obj.length) {
      for (var index = 0, $$l = $$obj.length; index < $$l; index++) {
        var val = $$obj[index];
pug_html = pug_html + "\u003Csection" + (" class=\"content__item\""+pug.attr("value", index, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fsection\u003E";
      }
  } else {
    var $$l = 0;
    for (var index in $$obj) {
      $$l++;
      var val = $$obj[index];
pug_html = pug_html + "\u003Csection" + (" class=\"content__item\""+pug.attr("value", index, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fsection\u003E";
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fsection\u003E\u003C\u002Farticle\u003E\u003C\u002Fsection\u003E";
}
pug_html = pug_html + "\u003C\u002Farticle\u003E";}.call(this,"content" in locals_for_with?locals_for_with.content:typeof content!=="undefined"?content:undefined,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined,"dataType" in locals_for_with?locals_for_with.dataType:typeof dataType!=="undefined"?dataType:undefined,"dbTableItem" in locals_for_with?locals_for_with.dbTableItem:typeof dbTableItem!=="undefined"?dbTableItem:undefined,"flag" in locals_for_with?locals_for_with.flag:typeof flag!=="undefined"?flag:undefined,"from" in locals_for_with?locals_for_with.from:typeof from!=="undefined"?from:undefined,"i18n" in locals_for_with?locals_for_with.i18n:typeof i18n!=="undefined"?i18n:undefined,"languageId" in locals_for_with?locals_for_with.languageId:typeof languageId!=="undefined"?languageId:undefined,"localTopic" in locals_for_with?locals_for_with.localTopic:typeof localTopic!=="undefined"?localTopic:undefined,"name" in locals_for_with?locals_for_with.name:typeof name!=="undefined"?name:undefined,"nameFrom" in locals_for_with?locals_for_with.nameFrom:typeof nameFrom!=="undefined"?nameFrom:undefined,"nameTo" in locals_for_with?locals_for_with.nameTo:typeof nameTo!=="undefined"?nameTo:undefined,"placeholder" in locals_for_with?locals_for_with.placeholder:typeof placeholder!=="undefined"?placeholder:undefined,"to" in locals_for_with?locals_for_with.to:typeof to!=="undefined"?to:undefined,"top" in locals_for_with?locals_for_with.top:typeof top!=="undefined"?top:undefined,"type" in locals_for_with?locals_for_with.type:typeof type!=="undefined"?type:undefined,"value" in locals_for_with?locals_for_with.value:typeof value!=="undefined"?value:undefined,"valueFrom" in locals_for_with?locals_for_with.valueFrom:typeof valueFrom!=="undefined"?valueFrom:undefined,"valueTo" in locals_for_with?locals_for_with.valueTo:typeof valueTo!=="undefined"?valueTo:undefined));;return pug_html;};
module.exports = template;

/***/ }),

/***/ "./static/src/pug/components/user/edit-page.pug":
/*!******************************************************!*\
  !*** ./static/src/pug/components/user/edit-page.pug ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var pug = __webpack_require__(/*! ../../../../../node_modules/pug-runtime/index.js */ "./node_modules/pug-runtime/index.js");

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (cancel, check, topic, url) {
pug_html = pug_html + "\u003Csection class=\"edit-page__window window\"\u003E\u003Cform" + (" class=\"window__form form\""+" id=\"form\""+pug.attr("action", url, true, true)+" method=\"POST\"") + "\u003E\u003Cmain class=\"form__content content\" id=\"content\"\u003E\u003Carticle class=\"content__title\"\u003E\u003Ch1 class=\"title__word\"\u003E" + (pug.escape(null == (pug_interp = topic) ? "" : pug_interp)) + "\u003C\u002Fh1\u003E\u003C\u002Farticle\u003E\u003Carticle class=\"content__info\" id=\"info\"\u003E\u003C\u002Farticle\u003E\u003Carticle class=\"content__error error\"\u003E\u003Ch1 class=\"error__message\" id=\"error-message\"\u003E\u003C\u002Fh1\u003E\u003C\u002Farticle\u003E\u003C\u002Fmain\u003E\u003Carticle class=\"form__button button\"\u003E\u003Cbutton class=\"button__item button__item--cancel\" formnovalidate\u003E" + (pug.escape(null == (pug_interp = cancel) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E\u003Cbutton class=\"button__item button__item--check\"\u003E" + (pug.escape(null == (pug_interp = check) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E\u003C\u002Farticle\u003E\u003C\u002Fform\u003E\u003C\u002Fsection\u003E";}.call(this,"cancel" in locals_for_with?locals_for_with.cancel:typeof cancel!=="undefined"?cancel:undefined,"check" in locals_for_with?locals_for_with.check:typeof check!=="undefined"?check:undefined,"topic" in locals_for_with?locals_for_with.topic:typeof topic!=="undefined"?topic:undefined,"url" in locals_for_with?locals_for_with.url:typeof url!=="undefined"?url:undefined));;return pug_html;};
module.exports = template;

/***/ }),

/***/ 0:
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbW9kZWxzL2NvbW1vbi9tYXBzL2xhbmd1YWdlLmpzIiwid2VicGFjazovLy8uL21vZGVscy9jb21tb24vdXRpbHMvaTE4bi5qcyIsIndlYnBhY2s6Ly8vLi9tb2RlbHMvY29tbW9uL3V0aWxzL2xhbmd1YWdlLmpzIiwid2VicGFjazovLy8uL21vZGVscy9jb21tb24vdXRpbHMvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbW9kZWxzL2ZhY3VsdHkvbWFwcy9kZWdyZWUuanMiLCJ3ZWJwYWNrOi8vLy4vbW9kZWxzL2ZhY3VsdHkvbWFwcy9uYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbW9kZWxzL2ZhY3VsdHkvdXRpbHMvZGVncmVlLmpzIiwid2VicGFjazovLy8uL21vZGVscy9mYWN1bHR5L3V0aWxzL25hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGVlcC1mcmVlemUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3B1Zy1ydW50aW1lL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy92YWxpZGF0ZS5qcy92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NldHRpbmdzL3NlcnZlci9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL2NvbW1vbi9oZWFkZXItYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvY29tbW9uL2hlYWRlci1sYXJnZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvY29tbW9uL2hlYWRlci1tZWRpdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL3VzZXIvZGF0YS1jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL3VzZXIvZWRpdC1wYWdlLmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zcmMvanMvY29tcG9uZW50cy91c2VyL3NldC1kYXRhLmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zcmMvanMvY29tcG9uZW50cy91c2VyL3NldC1wcm9maWxlLWRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NyYy9qcy91c2VyL3Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL3NyYy9qcy91dGlscy9sYW5ndWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc3JjL2pzL3V0aWxzL3N0eWxlLmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9zcmMvcHVnL2NvbXBvbmVudHMvdXNlci9keW5hbWljLWlucHV0LWJsb2NrLnB1ZyIsIndlYnBhY2s6Ly8vLi9zdGF0aWMvc3JjL3B1Zy9jb21wb25lbnRzL3VzZXIvZWRpdC1wYWdlLWNvbnRlbnQucHVnIiwid2VicGFjazovLy8uL3N0YXRpYy9zcmMvcHVnL2NvbXBvbmVudHMvdXNlci9lZGl0LXBhZ2UucHVnIiwid2VicGFjazovLy9mcyAoaWdub3JlZCkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQTBDLGdDQUFnQztBQUMxRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdFQUF3RCxrQkFBa0I7QUFDMUU7QUFDQSx5REFBaUQsY0FBYztBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ3JELEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTyw2QkFBNkIsS0FBSyxFQUFFLEdBQUc7QUFDOUMsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxzQkFBc0IsSUFBSSxJQUFJLFdBQVc7QUFDekM7QUFDQSw4QkFBOEIsSUFBSTtBQUNsQywyQ0FBMkMsSUFBSTtBQUMvQyxtQkFBbUIsSUFBSTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxVQUFVLHVFQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLFVBQVUsdUVBQWE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsVUFBVSx1RUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQSxVQUFVLHVFQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsVUFBVSx1RUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLFVBQVUsdUVBQWE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFVBQVUsdUVBQWE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLFVBQVUsdUVBQWE7QUFDdkI7QUFDQTtBQUNBLFNBQVM7QUFDVCxVQUFVLHVFQUFhO0FBQ3ZCO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrRkFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsWUFBWSwrRkFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsWUFBWSwrRkFBWTtBQUN4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QUNoSCx5RkFBeUYscUJBQXFCLGdCQUFnQixxQkFBcUIsaUJBQWlCLHFCQUFxQixrREFBa0QsZ0JBQWdCLEdBQUcsVUFBVSwrVkFBK1YscUJBQXFCLEdBQUcsZUFBZSx5T0FBeU8scUJBQXFCLEdBQUcsZUFBZSw4TkFBOE4sc0dBQXNHO0FBQ2x1QywwQjs7Ozs7Ozs7Ozs7QUNKQSxVQUFVLG1CQUFPLENBQUMsNkZBQW1EOztBQUVyRSwyQkFBMkIsa0NBQWtDLGNBQWMsbUNBQW1DLEVBQUU7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0R0FBNEc7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw2Q0FBNkMsYUFBYTtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxtREFBbUQsMDBEQUEwMEQ7QUFDNzNELDBCOzs7Ozs7Ozs7OztBQzlDQSxVQUFVLG1CQUFPLENBQUMsNkZBQW1EOztBQUVyRSwyQkFBMkIsa0NBQWtDLGNBQWMsbUNBQW1DLEVBQUU7QUFDaEgsMm9DQUEyb0MsMFhBQTBYO0FBQ3JnRCwwQjs7Ozs7Ozs7Ozs7QUNKQSxlIiwiZmlsZSI6InVzZXIvcHJvZmlsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3N0YXRpYy9zcmMvanMvdXNlci9wcm9maWxlLmpzXCIpO1xuIiwiLyoqXG4gKiBMYW5ndWFnZSBtYXAgbW9kdWxlLlxuICogQG5hbWVzcGFjZVxuICogQHJlYWRvbmx5XG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBzdXBwb3J0IC0gU3VwcG9ydGluZyBsYW5ndWFnZSBsaXN0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9ICAgZGVmYXVsdCAtIERlZmF1bHQgbGFuZ3VhZ2UuXG4gKi9cblxuaW1wb3J0IGRlZXBGcmVlemUgZnJvbSAnZGVlcC1mcmVlemUnO1xuXG5jb25zdCBsYW5ndWFnZU1hcCA9IHtcbiAgICAnc3VwcG9ydCc6IFtcbiAgICAgICAgJ3poLVRXJyxcbiAgICAgICAgJ2VuLVVTJyxcbiAgICBdLFxuICAgICdkZWZhdWx0JzogJ3poLVRXJyxcbn07XG5cbmRlZXBGcmVlemUoIGxhbmd1YWdlTWFwICk7XG5cbmV4cG9ydCBkZWZhdWx0IGxhbmd1YWdlTWFwO1xuIiwiLyoqXG4gKiBJMThuVXRpbHMgbW9kdWxlLlxuICpcbiAqIEFsbCBgXmRlZmF1bHQqYCBhbmQgYF5nZXQqYCBtZXRob2RzIHNob3VsZCBvbmx5IHJldHVybiBvbmUgb2YgdGhlIGZvbGxvd2luZyB0eXBlczpcbiAqICAgICAtIGBzdHJpbmdgXG4gKiAgICAgLSBgbnVtYmVyYFxuICogICAgIC0gYHVuZGVmaW5lZGBcbiAqIEFsbCBgXmlzKmAgbWV0aG9kcyBzaG91bGQgb25seSByZXR1cm4gYGJvb2xlYW5gLlxuICogQWxsIGBec3VwcG9ydGVkKmAgbWV0aG9kcyBzaG91bGQgcmV0dXJuIGFuIGBhcnJheWAgaGF2aW5nIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogICAgIC0gYGNvbmZpZ3VyYWJsZTogdHJ1ZWBcbiAqICAgICAtIGB3cml0YWJsZTogdHJ1ZWBcbiAqICAgICAtIGBlbnVtZXJhYmxlOiB0cnVlYC5cbiAqXG4gKiBJbiBlYWNoIGZ1bmN0aW9uIGNhbGwgc3RhY2ssXG4gKiBmdW5jdGlvbiBgTGFuZ3VhZ2VVdGlscy5pc1N1cHBvcnRlZExhbmd1YWdlSWRgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBhdCBtb3N0IG9uY2UsXG4gKiBmdW5jdGlvbnMgb3RoZXIgdGhhbiBjYWxsZWQgZnVuY3Rpb24gc2hvdWxkIGFsc28gb25seSBiZSBjYWxsZWQgYXQgbW9zdCBvbmNlLlxuICovXG5cbmltcG9ydCBMYW5ndWFnZVV0aWxzIGZyb20gJy4vbGFuZ3VhZ2UuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJMThuVXRpbHMge1xuICAgIGNvbnN0cnVjdG9yICggb3B0ICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkZWZhdWx0T3B0aW9uID0gbnVsbCxcbiAgICAgICAgICAgIGkxOG4gPSBudWxsLFxuICAgICAgICAgICAgbWFwID0gbnVsbCxcbiAgICAgICAgfSA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoIGRlZmF1bHRPcHRpb24gPT09IG51bGwgfHwgaTE4biA9PT0gbnVsbCB8fCBtYXAgPT09IG51bGwgKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnSW52YWxpZCBhcmd1bWVudHMnICk7XG5cbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gZGVmYXVsdE9wdGlvbjtcbiAgICAgICAgdGhpcy5pMThuID0gaTE4bjtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgfVxuXG4gICAgZGVmYXVsdFZhbHVlICggbGFuZ3VhZ2VJZCA9IExhbmd1YWdlVXRpbHMuZGVmYXVsdExhbmd1YWdlSWQgKSB7XG4gICAgICAgIGlmICggTGFuZ3VhZ2VVdGlscy5pc1N1cHBvcnRlZExhbmd1YWdlSWQoIGxhbmd1YWdlSWQgKSApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pMThuWyBsYW5ndWFnZUlkIF1bIHRoaXMuZGVmYXVsdCBdO1xuICAgIH1cblxuICAgIGdldCBkZWZhdWx0T3B0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdDtcbiAgICB9XG5cbiAgICBnZXQgZGVmYXVsdElkICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmluZGV4T2YoIHRoaXMuZGVmYXVsdCApO1xuICAgIH1cblxuICAgIHN1cHBvcnRlZFZhbHVlcyAoIGxhbmd1YWdlSWQgPSBMYW5ndWFnZVV0aWxzLmRlZmF1bHRMYW5ndWFnZUlkICkge1xuICAgICAgICBpZiAoIExhbmd1YWdlVXRpbHMuaXNTdXBwb3J0ZWRMYW5ndWFnZUlkKCBsYW5ndWFnZUlkICkgKVxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oIHRoaXMubWFwLm1hcCggb3B0aW9uID0+IHRoaXMuaTE4blsgbGFuZ3VhZ2VJZCBdWyBvcHRpb24gXSApICk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBnZXQgc3VwcG9ydGVkT3B0aW9ucyAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKCB0aGlzLm1hcCApO1xuICAgIH1cblxuICAgIGdldCBzdXBwb3J0ZWRJZCAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5tYXAoICgge30sIGluZGV4ICkgPT4gaW5kZXggKTtcbiAgICB9XG5cbiAgICBpc1N1cHBvcnRlZFZhbHVlICggb3B0ICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB2YWx1ZSA9IG51bGwsXG4gICAgICAgICAgICBsYW5ndWFnZUlkID0gbnVsbCxcbiAgICAgICAgfSA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoIHR5cGVvZiAoIHZhbHVlICkgPT09ICdzdHJpbmcnIClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cHBvcnRlZFZhbHVlcyggbGFuZ3VhZ2VJZCApLmluY2x1ZGVzKCB2YWx1ZSApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaXNTdXBwb3J0ZWRPcHRpb24gKCBvcHRpb24gPSBudWxsICkge1xuICAgICAgICBpZiAoIHR5cGVvZiAoIG9wdGlvbiApID09PSAnc3RyaW5nJyApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdXBwb3J0ZWRPcHRpb25zLmluY2x1ZGVzKCBvcHRpb24gKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlzU3VwcG9ydGVkSWQgKCBpZCA9IG51bGwgKSB7XG4gICAgICAgIGlmICggdHlwZW9mICggaWQgKSA9PT0gJ251bWJlcicgKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VwcG9ydGVkSWQuaW5jbHVkZXMoIGlkICk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZUJ5T3B0aW9uICggb3B0ICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBvcHRpb24gPSBudWxsLFxuICAgICAgICAgICAgbGFuZ3VhZ2VJZCA9IG51bGwsXG4gICAgICAgIH0gPSBvcHQgfHwge307XG5cbiAgICAgICAgaWYgKCB0aGlzLmlzU3VwcG9ydGVkT3B0aW9uKCBvcHRpb24gKSAmJiBMYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkTGFuZ3VhZ2VJZCggbGFuZ3VhZ2VJZCApIClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmkxOG5bIGxhbmd1YWdlSWQgXVsgb3B0aW9uIF07XG4gICAgfVxuXG4gICAgZ2V0VmFsdWVCeUlkICggb3B0ICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpZCA9IG51bGwsXG4gICAgICAgICAgICBsYW5ndWFnZUlkID0gbnVsbCxcbiAgICAgICAgfSA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoIHRoaXMuaXNTdXBwb3J0ZWRJZCggaWQgKSAmJiBMYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkTGFuZ3VhZ2VJZCggbGFuZ3VhZ2VJZCApIClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmkxOG5bIGxhbmd1YWdlSWQgXVsgdGhpcy5tYXBbIGlkIF0gXTtcbiAgICB9XG5cbiAgICBnZXRPcHRpb25CeVZhbHVlICggb3B0ICkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB2YWx1ZSA9IG51bGwsXG4gICAgICAgICAgICBsYW5ndWFnZUlkID0gbnVsbCxcbiAgICAgICAgfSA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoIHRoaXMuaXNTdXBwb3J0ZWRWYWx1ZSggb3B0ICkgKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwLmZpbmQoIG9wdGlvbiA9PiB0aGlzLm1hcFsgbGFuZ3VhZ2VJZCBdWyBvcHRpb24gXSA9PT0gdmFsdWUsIHRoaXMgKTtcbiAgICB9XG5cbiAgICBnZXRPcHRpb25CeUlkICggaWQgPSBudWxsICkge1xuICAgICAgICBpZiAoIHRoaXMuaXNTdXBwb3J0ZWRJZCggaWQgKSApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBbIGlkIF07XG4gICAgfVxuXG4gICAgZ2V0SWRCeVZhbHVlICggb3B0ICkge1xuICAgICAgICBpZiAoIHRoaXMuaXNTdXBwb3J0ZWRWYWx1ZSggb3B0ICkgKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwLmluZGV4T2YoIHRoaXMuZ2V0T3B0aW9uQnlWYWx1ZSggb3B0ICkgKTtcbiAgICB9XG5cbiAgICBnZXRJZEJ5T3B0aW9uICggb3B0aW9uID0gbnVsbCApIHtcbiAgICAgICAgaWYgKCB0aGlzLmlzU3VwcG9ydGVkT3B0aW9uKCBvcHRpb24gKSApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXAuaW5kZXhPZiggb3B0aW9uICk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBMYW5ndWFnZVV0aWxzIG1vZHVsZS5cbiAqXG4gKiBBbGwgYF5kZWZhdWx0KmAgYW5kIGBeZ2V0KmAgbWV0aG9kcyBzaG91bGQgb25seSByZXR1cm4gb25lIG9mIHRoZSBmb2xsb3dpbmcgdHlwZXM6XG4gKiAgICAgLSBgc3RyaW5nYFxuICogICAgIC0gYG51bWJlcmBcbiAqICAgICAtIGB1bmRlZmluZWRgXG4gKiBBbGwgYF5pcypgIG1ldGhvZHMgc2hvdWxkIG9ubHkgcmV0dXJuIGBib29sZWFuYC5cbiAqIEFsbCBgXnN1cHBvcnRlZCpgIG1ldGhvZHMgc2hvdWxkIHJldHVybiBhbiBgYXJyYXlgIGhhdmluZyBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqICAgICAtIGBjb25maWd1cmFibGU6IHRydWVgXG4gKiAgICAgLSBgd3JpdGFibGU6IHRydWVgXG4gKiAgICAgLSBgZW51bWVyYWJsZTogdHJ1ZWBcbiAqXG4gKiBJbiBlYWNoIGZ1bmN0aW9uIGNhbGwgc3RhY2ssXG4gKiBmdW5jdGlvbnMgb3RoZXIgdGhhbiBjYWxsZWQgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGF0IG1vc3Qgb25jZS5cbiAqL1xuXG5pbXBvcnQgbGFuZ3VhZ2VNYXAgZnJvbSAnLi4vbWFwcy9sYW5ndWFnZS5qcyc7XG5cbmNsYXNzIExhbmd1YWdlVXRpbHMge1xuICAgIHN0YXRpYyBnZXQgZGVmYXVsdExhbmd1YWdlICgpIHtcbiAgICAgICAgcmV0dXJuIGxhbmd1YWdlTWFwLmRlZmF1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBkZWZhdWx0TGFuZ3VhZ2VJZCAoKSB7XG4gICAgICAgIHJldHVybiBsYW5ndWFnZU1hcC5zdXBwb3J0LmluZGV4T2YoIGxhbmd1YWdlTWFwLmRlZmF1bHQgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IHN1cHBvcnRlZExhbmd1YWdlICgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oIGxhbmd1YWdlTWFwLnN1cHBvcnQgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IHN1cHBvcnRlZExhbmd1YWdlSWQgKCkge1xuICAgICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuc3VwcG9ydC5tYXAoICgge30sIGluZGV4ICkgPT4gaW5kZXggKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNTdXBwb3J0ZWRMYW5ndWFnZSAoIGxhbmd1YWdlID0gbnVsbCApIHtcbiAgICAgICAgaWYgKCB0eXBlb2YgKCBsYW5ndWFnZSApID09PSAnc3RyaW5nJyApXG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuc3VwcG9ydC5pbmNsdWRlcyggbGFuZ3VhZ2UgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc1N1cHBvcnRlZExhbmd1YWdlSWQgKCBsYW5ndWFnZUlkID0gbnVsbCApIHtcbiAgICAgICAgaWYgKCB0eXBlb2YgKCBsYW5ndWFnZUlkICkgPT09ICdudW1iZXInIClcbiAgICAgICAgICAgIHJldHVybiBMYW5ndWFnZVV0aWxzLnN1cHBvcnRlZExhbmd1YWdlSWQuaW5jbHVkZXMoIGxhbmd1YWdlSWQgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRMYW5ndWFnZUlkICggbGFuZ3VhZ2UgPSBudWxsICkge1xuICAgICAgICBpZiAoIExhbmd1YWdlVXRpbHMuaXNTdXBwb3J0ZWRMYW5ndWFnZSggbGFuZ3VhZ2UgKSApXG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuc3VwcG9ydC5pbmRleE9mKCBsYW5ndWFnZSApO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRMYW5ndWFnZUJ5SWQgKCBsYW5ndWFnZUlkID0gbnVsbCApIHtcbiAgICAgICAgaWYgKCBMYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkTGFuZ3VhZ2VJZCggbGFuZ3VhZ2VJZCApIClcbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZU1hcC5zdXBwb3J0WyBsYW5ndWFnZUlkIF07XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMYW5ndWFnZVV0aWxzO1xuIiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJ3ZhbGlkYXRlLmpzJztcblxuY2xhc3MgVmFsaWRhdGVVdGlscyB7XG4gICAgc3RhdGljIGlzVmFsaWREYXRlICggZGF0ZSApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlLmlzRGF0ZSggZGF0ZSApICYmICFOdW1iZXIuaXNOYU4oIE51bWJlciggZGF0ZSApICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzUG9zaXRpdmVJbnRlZ2VyICggbnVtYmVyICkge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUuaXNJbnRlZ2VyKCBudW1iZXIgKSAmJlxuICAgICAgICAgICAgbnVtYmVyID4gMCAmJlxuICAgICAgICAgICAgbnVtYmVyIDw9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc1ZhbGlkSWQgKCBudW1iZXIgKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZS5pc051bWJlciggbnVtYmVyICkgJiZcbiAgICAgICAgICAgIG51bWJlciA+PSAwICYmXG4gICAgICAgICAgICBudW1iZXIgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzRG9tRWxlbWVudCAoIGVsZW1lbnQgKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZS5pc0RvbUVsZW1lbnQoIGVsZW1lbnQgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNWYWxpZFN0cmluZyAoIHN0ciApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlLmlzU3RyaW5nKCBzdHIgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNWYWxpZEJvb2xlYW4gKCBib29sICkge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUuaXNJbnRlZ2VyKCBib29sICkgJiZcbiAgICAgICAgICAgICggYm9vbCA9PT0gMCB8fCBib29sID09PSAxICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzVmFsaWRBcnJheSAoIGFyciApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlLmlzQXJyYXkoIGFyciApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVmFsaWRhdGVVdGlscztcbiIsImltcG9ydCBMYW5ndWFnZVV0aWxzIGZyb20gJy4uLy4uL2NvbW1vbi91dGlscy9sYW5ndWFnZS5qcyc7XG5pbXBvcnQgZGVlcEZyZWV6ZSBmcm9tICdkZWVwLWZyZWV6ZSc7XG5cbmNvbnN0IG1hcCA9IFtcbiAgICAnYmFjaGVsb3InLFxuICAgICdtYXN0ZXInLFxuICAgICdwaGQnLFxuXTtcblxuY29uc3QgZGVmYXVsdE9wdGlvbiA9ICdiYWNoZWxvcic7XG5cbmNvbnN0IGkxOG4gPSB7XG4gICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdOiB7XG4gICAgICAgIGJhY2hlbG9yOiAnYmFjaGVsb3InLFxuICAgICAgICBtYXN0ZXI6ICAgJ21hc3RlcicsXG4gICAgICAgIHBoZDogICAgICAncGhkJyxcbiAgICB9LFxuICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXToge1xuICAgICAgICBiYWNoZWxvcjogJ+WtuOWjqycsXG4gICAgICAgIG1hc3RlcjogICAn56Kp5aOrJyxcbiAgICAgICAgcGhkOiAgICAgICfljZrlo6snLFxuICAgIH0sXG59O1xuXG5kZWVwRnJlZXplKCBpMThuICk7XG5kZWVwRnJlZXplKCBtYXAgKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGRlZmF1bHRPcHRpb24sXG4gICAgaTE4bixcbiAgICBtYXAsXG59O1xuXG5leHBvcnQge1xuICAgIGRlZmF1bHRPcHRpb24sXG4gICAgaTE4bixcbiAgICBtYXAsXG59O1xuIiwiaW1wb3J0IExhbmd1YWdlVXRpbHMgZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzL2xhbmd1YWdlLmpzJztcbmltcG9ydCBkZWVwRnJlZXplIGZyb20gJ2RlZXAtZnJlZXplJztcblxuLyoqXG4gKiBgbWFwYCBzaG91bGQgZm9sbG93aW5nIElTTyAzMTY2LTEuXG4gKi9cblxuY29uc3QgbWFwID0gW1xuICAgICd0dycsXG4gICAgJ3VzJyxcbiAgICAnY24nLFxuICAgICdnYicsXG4gICAgJ2pwJyxcbiAgICAnZGUnLFxuICAgICdhdScsXG5dO1xuXG5jb25zdCBkZWZhdWx0T3B0aW9uID0gJ3R3JztcblxuY29uc3QgaTE4biA9IHtcbiAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IHtcbiAgICAgICAgdHc6ICdUYWl3YW4nLFxuICAgICAgICB1czogJ1VTQScsXG4gICAgICAgIGNuOiAnQ2hpbmEnLFxuICAgICAgICBnYjogJ1VLJyxcbiAgICAgICAganA6ICdKYXBhbicsXG4gICAgICAgIGRlOiAnR2VybWFueScsXG4gICAgICAgIGF1OiAnQXVzdHJhbGlhJyxcbiAgICB9LFxuICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXToge1xuICAgICAgICB0dzogJ+iHuueBoycsXG4gICAgICAgIHVzOiAn576O5ZyLJyxcbiAgICAgICAgY246ICfkuK3lnIsnLFxuICAgICAgICBnYjogJ+iLseWciycsXG4gICAgICAgIGpwOiAn5pel5pysJyxcbiAgICAgICAgZGU6ICflvrflnIsnLFxuICAgICAgICBhdTogJ+a+s+a0sicsXG4gICAgfSxcbn07XG5cbmRlZXBGcmVlemUoIGkxOG4gKTtcbmRlZXBGcmVlemUoIG1hcCApO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZGVmYXVsdE9wdGlvbixcbiAgICBpMThuLFxuICAgIG1hcCxcbn07XG5cbmV4cG9ydCB7XG4gICAgZGVmYXVsdE9wdGlvbixcbiAgICBpMThuLFxuICAgIG1hcCxcbn07XG4iLCJpbXBvcnQgSTE4blV0aWxzIGZyb20gJy4uLy4uL2NvbW1vbi91dGlscy9pMThuLmpzJztcbmltcG9ydCB7IGRlZmF1bHRPcHRpb24sIGkxOG4sIG1hcCwgfSBmcm9tICcuLi9tYXBzL2RlZ3JlZS5qcyc7XG5cbmV4cG9ydCBjb25zdCBkZWdyZWVVdGlscyA9IG5ldyBJMThuVXRpbHMoIHtcbiAgICBkZWZhdWx0T3B0aW9uLFxuICAgIGkxOG4sXG4gICAgbWFwLFxufSApO1xuXG5leHBvcnQgZGVmYXVsdCBkZWdyZWVVdGlscztcbiIsImltcG9ydCBJMThuVXRpbHMgZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzL2kxOG4uanMnO1xuaW1wb3J0IHsgZGVmYXVsdE9wdGlvbiwgaTE4biwgbWFwLCB9IGZyb20gJy4uL21hcHMvbmF0aW9uLmpzJztcblxuZXhwb3J0IGNvbnN0IG5hdGlvblV0aWxzID0gbmV3IEkxOG5VdGlscygge1xuICAgIGRlZmF1bHRPcHRpb24sXG4gICAgaTE4bixcbiAgICBtYXAsXG59ICk7XG5cbmV4cG9ydCBkZWZhdWx0IG5hdGlvblV0aWxzO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWVwRnJlZXplIChvKSB7XG4gIE9iamVjdC5mcmVlemUobyk7XG5cbiAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobykuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgIGlmIChvLmhhc093blByb3BlcnR5KHByb3ApXG4gICAgJiYgb1twcm9wXSAhPT0gbnVsbFxuICAgICYmICh0eXBlb2Ygb1twcm9wXSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb1twcm9wXSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICYmICFPYmplY3QuaXNGcm96ZW4ob1twcm9wXSkpIHtcbiAgICAgIGRlZXBGcmVlemUob1twcm9wXSk7XG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiBvO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHB1Z19oYXNfb3duX3Byb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBNZXJnZSB0d28gYXR0cmlidXRlIG9iamVjdHMgZ2l2aW5nIHByZWNlZGVuY2VcbiAqIHRvIHZhbHVlcyBpbiBvYmplY3QgYGJgLiBDbGFzc2VzIGFyZSBzcGVjaWFsLWNhc2VkXG4gKiBhbGxvd2luZyBmb3IgYXJyYXlzIGFuZCBtZXJnaW5nL2pvaW5pbmcgYXBwcm9wcmlhdGVseVxuICogcmVzdWx0aW5nIGluIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICogQHJldHVybiB7T2JqZWN0fSBhXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLm1lcmdlID0gcHVnX21lcmdlO1xuZnVuY3Rpb24gcHVnX21lcmdlKGEsIGIpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICB2YXIgYXR0cnMgPSBhWzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgYXR0cnMgPSBwdWdfbWVyZ2UoYXR0cnMsIGFbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXR0cnM7XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcbiAgICAgIHZhciB2YWxBID0gYVtrZXldIHx8IFtdO1xuICAgICAgYVtrZXldID0gKEFycmF5LmlzQXJyYXkodmFsQSkgPyB2YWxBIDogW3ZhbEFdKS5jb25jYXQoYltrZXldIHx8IFtdKTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgdmFyIHZhbEEgPSBwdWdfc3R5bGUoYVtrZXldKTtcbiAgICAgIHZhbEEgPSB2YWxBICYmIHZhbEFbdmFsQS5sZW5ndGggLSAxXSAhPT0gJzsnID8gdmFsQSArICc7JyA6IHZhbEE7XG4gICAgICB2YXIgdmFsQiA9IHB1Z19zdHlsZShiW2tleV0pO1xuICAgICAgdmFsQiA9IHZhbEIgJiYgdmFsQlt2YWxCLmxlbmd0aCAtIDFdICE9PSAnOycgPyB2YWxCICsgJzsnIDogdmFsQjtcbiAgICAgIGFba2V5XSA9IHZhbEEgKyB2YWxCO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGE7XG59O1xuXG4vKipcbiAqIFByb2Nlc3MgYXJyYXksIG9iamVjdCwgb3Igc3RyaW5nIGFzIGEgc3RyaW5nIG9mIGNsYXNzZXMgZGVsaW1pdGVkIGJ5IGEgc3BhY2UuXG4gKlxuICogSWYgYHZhbGAgaXMgYW4gYXJyYXksIGFsbCBtZW1iZXJzIG9mIGl0IGFuZCBpdHMgc3ViYXJyYXlzIGFyZSBjb3VudGVkIGFzXG4gKiBjbGFzc2VzLiBJZiBgZXNjYXBpbmdgIGlzIGFuIGFycmF5LCB0aGVuIHdoZXRoZXIgb3Igbm90IHRoZSBpdGVtIGluIGB2YWxgIGlzXG4gKiBlc2NhcGVkIGRlcGVuZHMgb24gdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiBgZXNjYXBpbmdgLiBJZiBgZXNjYXBpbmdgIGlzXG4gKiBub3QgYW4gYXJyYXksIG5vIGVzY2FwaW5nIGlzIGRvbmUuXG4gKlxuICogSWYgYHZhbGAgaXMgYW4gb2JqZWN0LCBhbGwgdGhlIGtleXMgd2hvc2UgdmFsdWUgaXMgdHJ1dGh5IGFyZSBjb3VudGVkIGFzXG4gKiBjbGFzc2VzLiBObyBlc2NhcGluZyBpcyBkb25lLlxuICpcbiAqIElmIGB2YWxgIGlzIGEgc3RyaW5nLCBpdCBpcyBjb3VudGVkIGFzIGEgY2xhc3MuIE5vIGVzY2FwaW5nIGlzIGRvbmUuXG4gKlxuICogQHBhcmFtIHsoQXJyYXkuPHN0cmluZz58T2JqZWN0LjxzdHJpbmcsIGJvb2xlYW4+fHN0cmluZyl9IHZhbFxuICogQHBhcmFtIHs/QXJyYXkuPHN0cmluZz59IGVzY2FwaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuY2xhc3NlcyA9IHB1Z19jbGFzc2VzO1xuZnVuY3Rpb24gcHVnX2NsYXNzZXNfYXJyYXkodmFsLCBlc2NhcGluZykge1xuICB2YXIgY2xhc3NTdHJpbmcgPSAnJywgY2xhc3NOYW1lLCBwYWRkaW5nID0gJycsIGVzY2FwZUVuYWJsZWQgPSBBcnJheS5pc0FycmF5KGVzY2FwaW5nKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHtcbiAgICBjbGFzc05hbWUgPSBwdWdfY2xhc3Nlcyh2YWxbaV0pO1xuICAgIGlmICghY2xhc3NOYW1lKSBjb250aW51ZTtcbiAgICBlc2NhcGVFbmFibGVkICYmIGVzY2FwaW5nW2ldICYmIChjbGFzc05hbWUgPSBwdWdfZXNjYXBlKGNsYXNzTmFtZSkpO1xuICAgIGNsYXNzU3RyaW5nID0gY2xhc3NTdHJpbmcgKyBwYWRkaW5nICsgY2xhc3NOYW1lO1xuICAgIHBhZGRpbmcgPSAnICc7XG4gIH1cbiAgcmV0dXJuIGNsYXNzU3RyaW5nO1xufVxuZnVuY3Rpb24gcHVnX2NsYXNzZXNfb2JqZWN0KHZhbCkge1xuICB2YXIgY2xhc3NTdHJpbmcgPSAnJywgcGFkZGluZyA9ICcnO1xuICBmb3IgKHZhciBrZXkgaW4gdmFsKSB7XG4gICAgaWYgKGtleSAmJiB2YWxba2V5XSAmJiBwdWdfaGFzX293bl9wcm9wZXJ0eS5jYWxsKHZhbCwga2V5KSkge1xuICAgICAgY2xhc3NTdHJpbmcgPSBjbGFzc1N0cmluZyArIHBhZGRpbmcgKyBrZXk7XG4gICAgICBwYWRkaW5nID0gJyAnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2xhc3NTdHJpbmc7XG59XG5mdW5jdGlvbiBwdWdfY2xhc3Nlcyh2YWwsIGVzY2FwaW5nKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICByZXR1cm4gcHVnX2NsYXNzZXNfYXJyYXkodmFsLCBlc2NhcGluZyk7XG4gIH0gZWxzZSBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHB1Z19jbGFzc2VzX29iamVjdCh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWwgfHwgJyc7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IG9iamVjdCBvciBzdHJpbmcgdG8gYSBzdHJpbmcgb2YgQ1NTIHN0eWxlcyBkZWxpbWl0ZWQgYnkgYSBzZW1pY29sb24uXG4gKlxuICogQHBhcmFtIHsoT2JqZWN0LjxzdHJpbmcsIHN0cmluZz58c3RyaW5nKX0gdmFsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZXhwb3J0cy5zdHlsZSA9IHB1Z19zdHlsZTtcbmZ1bmN0aW9uIHB1Z19zdHlsZSh2YWwpIHtcbiAgaWYgKCF2YWwpIHJldHVybiAnJztcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIG91dCA9ICcnO1xuICAgIGZvciAodmFyIHN0eWxlIGluIHZhbCkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmIChwdWdfaGFzX293bl9wcm9wZXJ0eS5jYWxsKHZhbCwgc3R5bGUpKSB7XG4gICAgICAgIG91dCA9IG91dCArIHN0eWxlICsgJzonICsgdmFsW3N0eWxlXSArICc7JztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsICsgJyc7XG4gIH1cbn07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBlc2NhcGVkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHRlcnNlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuYXR0ciA9IHB1Z19hdHRyO1xuZnVuY3Rpb24gcHVnX2F0dHIoa2V5LCB2YWwsIGVzY2FwZWQsIHRlcnNlKSB7XG4gIGlmICh2YWwgPT09IGZhbHNlIHx8IHZhbCA9PSBudWxsIHx8ICF2YWwgJiYgKGtleSA9PT0gJ2NsYXNzJyB8fCBrZXkgPT09ICdzdHlsZScpKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICByZXR1cm4gJyAnICsgKHRlcnNlID8ga2V5IDoga2V5ICsgJz1cIicgKyBrZXkgKyAnXCInKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbC50b0pTT04gPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YWwgPSB2YWwudG9KU09OKCk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gSlNPTi5zdHJpbmdpZnkodmFsKTtcbiAgICBpZiAoIWVzY2FwZWQgJiYgdmFsLmluZGV4T2YoJ1wiJykgIT09IC0xKSB7XG4gICAgICByZXR1cm4gJyAnICsga2V5ICsgJz1cXCcnICsgdmFsLnJlcGxhY2UoLycvZywgJyYjMzk7JykgKyAnXFwnJztcbiAgICB9XG4gIH1cbiAgaWYgKGVzY2FwZWQpIHZhbCA9IHB1Z19lc2NhcGUodmFsKTtcbiAgcmV0dXJuICcgJyArIGtleSArICc9XCInICsgdmFsICsgJ1wiJztcbn07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBhdHRyaWJ1dGVzIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge09iamVjdH0gdGVyc2Ugd2hldGhlciB0byB1c2UgSFRNTDUgdGVyc2UgYm9vbGVhbiBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuYXR0cnMgPSBwdWdfYXR0cnM7XG5mdW5jdGlvbiBwdWdfYXR0cnMob2JqLCB0ZXJzZSl7XG4gIHZhciBhdHRycyA9ICcnO1xuXG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAocHVnX2hhc19vd25fcHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIHZhciB2YWwgPSBvYmpba2V5XTtcblxuICAgICAgaWYgKCdjbGFzcycgPT09IGtleSkge1xuICAgICAgICB2YWwgPSBwdWdfY2xhc3Nlcyh2YWwpO1xuICAgICAgICBhdHRycyA9IHB1Z19hdHRyKGtleSwgdmFsLCBmYWxzZSwgdGVyc2UpICsgYXR0cnM7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCdzdHlsZScgPT09IGtleSkge1xuICAgICAgICB2YWwgPSBwdWdfc3R5bGUodmFsKTtcbiAgICAgIH1cbiAgICAgIGF0dHJzICs9IHB1Z19hdHRyKGtleSwgdmFsLCBmYWxzZSwgdGVyc2UpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhdHRycztcbn07XG5cbi8qKlxuICogRXNjYXBlIHRoZSBnaXZlbiBzdHJpbmcgb2YgYGh0bWxgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG52YXIgcHVnX21hdGNoX2h0bWwgPSAvW1wiJjw+XS87XG5leHBvcnRzLmVzY2FwZSA9IHB1Z19lc2NhcGU7XG5mdW5jdGlvbiBwdWdfZXNjYXBlKF9odG1sKXtcbiAgdmFyIGh0bWwgPSAnJyArIF9odG1sO1xuICB2YXIgcmVnZXhSZXN1bHQgPSBwdWdfbWF0Y2hfaHRtbC5leGVjKGh0bWwpO1xuICBpZiAoIXJlZ2V4UmVzdWx0KSByZXR1cm4gX2h0bWw7XG5cbiAgdmFyIHJlc3VsdCA9ICcnO1xuICB2YXIgaSwgbGFzdEluZGV4LCBlc2NhcGU7XG4gIGZvciAoaSA9IHJlZ2V4UmVzdWx0LmluZGV4LCBsYXN0SW5kZXggPSAwOyBpIDwgaHRtbC5sZW5ndGg7IGkrKykge1xuICAgIHN3aXRjaCAoaHRtbC5jaGFyQ29kZUF0KGkpKSB7XG4gICAgICBjYXNlIDM0OiBlc2NhcGUgPSAnJnF1b3Q7JzsgYnJlYWs7XG4gICAgICBjYXNlIDM4OiBlc2NhcGUgPSAnJmFtcDsnOyBicmVhaztcbiAgICAgIGNhc2UgNjA6IGVzY2FwZSA9ICcmbHQ7JzsgYnJlYWs7XG4gICAgICBjYXNlIDYyOiBlc2NhcGUgPSAnJmd0Oyc7IGJyZWFrO1xuICAgICAgZGVmYXVsdDogY29udGludWU7XG4gICAgfVxuICAgIGlmIChsYXN0SW5kZXggIT09IGkpIHJlc3VsdCArPSBodG1sLnN1YnN0cmluZyhsYXN0SW5kZXgsIGkpO1xuICAgIGxhc3RJbmRleCA9IGkgKyAxO1xuICAgIHJlc3VsdCArPSBlc2NhcGU7XG4gIH1cbiAgaWYgKGxhc3RJbmRleCAhPT0gaSkgcmV0dXJuIHJlc3VsdCArIGh0bWwuc3Vic3RyaW5nKGxhc3RJbmRleCwgaSk7XG4gIGVsc2UgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogUmUtdGhyb3cgdGhlIGdpdmVuIGBlcnJgIGluIGNvbnRleHQgdG8gdGhlXG4gKiB0aGUgcHVnIGluIGBmaWxlbmFtZWAgYXQgdGhlIGdpdmVuIGBsaW5lbm9gLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZW5vXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIG9yaWdpbmFsIHNvdXJjZVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5yZXRocm93ID0gcHVnX3JldGhyb3c7XG5mdW5jdGlvbiBwdWdfcmV0aHJvdyhlcnIsIGZpbGVuYW1lLCBsaW5lbm8sIHN0cil7XG4gIGlmICghKGVyciBpbnN0YW5jZW9mIEVycm9yKSkgdGhyb3cgZXJyO1xuICBpZiAoKHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgfHwgIWZpbGVuYW1lKSAmJiAhc3RyKSB7XG4gICAgZXJyLm1lc3NhZ2UgKz0gJyBvbiBsaW5lICcgKyBsaW5lbm87XG4gICAgdGhyb3cgZXJyO1xuICB9XG4gIHRyeSB7XG4gICAgc3RyID0gc3RyIHx8IHJlcXVpcmUoJ2ZzJykucmVhZEZpbGVTeW5jKGZpbGVuYW1lLCAndXRmOCcpXG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgcHVnX3JldGhyb3coZXJyLCBudWxsLCBsaW5lbm8pXG4gIH1cbiAgdmFyIGNvbnRleHQgPSAzXG4gICAgLCBsaW5lcyA9IHN0ci5zcGxpdCgnXFxuJylcbiAgICAsIHN0YXJ0ID0gTWF0aC5tYXgobGluZW5vIC0gY29udGV4dCwgMClcbiAgICAsIGVuZCA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgbGluZW5vICsgY29udGV4dCk7XG5cbiAgLy8gRXJyb3IgY29udGV4dFxuICB2YXIgY29udGV4dCA9IGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLm1hcChmdW5jdGlvbihsaW5lLCBpKXtcbiAgICB2YXIgY3VyciA9IGkgKyBzdGFydCArIDE7XG4gICAgcmV0dXJuIChjdXJyID09IGxpbmVubyA/ICcgID4gJyA6ICcgICAgJylcbiAgICAgICsgY3VyclxuICAgICAgKyAnfCAnXG4gICAgICArIGxpbmU7XG4gIH0pLmpvaW4oJ1xcbicpO1xuXG4gIC8vIEFsdGVyIGV4Y2VwdGlvbiBtZXNzYWdlXG4gIGVyci5wYXRoID0gZmlsZW5hbWU7XG4gIGVyci5tZXNzYWdlID0gKGZpbGVuYW1lIHx8ICdQdWcnKSArICc6JyArIGxpbmVub1xuICAgICsgJ1xcbicgKyBjb250ZXh0ICsgJ1xcblxcbicgKyBlcnIubWVzc2FnZTtcbiAgdGhyb3cgZXJyO1xufTtcbiIsIi8qIVxuICogdmFsaWRhdGUuanMgMC4xMy4xXG4gKlxuICogKGMpIDIwMTMtMjAxOSBOaWNrbGFzIEFuc21hbiwgMjAxMyBXcmFwcFxuICogVmFsaWRhdGUuanMgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4gKiBodHRwOi8vdmFsaWRhdGVqcy5vcmcvXG4gKi9cblxuKGZ1bmN0aW9uKGV4cG9ydHMsIG1vZHVsZSwgZGVmaW5lKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIFRoZSBtYWluIGZ1bmN0aW9uIHRoYXQgY2FsbHMgdGhlIHZhbGlkYXRvcnMgc3BlY2lmaWVkIGJ5IHRoZSBjb25zdHJhaW50cy5cbiAgLy8gVGhlIG9wdGlvbnMgYXJlIHRoZSBmb2xsb3dpbmc6XG4gIC8vICAgLSBmb3JtYXQgKHN0cmluZykgLSBBbiBvcHRpb24gdGhhdCBjb250cm9scyBob3cgdGhlIHJldHVybmVkIHZhbHVlIGlzIGZvcm1hdHRlZFxuICAvLyAgICAgKiBmbGF0IC0gUmV0dXJucyBhIGZsYXQgYXJyYXkgb2YganVzdCB0aGUgZXJyb3IgbWVzc2FnZXNcbiAgLy8gICAgICogZ3JvdXBlZCAtIFJldHVybnMgdGhlIG1lc3NhZ2VzIGdyb3VwZWQgYnkgYXR0cmlidXRlIChkZWZhdWx0KVxuICAvLyAgICAgKiBkZXRhaWxlZCAtIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHJhdyB2YWxpZGF0aW9uIGRhdGFcbiAgLy8gICAtIGZ1bGxNZXNzYWdlcyAoYm9vbGVhbikgLSBJZiBgdHJ1ZWAgKGRlZmF1bHQpIHRoZSBhdHRyaWJ1dGUgbmFtZSBpcyBwcmVwZW5kZWQgdG8gdGhlIGVycm9yLlxuICAvL1xuICAvLyBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBvcHRpb25zIGFyZSBhbHNvIHBhc3NlZCB0byBlYWNoIHZhbGlkYXRvci5cbiAgdmFyIHZhbGlkYXRlID0gZnVuY3Rpb24oYXR0cmlidXRlcywgY29uc3RyYWludHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHYub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICB2YXIgcmVzdWx0cyA9IHYucnVuVmFsaWRhdGlvbnMoYXR0cmlidXRlcywgY29uc3RyYWludHMsIG9wdGlvbnMpXG4gICAgICAsIGF0dHJcbiAgICAgICwgdmFsaWRhdG9yO1xuXG4gICAgaWYgKHJlc3VsdHMuc29tZShmdW5jdGlvbihyKSB7IHJldHVybiB2LmlzUHJvbWlzZShyLmVycm9yKTsgfSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZSB2YWxpZGF0ZS5hc3luYyBpZiB5b3Ugd2FudCBzdXBwb3J0IGZvciBwcm9taXNlc1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRlLnByb2Nlc3NWYWxpZGF0aW9uUmVzdWx0cyhyZXN1bHRzLCBvcHRpb25zKTtcbiAgfTtcblxuICB2YXIgdiA9IHZhbGlkYXRlO1xuXG4gIC8vIENvcGllcyBvdmVyIGF0dHJpYnV0ZXMgZnJvbSBvbmUgb3IgbW9yZSBzb3VyY2VzIHRvIGEgc2luZ2xlIGRlc3RpbmF0aW9uLlxuICAvLyBWZXJ5IG11Y2ggc2ltaWxhciB0byB1bmRlcnNjb3JlJ3MgZXh0ZW5kLlxuICAvLyBUaGUgZmlyc3QgYXJndW1lbnQgaXMgdGhlIHRhcmdldCBvYmplY3QgYW5kIHRoZSByZW1haW5pbmcgYXJndW1lbnRzIHdpbGwgYmVcbiAgLy8gdXNlZCBhcyBzb3VyY2VzLlxuICB2LmV4dGVuZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKS5mb3JFYWNoKGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgICAgZm9yICh2YXIgYXR0ciBpbiBzb3VyY2UpIHtcbiAgICAgICAgb2JqW2F0dHJdID0gc291cmNlW2F0dHJdO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgdi5leHRlbmQodmFsaWRhdGUsIHtcbiAgICAvLyBUaGlzIGlzIHRoZSB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5IGFzIGEgc2VtdmVyLlxuICAgIC8vIFRoZSB0b1N0cmluZyBmdW5jdGlvbiB3aWxsIGFsbG93IGl0IHRvIGJlIGNvZXJjZWQgaW50byBhIHN0cmluZ1xuICAgIHZlcnNpb246IHtcbiAgICAgIG1ham9yOiAwLFxuICAgICAgbWlub3I6IDEzLFxuICAgICAgcGF0Y2g6IDEsXG4gICAgICBtZXRhZGF0YTogbnVsbCxcbiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZlcnNpb24gPSB2LmZvcm1hdChcIiV7bWFqb3J9LiV7bWlub3J9LiV7cGF0Y2h9XCIsIHYudmVyc2lvbik7XG4gICAgICAgIGlmICghdi5pc0VtcHR5KHYudmVyc2lvbi5tZXRhZGF0YSkpIHtcbiAgICAgICAgICB2ZXJzaW9uICs9IFwiK1wiICsgdi52ZXJzaW9uLm1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2ZXJzaW9uO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBCZWxvdyBpcyB0aGUgZGVwZW5kZW5jaWVzIHRoYXQgYXJlIHVzZWQgaW4gdmFsaWRhdGUuanNcblxuICAgIC8vIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgUHJvbWlzZSBpbXBsZW1lbnRhdGlvbi5cbiAgICAvLyBJZiB5b3UgYXJlIHVzaW5nIFEuanMsIFJTVlAgb3IgYW55IG90aGVyIEErIGNvbXBhdGlibGUgaW1wbGVtZW50YXRpb25cbiAgICAvLyBvdmVycmlkZSB0aGlzIGF0dHJpYnV0ZSB0byBiZSB0aGUgY29uc3RydWN0b3Igb2YgdGhhdCBwcm9taXNlLlxuICAgIC8vIFNpbmNlIGpRdWVyeSBwcm9taXNlcyBhcmVuJ3QgQSsgY29tcGF0aWJsZSB0aGV5IHdvbid0IHdvcmsuXG4gICAgUHJvbWlzZTogdHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgPyBQcm9taXNlIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gbnVsbCxcblxuICAgIEVNUFRZX1NUUklOR19SRUdFWFA6IC9eXFxzKiQvLFxuXG4gICAgLy8gUnVucyB0aGUgdmFsaWRhdG9ycyBzcGVjaWZpZWQgYnkgdGhlIGNvbnN0cmFpbnRzIG9iamVjdC5cbiAgICAvLyBXaWxsIHJldHVybiBhbiBhcnJheSBvZiB0aGUgZm9ybWF0OlxuICAgIC8vICAgICBbe2F0dHJpYnV0ZTogXCI8YXR0cmlidXRlIG5hbWU+XCIsIGVycm9yOiBcIjx2YWxpZGF0aW9uIHJlc3VsdD5cIn0sIC4uLl1cbiAgICBydW5WYWxpZGF0aW9uczogZnVuY3Rpb24oYXR0cmlidXRlcywgY29uc3RyYWludHMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZXN1bHRzID0gW11cbiAgICAgICAgLCBhdHRyXG4gICAgICAgICwgdmFsaWRhdG9yTmFtZVxuICAgICAgICAsIHZhbHVlXG4gICAgICAgICwgdmFsaWRhdG9yc1xuICAgICAgICAsIHZhbGlkYXRvclxuICAgICAgICAsIHZhbGlkYXRvck9wdGlvbnNcbiAgICAgICAgLCBlcnJvcjtcblxuICAgICAgaWYgKHYuaXNEb21FbGVtZW50KGF0dHJpYnV0ZXMpIHx8IHYuaXNKcXVlcnlFbGVtZW50KGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB2LmNvbGxlY3RGb3JtVmFsdWVzKGF0dHJpYnV0ZXMpO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wcyB0aHJvdWdoIGVhY2ggY29uc3RyYWludHMsIGZpbmRzIHRoZSBjb3JyZWN0IHZhbGlkYXRvciBhbmQgcnVuIGl0LlxuICAgICAgZm9yIChhdHRyIGluIGNvbnN0cmFpbnRzKSB7XG4gICAgICAgIHZhbHVlID0gdi5nZXREZWVwT2JqZWN0VmFsdWUoYXR0cmlidXRlcywgYXR0cik7XG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBjb25zdHJhaW50cyBmb3IgYW4gYXR0cmlidXRlIHRvIGJlIGEgZnVuY3Rpb24uXG4gICAgICAgIC8vIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSB2YWx1ZSwgYXR0cmlidXRlIG5hbWUsIHRoZSBjb21wbGV0ZSBkaWN0IG9mXG4gICAgICAgIC8vIGF0dHJpYnV0ZXMgYXMgd2VsbCBhcyB0aGUgb3B0aW9ucyBhbmQgY29uc3RyYWludHMgcGFzc2VkIGluLlxuICAgICAgICAvLyBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGhhdmUgZGlmZmVyZW50XG4gICAgICAgIC8vIHZhbGlkYXRpb25zIGRlcGVuZGluZyBvbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgICAgICB2YWxpZGF0b3JzID0gdi5yZXN1bHQoY29uc3RyYWludHNbYXR0cl0sIHZhbHVlLCBhdHRyaWJ1dGVzLCBhdHRyLCBvcHRpb25zLCBjb25zdHJhaW50cyk7XG5cbiAgICAgICAgZm9yICh2YWxpZGF0b3JOYW1lIGluIHZhbGlkYXRvcnMpIHtcbiAgICAgICAgICB2YWxpZGF0b3IgPSB2LnZhbGlkYXRvcnNbdmFsaWRhdG9yTmFtZV07XG5cbiAgICAgICAgICBpZiAoIXZhbGlkYXRvcikge1xuICAgICAgICAgICAgZXJyb3IgPSB2LmZvcm1hdChcIlVua25vd24gdmFsaWRhdG9yICV7bmFtZX1cIiwge25hbWU6IHZhbGlkYXRvck5hbWV9KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFsaWRhdG9yT3B0aW9ucyA9IHZhbGlkYXRvcnNbdmFsaWRhdG9yTmFtZV07XG4gICAgICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIG9wdGlvbnMgdG8gYmUgYSBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHdpbGwgYmVcbiAgICAgICAgICAvLyBjYWxsZWQgd2l0aCB0aGUgdmFsdWUsIGF0dHJpYnV0ZSBuYW1lLCB0aGUgY29tcGxldGUgZGljdCBvZlxuICAgICAgICAgIC8vIGF0dHJpYnV0ZXMgYXMgd2VsbCBhcyB0aGUgb3B0aW9ucyBhbmQgY29uc3RyYWludHMgcGFzc2VkIGluLlxuICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8gaGF2ZSBkaWZmZXJlbnRcbiAgICAgICAgICAvLyB2YWxpZGF0aW9ucyBkZXBlbmRpbmcgb24gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgICAgICB2YWxpZGF0b3JPcHRpb25zID0gdi5yZXN1bHQodmFsaWRhdG9yT3B0aW9ucywgdmFsdWUsIGF0dHJpYnV0ZXMsIGF0dHIsIG9wdGlvbnMsIGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICBpZiAoIXZhbGlkYXRvck9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgYXR0cmlidXRlOiBhdHRyLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0b3JOYW1lLFxuICAgICAgICAgICAgZ2xvYmFsT3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBvcHRpb25zOiB2YWxpZGF0b3JPcHRpb25zLFxuICAgICAgICAgICAgZXJyb3I6IHZhbGlkYXRvci5jYWxsKHZhbGlkYXRvcixcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3JPcHRpb25zLFxuICAgICAgICAgICAgICAgIGF0dHIsXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICBvcHRpb25zKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG5cbiAgICAvLyBUYWtlcyB0aGUgb3V0cHV0IGZyb20gcnVuVmFsaWRhdGlvbnMgYW5kIGNvbnZlcnRzIGl0IHRvIHRoZSBjb3JyZWN0XG4gICAgLy8gb3V0cHV0IGZvcm1hdC5cbiAgICBwcm9jZXNzVmFsaWRhdGlvblJlc3VsdHM6IGZ1bmN0aW9uKGVycm9ycywgb3B0aW9ucykge1xuICAgICAgZXJyb3JzID0gdi5wcnVuZUVtcHR5RXJyb3JzKGVycm9ycywgb3B0aW9ucyk7XG4gICAgICBlcnJvcnMgPSB2LmV4cGFuZE11bHRpcGxlRXJyb3JzKGVycm9ycywgb3B0aW9ucyk7XG4gICAgICBlcnJvcnMgPSB2LmNvbnZlcnRFcnJvck1lc3NhZ2VzKGVycm9ycywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBcImdyb3VwZWRcIjtcblxuICAgICAgaWYgKHR5cGVvZiB2LmZvcm1hdHRlcnNbZm9ybWF0XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlcnJvcnMgPSB2LmZvcm1hdHRlcnNbZm9ybWF0XShlcnJvcnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHYuZm9ybWF0KFwiVW5rbm93biBmb3JtYXQgJXtmb3JtYXR9XCIsIG9wdGlvbnMpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHYuaXNFbXB0eShlcnJvcnMpID8gdW5kZWZpbmVkIDogZXJyb3JzO1xuICAgIH0sXG5cbiAgICAvLyBSdW5zIHRoZSB2YWxpZGF0aW9ucyB3aXRoIHN1cHBvcnQgZm9yIHByb21pc2VzLlxuICAgIC8vIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYSBwcm9taXNlIHRoYXQgaXMgc2V0dGxlZCB3aGVuIGFsbCB0aGVcbiAgICAvLyB2YWxpZGF0aW9uIHByb21pc2VzIGhhdmUgYmVlbiBjb21wbGV0ZWQuXG4gICAgLy8gSXQgY2FuIGJlIGNhbGxlZCBldmVuIGlmIG5vIHZhbGlkYXRpb25zIHJldHVybmVkIGEgcHJvbWlzZS5cbiAgICBhc3luYzogZnVuY3Rpb24oYXR0cmlidXRlcywgY29uc3RyYWludHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdi5hc3luYy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgdmFyIFdyYXBFcnJvcnMgPSBvcHRpb25zLndyYXBFcnJvcnMgfHwgZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgICB9O1xuXG4gICAgICAvLyBSZW1vdmVzIHVua25vd24gYXR0cmlidXRlc1xuICAgICAgaWYgKG9wdGlvbnMuY2xlYW5BdHRyaWJ1dGVzICE9PSBmYWxzZSkge1xuICAgICAgICBhdHRyaWJ1dGVzID0gdi5jbGVhbkF0dHJpYnV0ZXMoYXR0cmlidXRlcywgY29uc3RyYWludHMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0cyA9IHYucnVuVmFsaWRhdGlvbnMoYXR0cmlidXRlcywgY29uc3RyYWludHMsIG9wdGlvbnMpO1xuXG4gICAgICByZXR1cm4gbmV3IHYuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdi53YWl0Rm9yUmVzdWx0cyhyZXN1bHRzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlcnJvcnMgPSB2LnByb2Nlc3NWYWxpZGF0aW9uUmVzdWx0cyhyZXN1bHRzLCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IFdyYXBFcnJvcnMoZXJyb3JzLCBvcHRpb25zLCBhdHRyaWJ1dGVzLCBjb25zdHJhaW50cykpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKGF0dHJpYnV0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNpbmdsZTogZnVuY3Rpb24odmFsdWUsIGNvbnN0cmFpbnRzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHYuc2luZ2xlLm9wdGlvbnMsIG9wdGlvbnMsIHtcbiAgICAgICAgZm9ybWF0OiBcImZsYXRcIixcbiAgICAgICAgZnVsbE1lc3NhZ2VzOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdih7c2luZ2xlOiB2YWx1ZX0sIHtzaW5nbGU6IGNvbnN0cmFpbnRzfSwgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBhbGwgcHJvbWlzZXMgaW4gdGhlIHJlc3VsdHMgYXJyYXlcbiAgICAvLyBhcmUgc2V0dGxlZC4gVGhlIHByb21pc2UgcmV0dXJuZWQgZnJvbSB0aGlzIGZ1bmN0aW9uIGlzIGFsd2F5cyByZXNvbHZlZCxcbiAgICAvLyBuZXZlciByZWplY3RlZC5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIG1vZGlmaWVzIHRoZSBpbnB1dCBhcmd1bWVudCwgaXQgcmVwbGFjZXMgdGhlIHByb21pc2VzXG4gICAgLy8gd2l0aCB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgcHJvbWlzZS5cbiAgICB3YWl0Rm9yUmVzdWx0czogZnVuY3Rpb24ocmVzdWx0cykge1xuICAgICAgLy8gQ3JlYXRlIGEgc2VxdWVuY2Ugb2YgYWxsIHRoZSByZXN1bHRzIHN0YXJ0aW5nIHdpdGggYSByZXNvbHZlZCBwcm9taXNlLlxuICAgICAgcmV0dXJuIHJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIHJlc3VsdCkge1xuICAgICAgICAvLyBJZiB0aGlzIHJlc3VsdCBpc24ndCBhIHByb21pc2Ugc2tpcCBpdCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgIGlmICghdi5pc1Byb21pc2UocmVzdWx0LmVycm9yKSkge1xuICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1lbW8udGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmVycm9yLnRoZW4oZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IGVycm9yIHx8IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgbmV3IHYuUHJvbWlzZShmdW5jdGlvbihyKSB7IHIoKTsgfSkpOyAvLyBBIHJlc29sdmVkIHByb21pc2VcbiAgICB9LFxuXG4gICAgLy8gSWYgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGEgY2FsbDogZnVuY3Rpb24gdGhlIGFuZDogZnVuY3Rpb24gcmV0dXJuIHRoZSB2YWx1ZVxuICAgIC8vIG90aGVyd2lzZSBqdXN0IHJldHVybiB0aGUgdmFsdWUuIEFkZGl0aW9uYWwgYXJndW1lbnRzIHdpbGwgYmUgcGFzc2VkIGFzXG4gICAgLy8gYXJndW1lbnRzIHRvIHRoZSBmdW5jdGlvbi5cbiAgICAvLyBFeGFtcGxlOlxuICAgIC8vIGBgYFxuICAgIC8vIHJlc3VsdCgnZm9vJykgLy8gJ2ZvbydcbiAgICAvLyByZXN1bHQoTWF0aC5tYXgsIDEsIDIpIC8vIDJcbiAgICAvLyBgYGBcbiAgICByZXN1bHQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2tzIGlmIHRoZSB2YWx1ZSBpcyBhIG51bWJlci4gVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBjb25zaWRlciBOYU4gYVxuICAgIC8vIG51bWJlciBsaWtlIG1hbnkgb3RoZXIgYGlzTnVtYmVyYCBmdW5jdGlvbnMgZG8uXG4gICAgaXNOdW1iZXI6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBvYmplY3QgaXMgbm90IGEgZnVuY3Rpb25cbiAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9LFxuXG4gICAgLy8gQSBzaW1wbGUgY2hlY2sgdG8gdmVyaWZ5IHRoYXQgdGhlIHZhbHVlIGlzIGFuIGludGVnZXIuIFVzZXMgYGlzTnVtYmVyYFxuICAgIC8vIGFuZCBhIHNpbXBsZSBtb2R1bG8gY2hlY2suXG4gICAgaXNJbnRlZ2VyOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHYuaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlICUgMSA9PT0gMDtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2tzIGlmIHRoZSB2YWx1ZSBpcyBhIGJvb2xlYW5cbiAgICBpc0Jvb2xlYW46IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG4gICAgfSxcblxuICAgIC8vIFVzZXMgdGhlIGBPYmplY3RgIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBnaXZlbiBhcmd1bWVudCBpcyBhbiBvYmplY3QuXG4gICAgaXNPYmplY3Q6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaik7XG4gICAgfSxcblxuICAgIC8vIFNpbXBseSBjaGVja3MgaWYgdGhlIG9iamVjdCBpcyBhbiBpbnN0YW5jZSBvZiBhIGRhdGVcbiAgICBpc0RhdGU6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIERhdGU7XG4gICAgfSxcblxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIG9iamVjdCBpcyBgbnVsbGAgb2YgYHVuZGVmaW5lZGBcbiAgICBpc0RlZmluZWQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogIT09IHVuZGVmaW5lZDtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2tzIGlmIHRoZSBnaXZlbiBhcmd1bWVudCBpcyBhIHByb21pc2UuIEFueXRoaW5nIHdpdGggYSBgdGhlbmBcbiAgICAvLyBmdW5jdGlvbiBpcyBjb25zaWRlcmVkIGEgcHJvbWlzZS5cbiAgICBpc1Byb21pc2U6IGZ1bmN0aW9uKHApIHtcbiAgICAgIHJldHVybiAhIXAgJiYgdi5pc0Z1bmN0aW9uKHAudGhlbik7XG4gICAgfSxcblxuICAgIGlzSnF1ZXJ5RWxlbWVudDogZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIG8gJiYgdi5pc1N0cmluZyhvLmpxdWVyeSk7XG4gICAgfSxcblxuICAgIGlzRG9tRWxlbWVudDogZnVuY3Rpb24obykge1xuICAgICAgaWYgKCFvKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvLnF1ZXJ5U2VsZWN0b3JBbGwgfHwgIW8ucXVlcnlTZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzT2JqZWN0KGRvY3VtZW50KSAmJiBvID09PSBkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzg0MzgwLzY5OTMwNFxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIG8gaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBvICYmXG4gICAgICAgICAgdHlwZW9mIG8gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICBvICE9PSBudWxsICYmXG4gICAgICAgICAgby5ub2RlVHlwZSA9PT0gMSAmJlxuICAgICAgICAgIHR5cGVvZiBvLm5vZGVOYW1lID09PSBcInN0cmluZ1wiO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpc0VtcHR5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGF0dHI7XG5cbiAgICAgIC8vIE51bGwgYW5kIHVuZGVmaW5lZCBhcmUgZW1wdHlcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBmdW5jdGlvbnMgYXJlIG5vbiBlbXB0eVxuICAgICAgaWYgKHYuaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGl0ZXNwYWNlIG9ubHkgc3RyaW5ncyBhcmUgZW1wdHlcbiAgICAgIGlmICh2LmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdi5FTVBUWV9TVFJJTkdfUkVHRVhQLnRlc3QodmFsdWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3IgYXJyYXlzIHdlIHVzZSB0aGUgbGVuZ3RoIHByb3BlcnR5XG4gICAgICBpZiAodi5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBEYXRlcyBoYXZlIG5vIGF0dHJpYnV0ZXMgYnV0IGFyZW4ndCBlbXB0eVxuICAgICAgaWYgKHYuaXNEYXRlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGZpbmQgYXQgbGVhc3Qgb25lIHByb3BlcnR5IHdlIGNvbnNpZGVyIGl0IG5vbiBlbXB0eVxuICAgICAgaWYgKHYuaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGZvciAoYXR0ciBpbiB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBGb3JtYXRzIHRoZSBzcGVjaWZpZWQgc3RyaW5ncyB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMgbGlrZSBzbzpcbiAgICAvLyBgYGBcbiAgICAvLyBmb3JtYXQoXCJGb286ICV7Zm9vfVwiLCB7Zm9vOiBcImJhclwifSkgLy8gXCJGb28gYmFyXCJcbiAgICAvLyBgYGBcbiAgICAvLyBJZiB5b3Ugd2FudCB0byB3cml0ZSAley4uLn0gd2l0aG91dCBoYXZpbmcgaXQgcmVwbGFjZWQgc2ltcGx5XG4gICAgLy8gcHJlZml4IGl0IHdpdGggJSBsaWtlIHRoaXMgYEZvbzogJSV7Zm9vfWAgYW5kIGl0IHdpbGwgYmUgcmV0dXJuZWRcbiAgICAvLyBhcyBgXCJGb286ICV7Zm9vfVwiYFxuICAgIGZvcm1hdDogdi5leHRlbmQoZnVuY3Rpb24oc3RyLCB2YWxzKSB7XG4gICAgICBpZiAoIXYuaXNTdHJpbmcoc3RyKSkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHYuZm9ybWF0LkZPUk1BVF9SRUdFWFAsIGZ1bmN0aW9uKG0wLCBtMSwgbTIpIHtcbiAgICAgICAgaWYgKG0xID09PSAnJScpIHtcbiAgICAgICAgICByZXR1cm4gXCIle1wiICsgbTIgKyBcIn1cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHNbbTJdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwge1xuICAgICAgLy8gRmluZHMgJXtrZXl9IHN0eWxlIHBhdHRlcm5zIGluIHRoZSBnaXZlbiBzdHJpbmdcbiAgICAgIEZPUk1BVF9SRUdFWFA6IC8oJT8pJVxceyhbXlxcfV0rKVxcfS9nXG4gICAgfSksXG5cbiAgICAvLyBcIlByZXR0aWZpZXNcIiB0aGUgZ2l2ZW4gc3RyaW5nLlxuICAgIC8vIFByZXR0aWZ5aW5nIG1lYW5zIHJlcGxhY2luZyBbLlxcXy1dIHdpdGggc3BhY2VzIGFzIHdlbGwgYXMgc3BsaXR0aW5nXG4gICAgLy8gY2FtZWwgY2FzZSB3b3Jkcy5cbiAgICBwcmV0dGlmeTogZnVuY3Rpb24oc3RyKSB7XG4gICAgICBpZiAodi5pc051bWJlcihzdHIpKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBtb3JlIHRoYW4gMiBkZWNpbWFscyByb3VuZCBpdCB0byB0d29cbiAgICAgICAgaWYgKChzdHIgKiAxMDApICUgMSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBcIlwiICsgc3RyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KE1hdGgucm91bmQoc3RyICogMTAwKSAvIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodi5pc0FycmF5KHN0cikpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gdi5wcmV0dGlmeShzKTsgfSkuam9pbihcIiwgXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5pc09iamVjdChzdHIpKSB7XG4gICAgICAgIGlmICghdi5pc0RlZmluZWQoc3RyLnRvU3RyaW5nKSkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0ci50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgdGhlIHN0cmluZyBpcyBhY3R1YWxseSBhIHN0cmluZ1xuICAgICAgc3RyID0gXCJcIiArIHN0cjtcblxuICAgICAgcmV0dXJuIHN0clxuICAgICAgICAvLyBTcGxpdHMga2V5cyBzZXBhcmF0ZWQgYnkgcGVyaW9kc1xuICAgICAgICAucmVwbGFjZSgvKFteXFxzXSlcXC4oW15cXHNdKS9nLCAnJDEgJDInKVxuICAgICAgICAvLyBSZW1vdmVzIGJhY2tzbGFzaGVzXG4gICAgICAgIC5yZXBsYWNlKC9cXFxcKy9nLCAnJylcbiAgICAgICAgLy8gUmVwbGFjZXMgLSBhbmQgLSB3aXRoIHNwYWNlXG4gICAgICAgIC5yZXBsYWNlKC9bXy1dL2csICcgJylcbiAgICAgICAgLy8gU3BsaXRzIGNhbWVsIGNhc2VkIHdvcmRzXG4gICAgICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBmdW5jdGlvbihtMCwgbTEsIG0yKSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCIgKyBtMSArIFwiIFwiICsgbTIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcblxuICAgIHN0cmluZ2lmeVZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIHByZXR0aWZ5ID0gb3B0aW9ucyAmJiBvcHRpb25zLnByZXR0aWZ5IHx8IHYucHJldHRpZnk7XG4gICAgICByZXR1cm4gcHJldHRpZnkodmFsdWUpO1xuICAgIH0sXG5cbiAgICBpc1N0cmluZzogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xuICAgIH0sXG5cbiAgICBpc0FycmF5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgaWYgdGhlIG9iamVjdCBpcyBhIGhhc2gsIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gYW4gb2JqZWN0IHRoYXRcbiAgICAvLyBpcyBuZWl0aGVyIGFuIGFycmF5IG5vciBhIGZ1bmN0aW9uLlxuICAgIGlzSGFzaDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB2LmlzT2JqZWN0KHZhbHVlKSAmJiAhdi5pc0FycmF5KHZhbHVlKSAmJiAhdi5pc0Z1bmN0aW9uKHZhbHVlKTtcbiAgICB9LFxuXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHtcbiAgICAgIGlmICghdi5pc0RlZmluZWQob2JqKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAodi5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIG9iai5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgaW4gb2JqO1xuICAgIH0sXG5cbiAgICB1bmlxdWU6IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICBpZiAoIXYuaXNBcnJheShhcnJheSkpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbihlbCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgIHJldHVybiBhcnJheS5pbmRleE9mKGVsKSA9PSBpbmRleDtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBmb3JFYWNoS2V5SW5LZXlwYXRoOiBmdW5jdGlvbihvYmplY3QsIGtleXBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIXYuaXNTdHJpbmcoa2V5cGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleSA9IFwiXCJcbiAgICAgICAgLCBpXG4gICAgICAgICwgZXNjYXBlID0gZmFsc2U7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlwYXRoLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHN3aXRjaCAoa2V5cGF0aFtpXSkge1xuICAgICAgICAgIGNhc2UgJy4nOlxuICAgICAgICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAga2V5ICs9ICcuJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9iamVjdCA9IGNhbGxiYWNrKG9iamVjdCwga2V5LCBmYWxzZSk7XG4gICAgICAgICAgICAgIGtleSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ1xcXFwnOlxuICAgICAgICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAga2V5ICs9ICdcXFxcJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVzY2FwZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGtleSArPSBrZXlwYXRoW2ldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG9iamVjdCwga2V5LCB0cnVlKTtcbiAgICB9LFxuXG4gICAgZ2V0RGVlcE9iamVjdFZhbHVlOiBmdW5jdGlvbihvYmosIGtleXBhdGgpIHtcbiAgICAgIGlmICghdi5pc09iamVjdChvYmopKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2LmZvckVhY2hLZXlJbktleXBhdGgob2JqLCBrZXlwYXRoLCBmdW5jdGlvbihvYmosIGtleSkge1xuICAgICAgICBpZiAodi5pc09iamVjdChvYmopKSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gVGhpcyByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGFsbCB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtLlxuICAgIC8vIEl0IHVzZXMgdGhlIGlucHV0IG5hbWUgYXMga2V5IGFuZCB0aGUgdmFsdWUgYXMgdmFsdWVcbiAgICAvLyBTbyBmb3IgZXhhbXBsZSB0aGlzOlxuICAgIC8vIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJlbWFpbFwiIHZhbHVlPVwiZm9vQGJhci5jb21cIiAvPlxuICAgIC8vIHdvdWxkIHJldHVybjpcbiAgICAvLyB7ZW1haWw6IFwiZm9vQGJhci5jb21cIn1cbiAgICBjb2xsZWN0Rm9ybVZhbHVlczogZnVuY3Rpb24oZm9ybSwgb3B0aW9ucykge1xuICAgICAgdmFyIHZhbHVlcyA9IHt9XG4gICAgICAgICwgaVxuICAgICAgICAsIGpcbiAgICAgICAgLCBpbnB1dFxuICAgICAgICAsIGlucHV0c1xuICAgICAgICAsIG9wdGlvblxuICAgICAgICAsIHZhbHVlO1xuXG4gICAgICBpZiAodi5pc0pxdWVyeUVsZW1lbnQoZm9ybSkpIHtcbiAgICAgICAgZm9ybSA9IGZvcm1bMF07XG4gICAgICB9XG5cbiAgICAgIGlmICghZm9ybSkge1xuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbbmFtZV0sIHRleHRhcmVhW25hbWVdXCIpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnB1dCA9IGlucHV0cy5pdGVtKGkpO1xuXG4gICAgICAgIGlmICh2LmlzRGVmaW5lZChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlnbm9yZWRcIikpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmFtZSA9IGlucHV0Lm5hbWUucmVwbGFjZSgvXFwuL2csIFwiXFxcXFxcXFwuXCIpO1xuICAgICAgICB2YWx1ZSA9IHYuc2FuaXRpemVGb3JtVmFsdWUoaW5wdXQudmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgPyArdmFsdWUgOiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnR5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgIGlmIChpbnB1dC5hdHRyaWJ1dGVzLnZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIWlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNbbmFtZV0gfHwgbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBpbnB1dC5jaGVja2VkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC50eXBlID09PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICBpZiAoIWlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVzW25hbWVdIHx8IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpbnB1dHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzZWxlY3RbbmFtZV1cIik7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzLml0ZW0oaSk7XG4gICAgICAgIGlmICh2LmlzRGVmaW5lZChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlnbm9yZWRcIikpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXQubXVsdGlwbGUpIHtcbiAgICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgICAgIGZvciAoaiBpbiBpbnB1dC5vcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb24gPSBpbnB1dC5vcHRpb25zW2pdO1xuICAgICAgICAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgIHZhbHVlLnB1c2godi5zYW5pdGl6ZUZvcm1WYWx1ZShvcHRpb24udmFsdWUsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIF92YWwgPSB0eXBlb2YgaW5wdXQub3B0aW9uc1tpbnB1dC5zZWxlY3RlZEluZGV4XSAhPT0gJ3VuZGVmaW5lZCcgPyBpbnB1dC5vcHRpb25zW2lucHV0LnNlbGVjdGVkSW5kZXhdLnZhbHVlIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gJyc7XG4gICAgICAgICAgdmFsdWUgPSB2LnNhbml0aXplRm9ybVZhbHVlKF92YWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH0sXG5cbiAgICBzYW5pdGl6ZUZvcm1WYWx1ZTogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLnRyaW0gJiYgdi5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLm51bGxpZnkgIT09IGZhbHNlICYmIHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICBjYXBpdGFsaXplOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICghdi5pc1N0cmluZyhzdHIpKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyWzBdLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhbGwgZXJyb3JzIHdobydzIGVycm9yIGF0dHJpYnV0ZSBpcyBlbXB0eSAobnVsbCBvciB1bmRlZmluZWQpXG4gICAgcHJ1bmVFbXB0eUVycm9yczogZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICByZXR1cm4gZXJyb3JzLmZpbHRlcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICByZXR1cm4gIXYuaXNFbXB0eShlcnJvci5lcnJvcik7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gSW5cbiAgICAvLyBbe2Vycm9yOiBbXCJlcnIxXCIsIFwiZXJyMlwiXSwgLi4ufV1cbiAgICAvLyBPdXRcbiAgICAvLyBbe2Vycm9yOiBcImVycjFcIiwgLi4ufSwge2Vycm9yOiBcImVycjJcIiwgLi4ufV1cbiAgICAvL1xuICAgIC8vIEFsbCBhdHRyaWJ1dGVzIGluIGFuIGVycm9yIHdpdGggbXVsdGlwbGUgbWVzc2FnZXMgYXJlIGR1cGxpY2F0ZWRcbiAgICAvLyB3aGVuIGV4cGFuZGluZyB0aGUgZXJyb3JzLlxuICAgIGV4cGFuZE11bHRpcGxlRXJyb3JzOiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgIGVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIC8vIFJlbW92ZXMgZXJyb3JzIHdpdGhvdXQgYSBtZXNzYWdlXG4gICAgICAgIGlmICh2LmlzQXJyYXkoZXJyb3IuZXJyb3IpKSB7XG4gICAgICAgICAgZXJyb3IuZXJyb3IuZm9yRWFjaChmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKHYuZXh0ZW5kKHt9LCBlcnJvciwge2Vycm9yOiBtc2d9KSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0LnB1c2goZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIC8vIENvbnZlcnRzIHRoZSBlcnJvciBtZXNhZ2VzIGJ5IHByZXBlbmRpbmcgdGhlIGF0dHJpYnV0ZSBuYW1lIHVubGVzcyB0aGVcbiAgICAvLyBtZXNzYWdlIGlzIHByZWZpeGVkIGJ5IF5cbiAgICBjb252ZXJ0RXJyb3JNZXNzYWdlczogZnVuY3Rpb24oZXJyb3JzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgdmFyIHJldCA9IFtdXG4gICAgICAgICwgcHJldHRpZnkgPSBvcHRpb25zLnByZXR0aWZ5IHx8IHYucHJldHRpZnk7XG4gICAgICBlcnJvcnMuZm9yRWFjaChmdW5jdGlvbihlcnJvckluZm8pIHtcbiAgICAgICAgdmFyIGVycm9yID0gdi5yZXN1bHQoZXJyb3JJbmZvLmVycm9yLFxuICAgICAgICAgICAgZXJyb3JJbmZvLnZhbHVlLFxuICAgICAgICAgICAgZXJyb3JJbmZvLmF0dHJpYnV0ZSxcbiAgICAgICAgICAgIGVycm9ySW5mby5vcHRpb25zLFxuICAgICAgICAgICAgZXJyb3JJbmZvLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBlcnJvckluZm8uZ2xvYmFsT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF2LmlzU3RyaW5nKGVycm9yKSkge1xuICAgICAgICAgIHJldC5wdXNoKGVycm9ySW5mbyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yWzBdID09PSAnXicpIHtcbiAgICAgICAgICBlcnJvciA9IGVycm9yLnNsaWNlKDEpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZnVsbE1lc3NhZ2VzICE9PSBmYWxzZSkge1xuICAgICAgICAgIGVycm9yID0gdi5jYXBpdGFsaXplKHByZXR0aWZ5KGVycm9ySW5mby5hdHRyaWJ1dGUpKSArIFwiIFwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3IgPSBlcnJvci5yZXBsYWNlKC9cXFxcXFxeL2csIFwiXlwiKTtcbiAgICAgICAgZXJyb3IgPSB2LmZvcm1hdChlcnJvciwge1xuICAgICAgICAgIHZhbHVlOiB2LnN0cmluZ2lmeVZhbHVlKGVycm9ySW5mby52YWx1ZSwgb3B0aW9ucylcbiAgICAgICAgfSk7XG4gICAgICAgIHJldC5wdXNoKHYuZXh0ZW5kKHt9LCBlcnJvckluZm8sIHtlcnJvcjogZXJyb3J9KSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIC8vIEluOlxuICAgIC8vIFt7YXR0cmlidXRlOiBcIjxhdHRyaWJ1dGVOYW1lPlwiLCAuLi59XVxuICAgIC8vIE91dDpcbiAgICAvLyB7XCI8YXR0cmlidXRlTmFtZT5cIjogW3thdHRyaWJ1dGU6IFwiPGF0dHJpYnV0ZU5hbWU+XCIsIC4uLn1dfVxuICAgIGdyb3VwRXJyb3JzQnlBdHRyaWJ1dGU6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgdmFyIGxpc3QgPSByZXRbZXJyb3IuYXR0cmlidXRlXTtcbiAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICBsaXN0LnB1c2goZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldFtlcnJvci5hdHRyaWJ1dGVdID0gW2Vycm9yXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICAvLyBJbjpcbiAgICAvLyBbe2Vycm9yOiBcIjxtZXNzYWdlIDE+XCIsIC4uLn0sIHtlcnJvcjogXCI8bWVzc2FnZSAyPlwiLCAuLi59XVxuICAgIC8vIE91dDpcbiAgICAvLyBbXCI8bWVzc2FnZSAxPlwiLCBcIjxtZXNzYWdlIDI+XCJdXG4gICAgZmxhdHRlbkVycm9yc1RvQXJyYXk6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgcmV0dXJuIGVycm9yc1xuICAgICAgICAubWFwKGZ1bmN0aW9uKGVycm9yKSB7IHJldHVybiBlcnJvci5lcnJvcjsgfSlcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIHNlbGYpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBjbGVhbkF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIHdoaXRlbGlzdCkge1xuICAgICAgZnVuY3Rpb24gd2hpdGVsaXN0Q3JlYXRvcihvYmosIGtleSwgbGFzdCkge1xuICAgICAgICBpZiAodi5pc09iamVjdChvYmpba2V5XSkpIHtcbiAgICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChvYmpba2V5XSA9IGxhc3QgPyB0cnVlIDoge30pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE9iamVjdFdoaXRlbGlzdCh3aGl0ZWxpc3QpIHtcbiAgICAgICAgdmFyIG93ID0ge31cbiAgICAgICAgICAsIGxhc3RPYmplY3RcbiAgICAgICAgICAsIGF0dHI7XG4gICAgICAgIGZvciAoYXR0ciBpbiB3aGl0ZWxpc3QpIHtcbiAgICAgICAgICBpZiAoIXdoaXRlbGlzdFthdHRyXSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHYuZm9yRWFjaEtleUluS2V5cGF0aChvdywgYXR0ciwgd2hpdGVsaXN0Q3JlYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG93O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhblJlY3Vyc2l2ZShhdHRyaWJ1dGVzLCB3aGl0ZWxpc3QpIHtcbiAgICAgICAgaWYgKCF2LmlzT2JqZWN0KGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmV0ID0gdi5leHRlbmQoe30sIGF0dHJpYnV0ZXMpXG4gICAgICAgICAgLCB3XG4gICAgICAgICAgLCBhdHRyaWJ1dGU7XG5cbiAgICAgICAgZm9yIChhdHRyaWJ1dGUgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgIHcgPSB3aGl0ZWxpc3RbYXR0cmlidXRlXTtcblxuICAgICAgICAgIGlmICh2LmlzT2JqZWN0KHcpKSB7XG4gICAgICAgICAgICByZXRbYXR0cmlidXRlXSA9IGNsZWFuUmVjdXJzaXZlKHJldFthdHRyaWJ1dGVdLCB3KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF3KSB7XG4gICAgICAgICAgICBkZWxldGUgcmV0W2F0dHJpYnV0ZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG5cbiAgICAgIGlmICghdi5pc09iamVjdCh3aGl0ZWxpc3QpIHx8ICF2LmlzT2JqZWN0KGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cblxuICAgICAgd2hpdGVsaXN0ID0gYnVpbGRPYmplY3RXaGl0ZWxpc3Qod2hpdGVsaXN0KTtcbiAgICAgIHJldHVybiBjbGVhblJlY3Vyc2l2ZShhdHRyaWJ1dGVzLCB3aGl0ZWxpc3QpO1xuICAgIH0sXG5cbiAgICBleHBvc2VNb2R1bGU6IGZ1bmN0aW9uKHZhbGlkYXRlLCByb290LCBleHBvcnRzLCBtb2R1bGUsIGRlZmluZSkge1xuICAgICAgaWYgKGV4cG9ydHMpIHtcbiAgICAgICAgaWYgKG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRlO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMudmFsaWRhdGUgPSB2YWxpZGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QudmFsaWRhdGUgPSB2YWxpZGF0ZTtcbiAgICAgICAgaWYgKHZhbGlkYXRlLmlzRnVuY3Rpb24oZGVmaW5lKSAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgICAgZGVmaW5lKFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWxpZGF0ZTsgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2FybjogZnVuY3Rpb24obXNnKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlt2YWxpZGF0ZS5qc10gXCIgKyBtc2cpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlcnJvcjogZnVuY3Rpb24obXNnKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW3ZhbGlkYXRlLmpzXSBcIiArIG1zZyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB2YWxpZGF0ZS52YWxpZGF0b3JzID0ge1xuICAgIC8vIFByZXNlbmNlIHZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpc24ndCBlbXB0eVxuICAgIHByZXNlbmNlOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKG9wdGlvbnMuYWxsb3dFbXB0eSAhPT0gZmFsc2UgPyAhdi5pc0RlZmluZWQodmFsdWUpIDogdi5pc0VtcHR5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5tZXNzYWdlIHx8IHRoaXMubWVzc2FnZSB8fCBcImNhbid0IGJlIGJsYW5rXCI7XG4gICAgICB9XG4gICAgfSxcbiAgICBsZW5ndGg6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zLCBhdHRyaWJ1dGUpIHtcbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgYWxsb3dlZFxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBpcyA9IG9wdGlvbnMuaXNcbiAgICAgICAgLCBtYXhpbXVtID0gb3B0aW9ucy5tYXhpbXVtXG4gICAgICAgICwgbWluaW11bSA9IG9wdGlvbnMubWluaW11bVxuICAgICAgICAsIHRva2VuaXplciA9IG9wdGlvbnMudG9rZW5pemVyIHx8IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsOyB9XG4gICAgICAgICwgZXJyXG4gICAgICAgICwgZXJyb3JzID0gW107XG5cbiAgICAgIHZhbHVlID0gdG9rZW5pemVyKHZhbHVlKTtcbiAgICAgIHZhciBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICBpZighdi5pc051bWJlcihsZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHwgdGhpcy5ub3RWYWxpZCB8fCBcImhhcyBhbiBpbmNvcnJlY3QgbGVuZ3RoXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIElzIGNoZWNrc1xuICAgICAgaWYgKHYuaXNOdW1iZXIoaXMpICYmIGxlbmd0aCAhPT0gaXMpIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy53cm9uZ0xlbmd0aCB8fFxuICAgICAgICAgIHRoaXMud3JvbmdMZW5ndGggfHxcbiAgICAgICAgICBcImlzIHRoZSB3cm9uZyBsZW5ndGggKHNob3VsZCBiZSAle2NvdW50fSBjaGFyYWN0ZXJzKVwiO1xuICAgICAgICBlcnJvcnMucHVzaCh2LmZvcm1hdChlcnIsIHtjb3VudDogaXN9KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzTnVtYmVyKG1pbmltdW0pICYmIGxlbmd0aCA8IG1pbmltdW0pIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy50b29TaG9ydCB8fFxuICAgICAgICAgIHRoaXMudG9vU2hvcnQgfHxcbiAgICAgICAgICBcImlzIHRvbyBzaG9ydCAobWluaW11bSBpcyAle2NvdW50fSBjaGFyYWN0ZXJzKVwiO1xuICAgICAgICBlcnJvcnMucHVzaCh2LmZvcm1hdChlcnIsIHtjb3VudDogbWluaW11bX0pKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNOdW1iZXIobWF4aW11bSkgJiYgbGVuZ3RoID4gbWF4aW11bSkge1xuICAgICAgICBlcnIgPSBvcHRpb25zLnRvb0xvbmcgfHxcbiAgICAgICAgICB0aGlzLnRvb0xvbmcgfHxcbiAgICAgICAgICBcImlzIHRvbyBsb25nIChtYXhpbXVtIGlzICV7Y291bnR9IGNoYXJhY3RlcnMpXCI7XG4gICAgICAgIGVycm9ycy5wdXNoKHYuZm9ybWF0KGVyciwge2NvdW50OiBtYXhpbXVtfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fCBlcnJvcnM7XG4gICAgICB9XG4gICAgfSxcbiAgICBudW1lcmljYWxpdHk6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zLCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXMsIGdsb2JhbE9wdGlvbnMpIHtcbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgZmluZVxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBlcnJvcnMgPSBbXVxuICAgICAgICAsIG5hbWVcbiAgICAgICAgLCBjb3VudFxuICAgICAgICAsIGNoZWNrcyA9IHtcbiAgICAgICAgICAgIGdyZWF0ZXJUaGFuOiAgICAgICAgICBmdW5jdGlvbih2LCBjKSB7IHJldHVybiB2ID4gYzsgfSxcbiAgICAgICAgICAgIGdyZWF0ZXJUaGFuT3JFcXVhbFRvOiBmdW5jdGlvbih2LCBjKSB7IHJldHVybiB2ID49IGM7IH0sXG4gICAgICAgICAgICBlcXVhbFRvOiAgICAgICAgICAgICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA9PT0gYzsgfSxcbiAgICAgICAgICAgIGxlc3NUaGFuOiAgICAgICAgICAgICBmdW5jdGlvbih2LCBjKSB7IHJldHVybiB2IDwgYzsgfSxcbiAgICAgICAgICAgIGxlc3NUaGFuT3JFcXVhbFRvOiAgICBmdW5jdGlvbih2LCBjKSB7IHJldHVybiB2IDw9IGM7IH0sXG4gICAgICAgICAgICBkaXZpc2libGVCeTogICAgICAgICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiAlIGMgPT09IDA7IH1cbiAgICAgICAgICB9XG4gICAgICAgICwgcHJldHRpZnkgPSBvcHRpb25zLnByZXR0aWZ5IHx8XG4gICAgICAgICAgKGdsb2JhbE9wdGlvbnMgJiYgZ2xvYmFsT3B0aW9ucy5wcmV0dGlmeSkgfHxcbiAgICAgICAgICB2LnByZXR0aWZ5O1xuXG4gICAgICAvLyBTdHJpY3Qgd2lsbCBjaGVjayB0aGF0IGl0IGlzIGEgdmFsaWQgbG9va2luZyBudW1iZXJcbiAgICAgIGlmICh2LmlzU3RyaW5nKHZhbHVlKSAmJiBvcHRpb25zLnN0cmljdCkge1xuICAgICAgICB2YXIgcGF0dGVybiA9IFwiXi0/KDB8WzEtOV1cXFxcZCopXCI7XG4gICAgICAgIGlmICghb3B0aW9ucy5vbmx5SW50ZWdlcikge1xuICAgICAgICAgIHBhdHRlcm4gKz0gXCIoXFxcXC5cXFxcZCspP1wiO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gXCIkXCI7XG5cbiAgICAgICAgaWYgKCEobmV3IFJlZ0V4cChwYXR0ZXJuKS50ZXN0KHZhbHVlKSkpIHtcbiAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgICBvcHRpb25zLm5vdFZhbGlkIHx8XG4gICAgICAgICAgICB0aGlzLm5vdFZhbGlkIHx8XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgICAgIFwibXVzdCBiZSBhIHZhbGlkIG51bWJlclwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvZXJjZSB0aGUgdmFsdWUgdG8gYSBudW1iZXIgdW5sZXNzIHdlJ3JlIGJlaW5nIHN0cmljdC5cbiAgICAgIGlmIChvcHRpb25zLm5vU3RyaW5ncyAhPT0gdHJ1ZSAmJiB2LmlzU3RyaW5nKHZhbHVlKSAmJiAhdi5pc0VtcHR5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9ICt2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgaXQncyBub3QgYSBudW1iZXIgd2Ugc2hvdWxkbid0IGNvbnRpbnVlIHNpbmNlIGl0IHdpbGwgY29tcGFyZSBpdC5cbiAgICAgIGlmICghdi5pc051bWJlcih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgIG9wdGlvbnMubm90VmFsaWQgfHxcbiAgICAgICAgICB0aGlzLm5vdFZhbGlkIHx8XG4gICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgXCJpcyBub3QgYSBudW1iZXJcIjtcbiAgICAgIH1cblxuICAgICAgLy8gU2FtZSBsb2dpYyBhcyBhYm92ZSwgc29ydCBvZi4gRG9uJ3QgYm90aGVyIHdpdGggY29tcGFyaXNvbnMgaWYgdGhpc1xuICAgICAgLy8gZG9lc24ndCBwYXNzLlxuICAgICAgaWYgKG9wdGlvbnMub25seUludGVnZXIgJiYgIXYuaXNJbnRlZ2VyKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgb3B0aW9ucy5ub3RJbnRlZ2VyIHx8XG4gICAgICAgICAgdGhpcy5ub3RJbnRlZ2VyIHx8XG4gICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgXCJtdXN0IGJlIGFuIGludGVnZXJcIjtcbiAgICAgIH1cblxuICAgICAgZm9yIChuYW1lIGluIGNoZWNrcykge1xuICAgICAgICBjb3VudCA9IG9wdGlvbnNbbmFtZV07XG4gICAgICAgIGlmICh2LmlzTnVtYmVyKGNvdW50KSAmJiAhY2hlY2tzW25hbWVdKHZhbHVlLCBjb3VudCkpIHtcbiAgICAgICAgICAvLyBUaGlzIHBpY2tzIHRoZSBkZWZhdWx0IG1lc3NhZ2UgaWYgc3BlY2lmaWVkXG4gICAgICAgICAgLy8gRm9yIGV4YW1wbGUgdGhlIGdyZWF0ZXJUaGFuIGNoZWNrIHVzZXMgdGhlIG1lc3NhZ2UgZnJvbVxuICAgICAgICAgIC8vIHRoaXMubm90R3JlYXRlclRoYW4gc28gd2UgY2FwaXRhbGl6ZSB0aGUgbmFtZSBhbmQgcHJlcGVuZCBcIm5vdFwiXG4gICAgICAgICAgdmFyIGtleSA9IFwibm90XCIgKyB2LmNhcGl0YWxpemUobmFtZSk7XG4gICAgICAgICAgdmFyIG1zZyA9IG9wdGlvbnNba2V5XSB8fFxuICAgICAgICAgICAgdGhpc1trZXldIHx8XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgICAgIFwibXVzdCBiZSAle3R5cGV9ICV7Y291bnR9XCI7XG5cbiAgICAgICAgICBlcnJvcnMucHVzaCh2LmZvcm1hdChtc2csIHtcbiAgICAgICAgICAgIGNvdW50OiBjb3VudCxcbiAgICAgICAgICAgIHR5cGU6IHByZXR0aWZ5KG5hbWUpXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLm9kZCAmJiB2YWx1ZSAlIDIgIT09IDEpIHtcbiAgICAgICAgZXJyb3JzLnB1c2gob3B0aW9ucy5ub3RPZGQgfHxcbiAgICAgICAgICAgIHRoaXMubm90T2RkIHx8XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgICAgIFwibXVzdCBiZSBvZGRcIik7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5ldmVuICYmIHZhbHVlICUgMiAhPT0gMCkge1xuICAgICAgICBlcnJvcnMucHVzaChvcHRpb25zLm5vdEV2ZW4gfHxcbiAgICAgICAgICAgIHRoaXMubm90RXZlbiB8fFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgICBcIm11c3QgYmUgZXZlblwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fCBlcnJvcnM7XG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRldGltZTogdi5leHRlbmQoZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghdi5pc0Z1bmN0aW9uKHRoaXMucGFyc2UpIHx8ICF2LmlzRnVuY3Rpb24odGhpcy5mb3JtYXQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvdGggdGhlIHBhcnNlIGFuZCBmb3JtYXQgZnVuY3Rpb25zIG5lZWRzIHRvIGJlIHNldCB0byB1c2UgdGhlIGRhdGV0aW1lL2RhdGUgdmFsaWRhdG9yXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGZpbmVcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgZXJyXG4gICAgICAgICwgZXJyb3JzID0gW11cbiAgICAgICAgLCBlYXJsaWVzdCA9IG9wdGlvbnMuZWFybGllc3QgPyB0aGlzLnBhcnNlKG9wdGlvbnMuZWFybGllc3QsIG9wdGlvbnMpIDogTmFOXG4gICAgICAgICwgbGF0ZXN0ID0gb3B0aW9ucy5sYXRlc3QgPyB0aGlzLnBhcnNlKG9wdGlvbnMubGF0ZXN0LCBvcHRpb25zKSA6IE5hTjtcblxuICAgICAgdmFsdWUgPSB0aGlzLnBhcnNlKHZhbHVlLCBvcHRpb25zKTtcblxuICAgICAgLy8gODY0MDAwMDAgaXMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gYSBkYXksIHRoaXMgaXMgdXNlZCB0byByZW1vdmVcbiAgICAgIC8vIHRoZSB0aW1lIGZyb20gdGhlIGRhdGVcbiAgICAgIGlmIChpc05hTih2YWx1ZSkgfHwgb3B0aW9ucy5kYXRlT25seSAmJiB2YWx1ZSAlIDg2NDAwMDAwICE9PSAwKSB7XG4gICAgICAgIGVyciA9IG9wdGlvbnMubm90VmFsaWQgfHxcbiAgICAgICAgICBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICB0aGlzLm5vdFZhbGlkIHx8XG4gICAgICAgICAgXCJtdXN0IGJlIGEgdmFsaWQgZGF0ZVwiO1xuICAgICAgICByZXR1cm4gdi5mb3JtYXQoZXJyLCB7dmFsdWU6IGFyZ3VtZW50c1swXX0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGVhcmxpZXN0KSAmJiB2YWx1ZSA8IGVhcmxpZXN0KSB7XG4gICAgICAgIGVyciA9IG9wdGlvbnMudG9vRWFybHkgfHxcbiAgICAgICAgICBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICB0aGlzLnRvb0Vhcmx5IHx8XG4gICAgICAgICAgXCJtdXN0IGJlIG5vIGVhcmxpZXIgdGhhbiAle2RhdGV9XCI7XG4gICAgICAgIGVyciA9IHYuZm9ybWF0KGVyciwge1xuICAgICAgICAgIHZhbHVlOiB0aGlzLmZvcm1hdCh2YWx1ZSwgb3B0aW9ucyksXG4gICAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXQoZWFybGllc3QsIG9wdGlvbnMpXG4gICAgICAgIH0pO1xuICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGxhdGVzdCkgJiYgdmFsdWUgPiBsYXRlc3QpIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy50b29MYXRlIHx8XG4gICAgICAgICAgb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgdGhpcy50b29MYXRlIHx8XG4gICAgICAgICAgXCJtdXN0IGJlIG5vIGxhdGVyIHRoYW4gJXtkYXRlfVwiO1xuICAgICAgICBlcnIgPSB2LmZvcm1hdChlcnIsIHtcbiAgICAgICAgICBkYXRlOiB0aGlzLmZvcm1hdChsYXRlc3QsIG9wdGlvbnMpLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLmZvcm1hdCh2YWx1ZSwgb3B0aW9ucylcbiAgICAgICAgfSk7XG4gICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB2LnVuaXF1ZShlcnJvcnMpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhcnNlOiBudWxsLFxuICAgICAgZm9ybWF0OiBudWxsXG4gICAgfSksXG4gICAgZGF0ZTogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgb3B0aW9ucywge2RhdGVPbmx5OiB0cnVlfSk7XG4gICAgICByZXR1cm4gdi52YWxpZGF0b3JzLmRhdGV0aW1lLmNhbGwodi52YWxpZGF0b3JzLmRhdGV0aW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBmb3JtYXQ6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBpZiAodi5pc1N0cmluZyhvcHRpb25zKSB8fCAob3B0aW9ucyBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICAgICAgb3B0aW9ucyA9IHtwYXR0ZXJuOiBvcHRpb25zfTtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UgfHwgXCJpcyBpbnZhbGlkXCJcbiAgICAgICAgLCBwYXR0ZXJuID0gb3B0aW9ucy5wYXR0ZXJuXG4gICAgICAgICwgbWF0Y2g7XG5cbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgYWxsb3dlZFxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF2LmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNTdHJpbmcocGF0dGVybikpIHtcbiAgICAgICAgcGF0dGVybiA9IG5ldyBSZWdFeHAob3B0aW9ucy5wYXR0ZXJuLCBvcHRpb25zLmZsYWdzKTtcbiAgICAgIH1cbiAgICAgIG1hdGNoID0gcGF0dGVybi5leGVjKHZhbHVlKTtcbiAgICAgIGlmICghbWF0Y2ggfHwgbWF0Y2hbMF0ubGVuZ3RoICE9IHZhbHVlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGluY2x1c2lvbjogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgZmluZVxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHYuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0ge3dpdGhpbjogb3B0aW9uc307XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBpZiAodi5jb250YWlucyhvcHRpb25zLndpdGhpbiwgdmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICBcIl4le3ZhbHVlfSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGxpc3RcIjtcbiAgICAgIHJldHVybiB2LmZvcm1hdChtZXNzYWdlLCB7dmFsdWU6IHZhbHVlfSk7XG4gICAgfSxcbiAgICBleGNsdXNpb246IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGZpbmVcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh2LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt3aXRoaW46IG9wdGlvbnN9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCF2LmNvbnRhaW5zKG9wdGlvbnMud2l0aGluLCB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlIHx8IFwiXiV7dmFsdWV9IGlzIHJlc3RyaWN0ZWRcIjtcbiAgICAgIGlmICh2LmlzU3RyaW5nKG9wdGlvbnMud2l0aGluW3ZhbHVlXSkpIHtcbiAgICAgICAgdmFsdWUgPSBvcHRpb25zLndpdGhpblt2YWx1ZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdi5mb3JtYXQobWVzc2FnZSwge3ZhbHVlOiB2YWx1ZX0pO1xuICAgIH0sXG4gICAgZW1haWw6IHYuZXh0ZW5kKGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UgfHwgXCJpcyBub3QgYSB2YWxpZCBlbWFpbFwiO1xuICAgICAgLy8gRW1wdHkgdmFsdWVzIGFyZSBmaW5lXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXYuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLlBBVFRFUk4uZXhlYyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgUEFUVEVSTjogL14oPzpbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqfFwiKD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjFcXHgyMy1cXHg1YlxceDVkLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkqXCIpQCg/Oig/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT98XFxbKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT98W2EtejAtOS1dKlthLXowLTldOig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxLVxceDVhXFx4NTMtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSspXFxdKSQvaVxuICAgIH0pLFxuICAgIGVxdWFsaXR5OiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucywgYXR0cmlidXRlLCBhdHRyaWJ1dGVzLCBnbG9iYWxPcHRpb25zKSB7XG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzU3RyaW5nKG9wdGlvbnMpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7YXR0cmlidXRlOiBvcHRpb25zfTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICBcImlzIG5vdCBlcXVhbCB0byAle2F0dHJpYnV0ZX1cIjtcblxuICAgICAgaWYgKHYuaXNFbXB0eShvcHRpb25zLmF0dHJpYnV0ZSkgfHwgIXYuaXNTdHJpbmcob3B0aW9ucy5hdHRyaWJ1dGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBhdHRyaWJ1dGUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmdcIik7XG4gICAgICB9XG5cbiAgICAgIHZhciBvdGhlclZhbHVlID0gdi5nZXREZWVwT2JqZWN0VmFsdWUoYXR0cmlidXRlcywgb3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICAgICwgY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvciB8fCBmdW5jdGlvbih2MSwgdjIpIHtcbiAgICAgICAgICByZXR1cm4gdjEgPT09IHYyO1xuICAgICAgICB9XG4gICAgICAgICwgcHJldHRpZnkgPSBvcHRpb25zLnByZXR0aWZ5IHx8XG4gICAgICAgICAgKGdsb2JhbE9wdGlvbnMgJiYgZ2xvYmFsT3B0aW9ucy5wcmV0dGlmeSkgfHxcbiAgICAgICAgICB2LnByZXR0aWZ5O1xuXG4gICAgICBpZiAoIWNvbXBhcmF0b3IodmFsdWUsIG90aGVyVmFsdWUsIG9wdGlvbnMsIGF0dHJpYnV0ZSwgYXR0cmlidXRlcykpIHtcbiAgICAgICAgcmV0dXJuIHYuZm9ybWF0KG1lc3NhZ2UsIHthdHRyaWJ1dGU6IHByZXR0aWZ5KG9wdGlvbnMuYXR0cmlidXRlKX0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gQSBVUkwgdmFsaWRhdG9yIHRoYXQgaXMgdXNlZCB0byB2YWxpZGF0ZSBVUkxzIHdpdGggdGhlIGFiaWxpdHkgdG9cbiAgICAvLyByZXN0cmljdCBzY2hlbWVzIGFuZCBzb21lIGRvbWFpbnMuXG4gICAgdXJsOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlIHx8IHRoaXMubWVzc2FnZSB8fCBcImlzIG5vdCBhIHZhbGlkIHVybFwiXG4gICAgICAgICwgc2NoZW1lcyA9IG9wdGlvbnMuc2NoZW1lcyB8fCB0aGlzLnNjaGVtZXMgfHwgWydodHRwJywgJ2h0dHBzJ11cbiAgICAgICAgLCBhbGxvd0xvY2FsID0gb3B0aW9ucy5hbGxvd0xvY2FsIHx8IHRoaXMuYWxsb3dMb2NhbCB8fCBmYWxzZVxuICAgICAgICAsIGFsbG93RGF0YVVybCA9IG9wdGlvbnMuYWxsb3dEYXRhVXJsIHx8IHRoaXMuYWxsb3dEYXRhVXJsIHx8IGZhbHNlO1xuICAgICAgaWYgKCF2LmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZHBlcmluaS83MjkyOTRcbiAgICAgIHZhciByZWdleCA9XG4gICAgICAgIFwiXlwiICtcbiAgICAgICAgLy8gcHJvdG9jb2wgaWRlbnRpZmllclxuICAgICAgICBcIig/Oig/OlwiICsgc2NoZW1lcy5qb2luKFwifFwiKSArIFwiKTovLylcIiArXG4gICAgICAgIC8vIHVzZXI6cGFzcyBhdXRoZW50aWNhdGlvblxuICAgICAgICBcIig/OlxcXFxTKyg/OjpcXFxcUyopP0ApP1wiICtcbiAgICAgICAgXCIoPzpcIjtcblxuICAgICAgdmFyIHRsZCA9IFwiKD86XFxcXC4oPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZl17Mix9KSlcIjtcblxuICAgICAgaWYgKGFsbG93TG9jYWwpIHtcbiAgICAgICAgdGxkICs9IFwiP1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnZXggKz1cbiAgICAgICAgICAvLyBJUCBhZGRyZXNzIGV4Y2x1c2lvblxuICAgICAgICAgIC8vIHByaXZhdGUgJiBsb2NhbCBuZXR3b3Jrc1xuICAgICAgICAgIFwiKD8hKD86MTB8MTI3KSg/OlxcXFwuXFxcXGR7MSwzfSl7M30pXCIgK1xuICAgICAgICAgIFwiKD8hKD86MTY5XFxcXC4yNTR8MTkyXFxcXC4xNjgpKD86XFxcXC5cXFxcZHsxLDN9KXsyfSlcIiArXG4gICAgICAgICAgXCIoPyExNzJcXFxcLig/OjFbNi05XXwyXFxcXGR8M1swLTFdKSg/OlxcXFwuXFxcXGR7MSwzfSl7Mn0pXCI7XG4gICAgICB9XG5cbiAgICAgIHJlZ2V4ICs9XG4gICAgICAgICAgLy8gSVAgYWRkcmVzcyBkb3R0ZWQgbm90YXRpb24gb2N0ZXRzXG4gICAgICAgICAgLy8gZXhjbHVkZXMgbG9vcGJhY2sgbmV0d29yayAwLjAuMC4wXG4gICAgICAgICAgLy8gZXhjbHVkZXMgcmVzZXJ2ZWQgc3BhY2UgPj0gMjI0LjAuMC4wXG4gICAgICAgICAgLy8gZXhjbHVkZXMgbmV0d29yayAmIGJyb2FjYXN0IGFkZHJlc3Nlc1xuICAgICAgICAgIC8vIChmaXJzdCAmIGxhc3QgSVAgYWRkcmVzcyBvZiBlYWNoIGNsYXNzKVxuICAgICAgICAgIFwiKD86WzEtOV1cXFxcZD98MVxcXFxkXFxcXGR8MlswMV1cXFxcZHwyMlswLTNdKVwiICtcbiAgICAgICAgICBcIig/OlxcXFwuKD86MT9cXFxcZHsxLDJ9fDJbMC00XVxcXFxkfDI1WzAtNV0pKXsyfVwiICtcbiAgICAgICAgICBcIig/OlxcXFwuKD86WzEtOV1cXFxcZD98MVxcXFxkXFxcXGR8MlswLTRdXFxcXGR8MjVbMC00XSkpXCIgK1xuICAgICAgICBcInxcIiArXG4gICAgICAgICAgLy8gaG9zdCBuYW1lXG4gICAgICAgICAgXCIoPzooPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0tKikqW2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldKylcIiArXG4gICAgICAgICAgLy8gZG9tYWluIG5hbWVcbiAgICAgICAgICBcIig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKlwiICtcbiAgICAgICAgICB0bGQgK1xuICAgICAgICBcIilcIiArXG4gICAgICAgIC8vIHBvcnQgbnVtYmVyXG4gICAgICAgIFwiKD86OlxcXFxkezIsNX0pP1wiICtcbiAgICAgICAgLy8gcmVzb3VyY2UgcGF0aFxuICAgICAgICBcIig/OlsvPyNdXFxcXFMqKT9cIiArXG4gICAgICBcIiRcIjtcblxuICAgICAgaWYgKGFsbG93RGF0YVVybCkge1xuICAgICAgICAvLyBSRkMgMjM5N1xuICAgICAgICB2YXIgbWVkaWFUeXBlID0gXCJcXFxcdytcXFxcL1stKy5cXFxcd10rKD86O1tcXFxcdz1dKykqXCI7XG4gICAgICAgIHZhciB1cmxjaGFyID0gXCJbQS1aYS16MC05LV8uIX5cXFxcKicoKTtcXFxcLz86QCY9KyQsJV0qXCI7XG4gICAgICAgIHZhciBkYXRhdXJsID0gXCJkYXRhOig/OlwiK21lZGlhVHlwZStcIik/KD86O2Jhc2U2NCk/LFwiK3VybGNoYXI7XG4gICAgICAgIHJlZ2V4ID0gXCIoPzpcIityZWdleCtcIil8KD86XlwiK2RhdGF1cmwrXCIkKVwiO1xuICAgICAgfVxuXG4gICAgICB2YXIgUEFUVEVSTiA9IG5ldyBSZWdFeHAocmVnZXgsICdpJyk7XG4gICAgICBpZiAoIVBBVFRFUk4uZXhlYyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG4gICAgfSxcbiAgICB0eXBlOiB2LmV4dGVuZChmdW5jdGlvbih2YWx1ZSwgb3JpZ2luYWxPcHRpb25zLCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXMsIGdsb2JhbE9wdGlvbnMpIHtcbiAgICAgIGlmICh2LmlzU3RyaW5nKG9yaWdpbmFsT3B0aW9ucykpIHtcbiAgICAgICAgb3JpZ2luYWxPcHRpb25zID0ge3R5cGU6IG9yaWdpbmFsT3B0aW9uc307XG4gICAgICB9XG5cbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMpO1xuXG4gICAgICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICAgIGlmICghdi5pc0RlZmluZWQodHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdHlwZSB3YXMgc3BlY2lmaWVkXCIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hlY2s7XG4gICAgICBpZiAodi5pc0Z1bmN0aW9uKHR5cGUpKSB7XG4gICAgICAgIGNoZWNrID0gdHlwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrID0gdGhpcy50eXBlc1t0eXBlXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF2LmlzRnVuY3Rpb24oY2hlY2spKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInZhbGlkYXRlLnZhbGlkYXRvcnMudHlwZS50eXBlcy5cIiArIHR5cGUgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoZWNrKHZhbHVlLCBvcHRpb25zLCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXMsIGdsb2JhbE9wdGlvbnMpKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gb3JpZ2luYWxPcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzW3R5cGVdIHx8XG4gICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgKHYuaXNGdW5jdGlvbih0eXBlKSA/IFwibXVzdCBiZSBvZiB0aGUgY29ycmVjdCB0eXBlXCIgOiBcIm11c3QgYmUgb2YgdHlwZSAle3R5cGV9XCIpO1xuXG4gICAgICAgIGlmICh2LmlzRnVuY3Rpb24obWVzc2FnZSkpIHtcbiAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSh2YWx1ZSwgb3JpZ2luYWxPcHRpb25zLCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXMsIGdsb2JhbE9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHYuZm9ybWF0KG1lc3NhZ2UsIHthdHRyaWJ1dGU6IHYucHJldHRpZnkoYXR0cmlidXRlKSwgdHlwZTogdHlwZX0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHR5cGVzOiB7XG4gICAgICAgIG9iamVjdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdi5pc09iamVjdCh2YWx1ZSkgJiYgIXYuaXNBcnJheSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFycmF5OiB2LmlzQXJyYXksXG4gICAgICAgIGludGVnZXI6IHYuaXNJbnRlZ2VyLFxuICAgICAgICBudW1iZXI6IHYuaXNOdW1iZXIsXG4gICAgICAgIHN0cmluZzogdi5pc1N0cmluZyxcbiAgICAgICAgZGF0ZTogdi5pc0RhdGUsXG4gICAgICAgIGJvb2xlYW46IHYuaXNCb29sZWFuXG4gICAgICB9LFxuICAgICAgbWVzc2FnZXM6IHt9XG4gICAgfSlcbiAgfTtcblxuICB2YWxpZGF0ZS5mb3JtYXR0ZXJzID0ge1xuICAgIGRldGFpbGVkOiBmdW5jdGlvbihlcnJvcnMpIHtyZXR1cm4gZXJyb3JzO30sXG4gICAgZmxhdDogdi5mbGF0dGVuRXJyb3JzVG9BcnJheSxcbiAgICBncm91cGVkOiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHZhciBhdHRyO1xuXG4gICAgICBlcnJvcnMgPSB2Lmdyb3VwRXJyb3JzQnlBdHRyaWJ1dGUoZXJyb3JzKTtcbiAgICAgIGZvciAoYXR0ciBpbiBlcnJvcnMpIHtcbiAgICAgICAgZXJyb3JzW2F0dHJdID0gdi5mbGF0dGVuRXJyb3JzVG9BcnJheShlcnJvcnNbYXR0cl0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9LFxuICAgIGNvbnN0cmFpbnQ6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgdmFyIGF0dHI7XG4gICAgICBlcnJvcnMgPSB2Lmdyb3VwRXJyb3JzQnlBdHRyaWJ1dGUoZXJyb3JzKTtcbiAgICAgIGZvciAoYXR0ciBpbiBlcnJvcnMpIHtcbiAgICAgICAgZXJyb3JzW2F0dHJdID0gZXJyb3JzW2F0dHJdLm1hcChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LnZhbGlkYXRvcjtcbiAgICAgICAgfSkuc29ydCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG4gIH07XG5cbiAgdmFsaWRhdGUuZXhwb3NlTW9kdWxlKHZhbGlkYXRlLCB0aGlzLCBleHBvcnRzLCBtb2R1bGUsIGRlZmluZSk7XG59KS5jYWxsKHRoaXMsXG4gICAgICAgIHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyA/IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGV4cG9ydHMgOiBudWxsLFxuICAgICAgICB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIG1vZHVsZSA6IG51bGwsXG4gICAgICAgIHR5cGVvZiBkZWZpbmUgIT09ICd1bmRlZmluZWQnID8gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZGVmaW5lIDogbnVsbCk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHR0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIiwiLyoqXG4gKiBXZWIgc2VydmVyIHNldHRpbmdzIG1vZHVsZS5cbiAqIEBuYW1lc3BhY2VcbiAqIEByZWFkb25seVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbk5hbWUgIC0gV2ViIHNlcnZlciBkb21haW4gbmFtZS9JUC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBob3N0ICAgICAgICAtIFdlYiBzZXJ2ZXIgaG9zdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhBZ2UgICAgICAtIENsaWVudCBtYXhpbXVtIHRpbWUgdG8gY2FjaGUgcmVzdWx0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHBvcnQgICAgICAgIC0gV2ViIHNlcnZlciBiaW5kaW5nIHBvcnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcHJvamVjdFJvb3QgLSBUaGlzIHZlcnkgcHJvamVjdCdzIHJvb3QgcGF0aC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwcm90b2NvbCAgICAtIFdlYiBzZXJ2ZXIgcHJvdG9jb2wsIGNhbiBiZSBlaXRoZXIgJ2h0dHAnIG9yICdodHRwcycuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc2VjcmV0ICAgICAgLSBzZWNyZXQga2V5IHVzZWQgdG8gc2lnbiBjb29raWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3RhdGljSG9zdCAgLSBTdGF0aWMgZmlsZSBzZXJ2ZXIgaG9zdC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IHdoaXRlTGlzdCAtIEFjY2VwdGFibGUgaG9zdCBsaXN0IGZvciBDb250ZW50IFNlY3VyaXR5IFBvbGljeS5cbiAqL1xuXG5jb25zdCBjb25maWcgPSB7XG4gICAgZG9tYWluTmFtZTogICdsb2NhbGhvc3QnLFxuICAgIGdldCBob3N0ICgpIHtcbiAgICAgICAgcmV0dXJuIGAkeyBjb25maWcucHJvdG9jb2wgfTovLyR7IGNvbmZpZy5kb21haW5OYW1lIH0ke1xuICAgICAgICAgICAgY29uZmlnLnBvcnQgPT09ICc4MCcgfHwgY29uZmlnLnBvcnQgPT09ICc0NDMnID9cbiAgICAgICAgICAgICAgICAnJyA6XG4gICAgICAgICAgICAgICAgYDokeyBjb25maWcucG9ydCB9YFxuICAgICAgICB9YDtcbiAgICB9LFxuICAgIG1heEFnZTogICAgICAxMDAwICogNjAgKiA2MCAqIDI0ICogNyxcbiAgICBwb3J0OiAgICAgICAgMzAwMCxcbiAgICBwcm9qZWN0Um9vdDogJycsXG4gICAgcHJvdG9jb2w6ICAgICdodHRwJyxcbiAgICBzZWNyZXQ6ICAgICAgJ2RlZXBlc3QgZGFya2VzdCBzZWNyZXQgb2YgbmNrdSBjc2llJyxcbiAgICBnZXQgc3RhdGljSG9zdCAoKSB7XG4gICAgICAgIHJldHVybiBgJHsgY29uZmlnLmhvc3QgfS9zdGF0aWNgO1xuICAgIH0sXG4gICAgd2hpdGVMaXN0OiBbXG4gICAgICAgICdsb2NhbGhvc3Q6MzAwMCcsXG4gICAgICAgICdsb2NhbGhvc3Q6MzAwMScsXG4gICAgICAgICd3d3cuY3NpZS5uY2t1LmVkdS50dycsXG4gICAgXSxcbn07XG5cbk9iamVjdC5mcmVlemUoIGNvbmZpZyApO1xuXG5leHBvcnQgY29uc3QgZG9tYWluTmFtZSA9IGNvbmZpZy5kb21haW5OYW1lO1xuZXhwb3J0IGNvbnN0IGhvc3QgPSBjb25maWcuaG9zdDtcbmV4cG9ydCBjb25zdCBtYXhBZ2UgPSBjb25maWcubWF4QWdlO1xuZXhwb3J0IGNvbnN0IHBvcnQgPSBjb25maWcucG9ydDtcbmV4cG9ydCBjb25zdCBwcm9qZWN0Um9vdCA9ICcvVXNlcnMvMDIxMGFteS9EZXNrdG9wL3NjaG9vbC93ZWIvTkNLVS1DU0lFLVdlYnNpdGUnO1xuZXhwb3J0IGNvbnN0IHByb3RvY29sID0gY29uZmlnLnByb3RvY29sO1xuZXhwb3J0IGNvbnN0IHNlY3JldCA9IGNvbmZpZy5zZWNyZXQ7XG5leHBvcnQgY29uc3Qgc3RhdGljSG9zdCA9IGNvbmZpZy5zdGF0aWNIb3N0O1xuZXhwb3J0IGNvbnN0IHdoaXRlTGlzdCA9IGNvbmZpZy53aGl0ZUxpc3Q7XG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG4iLCIvKipcbiAqIEBmaWxlIGhlYWRlciBldmVudCBtb2R1bGUuXG4gKiBAYXV0aG9yIFByb0ZhdFh1YW5BbGwgPFByb0ZhdFh1YW5BbGxAZ21haWwuY29tPlxuICogQHZlcnNpb24gMS4wLjBcbiAqIEBzaW5jZSAxLjAuMFxuICovXG5cbmltcG9ydCB7IGNsYXNzQWRkLCBjbGFzc1JlbW92ZSwgfSBmcm9tICdzdGF0aWMvc3JjL2pzL3V0aWxzL3N0eWxlLmpzJztcbmltcG9ydCBWYWxpZGF0ZVV0aWxzIGZyb20gJ21vZGVscy9jb21tb24vdXRpbHMvdmFsaWRhdGUuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHZXRIZWFkZXJCYXNlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0XG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gb3B0LmhlYWRlckRPTVxuICAgICAqL1xuXG4gICAgY29uc3RydWN0b3IgKCBvcHQgKSB7XG4gICAgICAgIG9wdCA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhb3B0LmhlYWRlckRPTSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCBvcHQuaGVhZGVyRE9NICkgfHxcbiAgICAgICAgICAgIG9wdC5hbGxIZWFkZXJET01zLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgIUFycmF5LmZyb20oIG9wdC5hbGxIZWFkZXJET01zICkuZXZlcnkoIFZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50IClcbiAgICAgICAgKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvciggJ2ludmFsaWQgYXJndW1lbnRzJyApO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlckVsZW1lbnRRdWVyeVNlbGVjdG9yID0gZWxlbWVudCA9PiBgLmhlYWRlciA+IC5oZWFkZXJfXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IGhlYWRlckJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBoZWFkZXJFbGVtZW50UXVlcnlTZWxlY3RvciggYmxvY2sgKSB9LiR7IGJsb2NrIH1gO1xuICAgICAgICBjb25zdCBuYXZpZ2F0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IgPSBlbGVtZW50ID0+IGAkeyBoZWFkZXJCbG9ja1F1ZXJ5U2VsZWN0b3IoICduYXZpZ2F0aW9uJyApIH0gPiAubmF2aWdhdGlvbl9fJHsgZWxlbWVudCB9YDtcbiAgICAgICAgY29uc3QgbmF2aWdhdGlvbkJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBuYXZpZ2F0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IoIGJsb2NrICkgfS4keyBibG9jayB9YDtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VFbGVtZW50UXVlcnlTZWxlY3RvciA9IGVsZW1lbnQgPT4gYCR7IG5hdmlnYXRpb25CbG9ja1F1ZXJ5U2VsZWN0b3IoICdsYW5ndWFnZScgKSB9ID4gLmxhbmd1YWdlX18keyBlbGVtZW50IH1gO1xuICAgICAgICBjb25zdCBsYW5ndWFnZUJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBsYW5ndWFnZUVsZW1lbnRRdWVyeVNlbGVjdG9yKCBibG9jayApIH0uJHsgYmxvY2sgfWA7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtTW9kaWZpZXJzID0gW1xuICAgICAgICAgICAgJ2Fib3V0JyxcbiAgICAgICAgICAgICdyZXNlYXJjaCcsXG4gICAgICAgICAgICAnc3R1ZGVudCcsXG4gICAgICAgICAgICAnYW5ub3VuY2VtZW50JyxcbiAgICAgICAgICAgICdyZXNvdXJjZScsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGxpc3RRdWVyeVNlbGVjdG9yID0gbW9kaWZpZXIgPT4gYCR7IG5hdmlnYXRpb25CbG9ja1F1ZXJ5U2VsZWN0b3IoICdsaXN0JyApIH0gPiAubGlzdF9faXRlbS5pdGVtLmxpc3RfX2l0ZW0tLSR7IG1vZGlmaWVyIH1gO1xuICAgICAgICBjb25zdCBsaXN0SXRlbUVsZW1lbnRRdWVyeVNlbGVjdG9yID0gKCBlbGVtZW50LCBtb2RpZmllciApID0+IGAkeyBsaXN0UXVlcnlTZWxlY3RvciggbW9kaWZpZXIgKSB9ID4gLml0ZW1fXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtQmxvY2tRdWVyeVNlbGVjdG9yID0gKCBibG9jaywgbW9kaWZpZXIgKSA9PiBgJHsgbGlzdEl0ZW1FbGVtZW50UXVlcnlTZWxlY3RvciggYmxvY2ssIG1vZGlmaWVyICkgfS4keyBibG9jayB9YDtcblxuICAgICAgICB0aGlzLkRPTSA9IHtcbiAgICAgICAgICAgIGhlYWRlcjogICAgICAgICBvcHQuaGVhZGVyRE9NLFxuICAgICAgICAgICAgYWxsTmF2aWdhdGlvbnM6IEFycmF5LmZyb20oIG9wdC5hbGxIZWFkZXJET01zIClcbiAgICAgICAgICAgIC5tYXAoIGhlYWRlciA9PiBoZWFkZXIucXVlcnlTZWxlY3RvciggaGVhZGVyQmxvY2tRdWVyeVNlbGVjdG9yKCAnbmF2aWdhdGlvbicgKSApICksXG4gICAgICAgICAgICBtZW51OiAgICAgICAgICAgb3B0LmhlYWRlckRPTS5xdWVyeVNlbGVjdG9yKCBoZWFkZXJFbGVtZW50UXVlcnlTZWxlY3RvciggJ21lbnUnICkgKSxcbiAgICAgICAgICAgIG5hdmlnYXRpb246ICAgICBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIGhlYWRlckJsb2NrUXVlcnlTZWxlY3RvciggJ25hdmlnYXRpb24nICkgKSxcbiAgICAgICAgICAgIGNhbmNlbDogICAgICAgICBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIG5hdmlnYXRpb25FbGVtZW50UXVlcnlTZWxlY3RvciggJ2NhbmNlbCcgKSApLFxuICAgICAgICAgICAgaXRlbTogICAgICAgICAgIGxpc3RJdGVtTW9kaWZpZXJzLm1hcCggbW9kaWZpZXIgPT4gKCB7XG4gICAgICAgICAgICAgICAgc3dpdGNoOiAgICBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIGxpc3RJdGVtRWxlbWVudFF1ZXJ5U2VsZWN0b3IoICdzd2l0Y2gnLCBtb2RpZmllciApICksXG4gICAgICAgICAgICAgICAgc3dpdGNoZXM6ICBBcnJheS5mcm9tKCBvcHQuYWxsSGVhZGVyRE9NcyApXG4gICAgICAgICAgICAgICAgLm1hcCggaGVhZGVyID0+IGhlYWRlci5xdWVyeVNlbGVjdG9yKCBsaXN0SXRlbUVsZW1lbnRRdWVyeVNlbGVjdG9yKCAnc3dpdGNoJywgbW9kaWZpZXIgKSApIClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKCBzd2l0Y2hET00gPT4gc3dpdGNoRE9NICE9PSBudWxsICksXG4gICAgICAgICAgICAgICAgZHJvcGRvd25zOiBBcnJheS5mcm9tKCBvcHQuYWxsSGVhZGVyRE9NcyApXG4gICAgICAgICAgICAgICAgLm1hcCggaGVhZGVyID0+IGhlYWRlci5xdWVyeVNlbGVjdG9yKCBsaXN0SXRlbUJsb2NrUXVlcnlTZWxlY3RvciggJ2Ryb3Bkb3duJywgbW9kaWZpZXIgKSApIClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKCBkcm9wZG93bkRPTSA9PiBkcm9wZG93bkRPTSAhPT0gbnVsbCApLFxuICAgICAgICAgICAgfSApIClcbiAgICAgICAgICAgIC5maWx0ZXIoIGl0ZW1PYmogPT4gaXRlbU9iai5zd2l0Y2ggIT09IG51bGwgKSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoOiAgICBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIGxhbmd1YWdlRWxlbWVudFF1ZXJ5U2VsZWN0b3IoICdzd2l0Y2gnICkgKSxcbiAgICAgICAgICAgICAgICBzd2l0Y2hlczogIEFycmF5LmZyb20oIG9wdC5hbGxIZWFkZXJET01zIClcbiAgICAgICAgICAgICAgICAubWFwKCBoZWFkZXIgPT4gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoIGxhbmd1YWdlRWxlbWVudFF1ZXJ5U2VsZWN0b3IoICdzd2l0Y2gnICkgKSApXG4gICAgICAgICAgICAgICAgLmZpbHRlciggc3dpdGNoRE9NID0+IHN3aXRjaERPTSAhPT0gbnVsbCApLFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duczogQXJyYXkuZnJvbSggb3B0LmFsbEhlYWRlckRPTXMgKVxuICAgICAgICAgICAgICAgIC5tYXAoIGhlYWRlciA9PiBoZWFkZXIucXVlcnlTZWxlY3RvciggbGFuZ3VhZ2VCbG9ja1F1ZXJ5U2VsZWN0b3IoICdkcm9wZG93bicgKSApIClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKCBkcm9wZG93bkRPTSA9PiBkcm9wZG93bkRPTSAhPT0gbnVsbCApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQoIHRoaXMuRE9NLm1lbnUgKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCB0aGlzLkRPTS5jYW5jZWwgKSB8fFxuICAgICAgICAgICAgIXRoaXMuRE9NLml0ZW0ubGVuZ3RoIHx8XG4gICAgICAgICAgICAhdGhpcy5ET00uaXRlbS5ldmVyeSggaXRlbU9iaiA9PiBWYWxpZGF0ZVV0aWxzLmlzRG9tRWxlbWVudCggaXRlbU9iai5zd2l0Y2ggKSAmJlxuICAgICAgICAgICAgICAgIGl0ZW1PYmouZHJvcGRvd25zLmV2ZXJ5KCBWYWxpZGF0ZVV0aWxzLmlzRG9tRWxlbWVudCApICYmXG4gICAgICAgICAgICAgICAgaXRlbU9iai5kcm9wZG93bnMubGVuZ3RoICE9PSAwICkgfHxcbiAgICAgICAgICAgICFWYWxpZGF0ZVV0aWxzLmlzRG9tRWxlbWVudCggdGhpcy5ET00ubGFuZ3VhZ2Uuc3dpdGNoICkgfHxcbiAgICAgICAgICAgICF0aGlzLkRPTS5sYW5ndWFnZS5zd2l0Y2hlcy5sZW5ndGggfHxcbiAgICAgICAgICAgICF0aGlzLkRPTS5sYW5ndWFnZS5zd2l0Y2hlcy5ldmVyeSggVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQgKSB8fFxuICAgICAgICAgICAgIXRoaXMuRE9NLmxhbmd1YWdlLmRyb3Bkb3ducy5sZW5ndGggfHxcbiAgICAgICAgICAgICF0aGlzLkRPTS5sYW5ndWFnZS5kcm9wZG93bnMuZXZlcnkoIFZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50IClcbiAgICAgICAgKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnRE9NIG5vdCBmb3VuZC4nICk7XG5cbiAgICAgICAgdGhpcy5zdWJzY3JpYmVNZW51RXZlbnQoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVEcm9wZG93bkV2ZW50KCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlTGFuZ3VhZ2VFdmVudCgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZVNjcm9sbEV2ZW50KCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlTWVudUV2ZW50ICgpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZXZlbnQgKSA9PiB7XG4gICAgICAgICAgICBpZiAoIGV2ZW50LnRhcmdldCAhPT0gdGhpcy5ET00ubWVudSAmJlxuICAgICAgICAgICAgICAgICAhdGhpcy5ET00ubmF2aWdhdGlvbi5jb250YWlucyggZXZlbnQudGFyZ2V0ICkgJiZcbiAgICAgICAgICAgICAgICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUoIHRoaXMuRE9NLmhlYWRlciApLmRpc3BsYXkgIT09ICdub25lJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ET00uYWxsTmF2aWdhdGlvbnMuZm9yRWFjaCggKCBuYXZpZ2F0aW9uRE9NICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc1JlbW92ZSggbmF2aWdhdGlvbkRPTSwgJ2hlYWRlcl9fbmF2aWdhdGlvbi0tYWN0aXZlJyApO1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHRoaXMuRE9NLm1lbnUuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ET00uYWxsTmF2aWdhdGlvbnMuZm9yRWFjaCggKCBuYXZpZ2F0aW9uRE9NICkgPT4ge1xuICAgICAgICAgICAgICAgIGNsYXNzQWRkKCBuYXZpZ2F0aW9uRE9NLCAnaGVhZGVyX19uYXZpZ2F0aW9uLS1hY3RpdmUnICk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICB0aGlzLkRPTS5jYW5jZWwuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ET00uYWxsTmF2aWdhdGlvbnMuZm9yRWFjaCggKCBuYXZpZ2F0aW9uRE9NICkgPT4ge1xuICAgICAgICAgICAgICAgIGNsYXNzUmVtb3ZlKCBuYXZpZ2F0aW9uRE9NLCAnaGVhZGVyX19uYXZpZ2F0aW9uLS1hY3RpdmUnICk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICBzdWJzY3JpYmVEcm9wZG93bkV2ZW50ICgpIHtcbiAgICAgICAgdGhpcy5ET00uaXRlbS5mb3JFYWNoKCAoIGl0ZW1PYmogKSA9PiB7XG4gICAgICAgICAgICBpdGVtT2JqLnN3aXRjaC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCBpdGVtT2JqLnN3aXRjaC5jbGFzc0xpc3QuY29udGFpbnMoICdpdGVtX19zd2l0Y2gtLWFjdGl2ZScgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbU9iai5zd2l0Y2hlcy5mb3JFYWNoKCBzd2l0Y2hET00gPT4gY2xhc3NSZW1vdmUoIHN3aXRjaERPTSwgJ2l0ZW1fX3N3aXRjaC0tYWN0aXZlJyApICk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1PYmouZHJvcGRvd25zLmZvckVhY2goIGRyb3Bkb3duRE9NID0+IGNsYXNzUmVtb3ZlKCBkcm9wZG93bkRPTSwgJ2l0ZW1fX2Ryb3Bkb3duLS1vcGVuJyApICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5pdGVtLmZvckVhY2goICggaXRlbU9iaiApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1PYmouc3dpdGNoZXMuZm9yRWFjaCggc3dpdGNoRE9NID0+IGNsYXNzUmVtb3ZlKCBzd2l0Y2hET00sICdpdGVtX19zd2l0Y2gtLWFjdGl2ZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbU9iai5kcm9wZG93bnMuZm9yRWFjaCggZHJvcGRvd25ET00gPT4gY2xhc3NSZW1vdmUoIGRyb3Bkb3duRE9NLCAnaXRlbV9fZHJvcGRvd24tLW9wZW4nICkgKTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBpdGVtT2JqLnN3aXRjaGVzLmZvckVhY2goIHN3aXRjaERPTSA9PiBjbGFzc0FkZCggc3dpdGNoRE9NLCAnaXRlbV9fc3dpdGNoLS1hY3RpdmUnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbU9iai5kcm9wZG93bnMuZm9yRWFjaCggZHJvcGRvd25ET00gPT4gY2xhc3NBZGQoIGRyb3Bkb3duRE9NLCAnaXRlbV9fZHJvcGRvd24tLW9wZW4nICkgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICBzdWJzY3JpYmVMYW5ndWFnZUV2ZW50ICgpIHtcbiAgICAgICAgdGhpcy5ET00ubGFuZ3VhZ2Uuc3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICggdGhpcy5ET00ubGFuZ3VhZ2Uuc3dpdGNoLmNsYXNzTGlzdC5jb250YWlucyggJ2xhbmd1YWdlX19zd2l0Y2gtLWFjdGl2ZScgKSApIHtcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5sYW5ndWFnZS5kcm9wZG93bnMuZm9yRWFjaCggZHJvcGRvd25ET00gPT4gY2xhc3NSZW1vdmUoIGRyb3Bkb3duRE9NLCAnbGFuZ3VhZ2VfX2Ryb3Bkb3duLS1vcGVuJyApICk7XG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubGFuZ3VhZ2Uuc3dpdGNoZXMuZm9yRWFjaCggc3dpdGNoRE9NID0+IGNsYXNzUmVtb3ZlKCBzd2l0Y2hET00sICdsYW5ndWFnZV9fc3dpdGNoLS1hY3RpdmUnICkgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmxhbmd1YWdlLmRyb3Bkb3ducy5mb3JFYWNoKCBkcm9wZG93bkRPTSA9PiBjbGFzc0FkZCggZHJvcGRvd25ET00sICdsYW5ndWFnZV9fZHJvcGRvd24tLW9wZW4nICkgKTtcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5sYW5ndWFnZS5zd2l0Y2hlcy5mb3JFYWNoKCBzd2l0Y2hET00gPT4gY2xhc3NBZGQoIHN3aXRjaERPTSwgJ2xhbmd1YWdlX19zd2l0Y2gtLWFjdGl2ZScgKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlU2Nyb2xsRXZlbnQgKCkge1xuICAgICAgICBsZXQgcHJldlNjcm9sbHBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2Nyb2xsUG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgaWYgKCBwcmV2U2Nyb2xscG9zIDwgY3VycmVudFNjcm9sbFBvcyAmJiBjdXJyZW50U2Nyb2xsUG9zID4gOTEgKVxuICAgICAgICAgICAgICAgIGNsYXNzQWRkKCB0aGlzLkRPTS5oZWFkZXIsICdoZWFkZXItLWFjdGl2ZScgKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjbGFzc1JlbW92ZSggdGhpcy5ET00uaGVhZGVyLCAnaGVhZGVyLS1hY3RpdmUnICk7XG5cbiAgICAgICAgICAgIGlmICggY3VycmVudFNjcm9sbFBvcyA+IDkxIClcbiAgICAgICAgICAgICAgICBjbGFzc0FkZCggdGhpcy5ET00uaGVhZGVyLCAnaGVhZGVyLS1maXhlZCcgKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjbGFzc1JlbW92ZSggdGhpcy5ET00uaGVhZGVyLCAnaGVhZGVyLS1maXhlZCcgKTtcbiAgICAgICAgICAgIHByZXZTY3JvbGxwb3MgPSBjdXJyZW50U2Nyb2xsUG9zO1xuICAgICAgICB9ICk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBAZmlsZSBoZWFkZXIgZXZlbnQgbW9kdWxlLlxuICogQGF1dGhvciBQcm9GYXRYdWFuQWxsIDxQcm9GYXRYdWFuQWxsQGdtYWlsLmNvbT5cbiAqIEB2ZXJzaW9uIDEuMC4wXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuXG5pbXBvcnQgeyBjbGFzc0FkZCwgY2xhc3NSZW1vdmUsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9zdHlsZS5qcyc7XG5pbXBvcnQgVmFsaWRhdGVVdGlscyBmcm9tICdtb2RlbHMvY29tbW9uL3V0aWxzL3ZhbGlkYXRlLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2V0SGVhZGVyTGFyZ2Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHQuaGVhZGVyRE9NXG4gICAgICovXG5cbiAgICBjb25zdHJ1Y3RvciAoIG9wdCApIHtcbiAgICAgICAgb3B0ID0gb3B0IHx8IHt9O1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFvcHQuaGVhZGVyRE9NIHx8XG4gICAgICAgICAgICAhVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQoIG9wdC5oZWFkZXJET00gKVxuICAgICAgICApXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCAnaW52YWxpZCBhcmd1bWVudHMnICk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyRWxlbWVudFF1ZXJ5U2VsZWN0b3IgPSBlbGVtZW50ID0+IGAuaGVhZGVyID4gLmhlYWRlcl9fJHsgZWxlbWVudCB9YDtcbiAgICAgICAgY29uc3QgaGVhZGVyQmxvY2tRdWVyeVNlbGVjdG9yID0gYmxvY2sgPT4gYCR7IGhlYWRlckVsZW1lbnRRdWVyeVNlbGVjdG9yKCBibG9jayApIH0uJHsgYmxvY2sgfWA7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IgPSBlbGVtZW50ID0+IGAkeyBoZWFkZXJCbG9ja1F1ZXJ5U2VsZWN0b3IoICdmdW5jdGlvbnMnICkgfSA+IC5mdW5jdGlvbnNfXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uQmxvY2tRdWVyeVNlbGVjdG9yID0gYmxvY2sgPT4gYCR7IGZ1bmN0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IoIGJsb2NrICkgfS4keyBibG9jayB9YDtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25SaWdodEVsZW1lbnRRdWVyeVNlbGVjdG9yID0gZWxlbWVudCA9PiBgJHsgZnVuY3Rpb25CbG9ja1F1ZXJ5U2VsZWN0b3IoICdyaWdodCcgKSB9ID4gLnJpZ2h0X18keyBlbGVtZW50IH1gO1xuICAgICAgICBjb25zdCBmdW5jdGlvblJpZ2h0QmxvY2tRdWVyeVNlbGVjdG9yID0gYmxvY2sgPT4gYCR7IGZ1bmN0aW9uUmlnaHRFbGVtZW50UXVlcnlTZWxlY3RvciggYmxvY2sgKSB9LiR7IGJsb2NrIH1gO1xuICAgICAgICBjb25zdCBzZWFyY2hFbGVtZW50UXVlcnlTZWxlY3RvciA9IGVsZW1lbnQgPT4gYCR7IGZ1bmN0aW9uUmlnaHRCbG9ja1F1ZXJ5U2VsZWN0b3IoICdzZWFyY2gnICkgfSA+IC5zZWFyY2hfXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IHNlYXJjaEJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBzZWFyY2hFbGVtZW50UXVlcnlTZWxlY3RvciggYmxvY2sgKSB9LiR7IGJsb2NrIH1gO1xuICAgICAgICBjb25zdCBsYW5ndWFnZUVsZW1lbnRRdWVyeVNlbGVjdG9yID0gZWxlbWVudCA9PiBgJHsgZnVuY3Rpb25SaWdodEJsb2NrUXVlcnlTZWxlY3RvciggJ2xhbmd1YWdlJyApIH0gPiAubGFuZ3VhZ2VfXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlQmxvY2tRdWVyeVNlbGVjdG9yID0gYmxvY2sgPT4gYCR7IGxhbmd1YWdlRWxlbWVudFF1ZXJ5U2VsZWN0b3IoIGJsb2NrICkgfS4keyBibG9jayB9YDtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VCdXR0b25FbGVtZW50UXVlcnlTZWxlY3RvciA9IGVsZW1lbnQgPT4gYCR7IGxhbmd1YWdlQmxvY2tRdWVyeVNlbGVjdG9yKCAnYnV0dG9uJyApIH0gPiAuYnV0dG9uX18keyBlbGVtZW50IH1gO1xuXG4gICAgICAgIHRoaXMuRE9NID0ge1xuICAgICAgICAgICAgaGVhZGVyOiAgICAgICAgIG9wdC5oZWFkZXJET00sXG4gICAgICAgICAgICBsYW5ndWFnZTogICAgICAge1xuICAgICAgICAgICAgICAgIGJ1dHRvbjogICBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIGxhbmd1YWdlQmxvY2tRdWVyeVNlbGVjdG9yKCAnYnV0dG9uJyApICksXG4gICAgICAgICAgICAgICAgZHJvcGRvd246IG9wdC5oZWFkZXJET00ucXVlcnlTZWxlY3RvciggbGFuZ3VhZ2VCdXR0b25FbGVtZW50UXVlcnlTZWxlY3RvciggJ2Ryb3Bkb3duJyApICksXG4gICAgICAgICAgICAgICAgYWN0aXZlOiAgIGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlYXJjaDoge1xuICAgICAgICAgICAgICAgIGJ1dHRvbjogICBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIHNlYXJjaEJsb2NrUXVlcnlTZWxlY3RvciggJ2J1dHRvbicgKSApLFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duOiBvcHQuaGVhZGVyRE9NLnF1ZXJ5U2VsZWN0b3IoIHNlYXJjaEJsb2NrUXVlcnlTZWxlY3RvciggJ2Ryb3Bkb3duJyApICksXG4gICAgICAgICAgICAgICAgY2FuY2VsOiAgIG9wdC5oZWFkZXJET00ucXVlcnlTZWxlY3RvciggYCR7IHNlYXJjaEJsb2NrUXVlcnlTZWxlY3RvciggJ2Ryb3Bkb3duJyApIH0gPiAuZHJvcGRvd25fX2NhbmNlbGAgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCB0aGlzLkRPTS5sYW5ndWFnZS5idXR0b24gKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCB0aGlzLkRPTS5sYW5ndWFnZS5kcm9wZG93biApIHx8XG4gICAgICAgICAgICAhVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQoIHRoaXMuRE9NLnNlYXJjaC5idXR0b24gKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCB0aGlzLkRPTS5zZWFyY2guZHJvcGRvd24gKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCB0aGlzLkRPTS5zZWFyY2guY2FuY2VsIClcbiAgICAgICAgKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnRE9NIG5vdCBmb3VuZC4nICk7XG5cbiAgICAgICAgdGhpcy5zdWJzY3JpYmVMYW5ndWFnZUV2ZW50KCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlU2VhcmNoRXZlbnQoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVTY3JvbGxFdmVudCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHN1YnNjcmliZUxhbmd1YWdlRXZlbnQgKCkge1xuICAgICAgICB0aGlzLkRPTS5sYW5ndWFnZS5idXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCB0aGlzLkRPTS5sYW5ndWFnZS5hY3RpdmUgKVxuICAgICAgICAgICAgICAgIGNsYXNzUmVtb3ZlKCB0aGlzLkRPTS5sYW5ndWFnZS5kcm9wZG93biwgJ2J1dHRvbl9fZHJvcGRvd24tLWFjdGl2ZScgKTtcblxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNsYXNzQWRkKCB0aGlzLkRPTS5sYW5ndWFnZS5kcm9wZG93biwgJ2J1dHRvbl9fZHJvcGRvd24tLWFjdGl2ZScgKTtcblxuICAgICAgICAgICAgdGhpcy5ET00ubGFuZ3VhZ2UuYWN0aXZlID0gIXRoaXMuRE9NLmxhbmd1YWdlLmFjdGl2ZTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHN1YnNjcmliZVNlYXJjaEV2ZW50ICgpIHtcbiAgICAgICAgdGhpcy5ET00uc2VhcmNoLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjbGFzc0FkZCggdGhpcy5ET00uc2VhcmNoLmRyb3Bkb3duLCAnc2VhcmNoX19kcm9wZG93bi0tYWN0aXZlJyApO1xuICAgICAgICB9ICk7XG4gICAgICAgIHRoaXMuRE9NLnNlYXJjaC5jYW5jZWwuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY2xhc3NSZW1vdmUoIHRoaXMuRE9NLnNlYXJjaC5kcm9wZG93biwgJ3NlYXJjaF9fZHJvcGRvd24tLWFjdGl2ZScgKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHN1YnNjcmliZVNjcm9sbEV2ZW50ICgpIHtcbiAgICAgICAgbGV0IHByZXZTY3JvbGxwb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAnc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNjcm9sbFBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgICAgIGlmICggcHJldlNjcm9sbHBvcyA8IGN1cnJlbnRTY3JvbGxQb3MgJiYgY3VycmVudFNjcm9sbFBvcyA+IDcwIClcbiAgICAgICAgICAgICAgICBjbGFzc0FkZCggdGhpcy5ET00uaGVhZGVyLCAnaGVhZGVyLS1hY3RpdmUnICk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2xhc3NSZW1vdmUoIHRoaXMuRE9NLmhlYWRlciwgJ2hlYWRlci0tYWN0aXZlJyApO1xuXG4gICAgICAgICAgICBpZiAoIGN1cnJlbnRTY3JvbGxQb3MgPiA3MCApXG4gICAgICAgICAgICAgICAgY2xhc3NBZGQoIHRoaXMuRE9NLmhlYWRlciwgJ2hlYWRlci0tZml4ZWQnICk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2xhc3NSZW1vdmUoIHRoaXMuRE9NLmhlYWRlciwgJ2hlYWRlci0tZml4ZWQnICk7XG4gICAgICAgICAgICBwcmV2U2Nyb2xscG9zID0gY3VycmVudFNjcm9sbFBvcztcbiAgICAgICAgfSApO1xuICAgIH1cbn1cblxuIiwiLyoqXG4gKiBAZmlsZSBoZWFkZXIgZXZlbnQgbW9kdWxlLlxuICogQGF1dGhvciBQcm9GYXRYdWFuQWxsIDxQcm9GYXRYdWFuQWxsQGdtYWlsLmNvbT5cbiAqIEB2ZXJzaW9uIDEuMC4wXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuXG5pbXBvcnQgeyBjbGFzc0FkZCwgY2xhc3NSZW1vdmUsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9zdHlsZS5qcyc7XG5pbXBvcnQgVmFsaWRhdGVVdGlscyBmcm9tICdtb2RlbHMvY29tbW9uL3V0aWxzL3ZhbGlkYXRlLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2V0SGVhZGVyTWVkaXVtIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0XG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gb3B0LmhlYWRlckRPTVxuICAgICAqL1xuXG4gICAgY29uc3RydWN0b3IgKCBvcHQgKSB7XG4gICAgICAgIG9wdCA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhb3B0LmhlYWRlckRPTSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCBvcHQuaGVhZGVyRE9NICkgfHxcbiAgICAgICAgICAgIG9wdC5hbGxIZWFkZXJET01zLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgIUFycmF5LmZyb20oIG9wdC5hbGxIZWFkZXJET01zICkuZXZlcnkoIFZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50IClcbiAgICAgICAgKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvciggJ2ludmFsaWQgYXJndW1lbnRzJyApO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlckVsZW1lbnRRdWVyeVNlbGVjdG9yID0gZWxlbWVudCA9PiBgLmhlYWRlciA+IC5oZWFkZXJfXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IGhlYWRlckJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBoZWFkZXJFbGVtZW50UXVlcnlTZWxlY3RvciggYmxvY2sgKSB9LiR7IGJsb2NrIH1gO1xuICAgICAgICBjb25zdCBuYXZpZ2F0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IgPSBlbGVtZW50ID0+IGAkeyBoZWFkZXJCbG9ja1F1ZXJ5U2VsZWN0b3IoICduYXZpZ2F0aW9uJyApIH0gPiAubmF2aWdhdGlvbl9fJHsgZWxlbWVudCB9YDtcbiAgICAgICAgY29uc3QgbmF2aWdhdGlvbkJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBuYXZpZ2F0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IoIGJsb2NrICkgfS4keyBibG9jayB9YDtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VFbGVtZW50UXVlcnlTZWxlY3RvciA9IGVsZW1lbnQgPT4gYCR7IG5hdmlnYXRpb25CbG9ja1F1ZXJ5U2VsZWN0b3IoICdsYW5ndWFnZScgKSB9ID4gLmxhbmd1YWdlX18keyBlbGVtZW50IH1gO1xuICAgICAgICBjb25zdCBsYW5ndWFnZUJsb2NrUXVlcnlTZWxlY3RvciA9IGJsb2NrID0+IGAkeyBsYW5ndWFnZUVsZW1lbnRRdWVyeVNlbGVjdG9yKCBibG9jayApIH0uJHsgYmxvY2sgfWA7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtTW9kaWZpZXJzID0gW1xuICAgICAgICAgICAgJ2Fib3V0JyxcbiAgICAgICAgICAgICdyZXNlYXJjaCcsXG4gICAgICAgICAgICAnc3R1ZGVudCcsXG4gICAgICAgICAgICAnYW5ub3VuY2VtZW50JyxcbiAgICAgICAgICAgICdyZXNvdXJjZScsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGxpc3RRdWVyeVNlbGVjdG9yID0gbW9kaWZpZXIgPT4gYCR7IG5hdmlnYXRpb25CbG9ja1F1ZXJ5U2VsZWN0b3IoICdsaXN0JyApIH0gPiAubGlzdF9faXRlbS5pdGVtLmxpc3RfX2l0ZW0tLSR7IG1vZGlmaWVyIH1gO1xuICAgICAgICBjb25zdCBsaXN0SXRlbUVsZW1lbnRRdWVyeVNlbGVjdG9yID0gKCBlbGVtZW50LCBtb2RpZmllciApID0+IGAkeyBsaXN0UXVlcnlTZWxlY3RvciggbW9kaWZpZXIgKSB9ID4gLml0ZW1fXyR7IGVsZW1lbnQgfWA7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtQmxvY2tRdWVyeVNlbGVjdG9yID0gKCBibG9jaywgbW9kaWZpZXIgKSA9PiBgJHsgbGlzdEl0ZW1FbGVtZW50UXVlcnlTZWxlY3RvciggYmxvY2ssIG1vZGlmaWVyICkgfS4keyBibG9jayB9YDtcblxuICAgICAgICB0aGlzLkRPTSA9IHtcbiAgICAgICAgICAgIGhlYWRlcjogICAgICAgICBvcHQuaGVhZGVyRE9NLFxuICAgICAgICAgICAgYWxsTmF2aWdhdGlvbnM6IEFycmF5LmZyb20oIG9wdC5hbGxIZWFkZXJET01zICkubWFwKCBoZWFkZXIgPT4gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoIGhlYWRlckJsb2NrUXVlcnlTZWxlY3RvciggJ25hdmlnYXRpb24nICkgKSApLFxuICAgICAgICAgICAgbWVudTogICAgICAgICAgIG9wdC5oZWFkZXJET00ucXVlcnlTZWxlY3RvciggaGVhZGVyRWxlbWVudFF1ZXJ5U2VsZWN0b3IoICdtZW51JyApICksXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiAgICAgb3B0LmhlYWRlckRPTS5xdWVyeVNlbGVjdG9yKCBoZWFkZXJCbG9ja1F1ZXJ5U2VsZWN0b3IoICduYXZpZ2F0aW9uJyApICksXG4gICAgICAgICAgICBjYW5jZWw6ICAgICAgICAgb3B0LmhlYWRlckRPTS5xdWVyeVNlbGVjdG9yKCBuYXZpZ2F0aW9uRWxlbWVudFF1ZXJ5U2VsZWN0b3IoICdjYW5jZWwnICkgKSxcbiAgICAgICAgICAgIGl0ZW06ICAgICAgICAgICBsaXN0SXRlbU1vZGlmaWVycy5tYXAoIG1vZGlmaWVyID0+ICgge1xuICAgICAgICAgICAgICAgIHN3aXRjaDogICAgb3B0LmhlYWRlckRPTS5xdWVyeVNlbGVjdG9yKCBsaXN0SXRlbUVsZW1lbnRRdWVyeVNlbGVjdG9yKCAnc3dpdGNoJywgbW9kaWZpZXIgKSApLFxuICAgICAgICAgICAgICAgIHN3aXRjaGVzOiAgQXJyYXkuZnJvbSggb3B0LmFsbEhlYWRlckRPTXMgKVxuICAgICAgICAgICAgICAgIC5tYXAoIGhlYWRlciA9PiBoZWFkZXIucXVlcnlTZWxlY3RvciggbGlzdEl0ZW1FbGVtZW50UXVlcnlTZWxlY3RvciggJ3N3aXRjaCcsIG1vZGlmaWVyICkgKSApXG4gICAgICAgICAgICAgICAgLmZpbHRlciggc3dpdGNoRE9NID0+IHN3aXRjaERPTSAhPT0gbnVsbCApLFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duczogQXJyYXkuZnJvbSggb3B0LmFsbEhlYWRlckRPTXMgKVxuICAgICAgICAgICAgICAgIC5tYXAoIGhlYWRlciA9PiBoZWFkZXIucXVlcnlTZWxlY3RvciggbGlzdEl0ZW1CbG9ja1F1ZXJ5U2VsZWN0b3IoICdkcm9wZG93bicsIG1vZGlmaWVyICkgKSApXG4gICAgICAgICAgICAgICAgLmZpbHRlciggZHJvcGRvd25ET00gPT4gZHJvcGRvd25ET00gIT09IG51bGwgKSxcbiAgICAgICAgICAgIH0gKSApXG4gICAgICAgICAgICAuZmlsdGVyKCBpdGVtT2JqID0+IGl0ZW1PYmouc3dpdGNoICE9PSBudWxsICksXG4gICAgICAgICAgICBsYW5ndWFnZToge1xuICAgICAgICAgICAgICAgIHN3aXRjaDogICAgb3B0LmhlYWRlckRPTS5xdWVyeVNlbGVjdG9yKCBsYW5ndWFnZUVsZW1lbnRRdWVyeVNlbGVjdG9yKCAnc3dpdGNoJyApICksXG4gICAgICAgICAgICAgICAgc3dpdGNoZXM6ICBBcnJheS5mcm9tKCBvcHQuYWxsSGVhZGVyRE9NcyApXG4gICAgICAgICAgICAgICAgLm1hcCggaGVhZGVyID0+IGhlYWRlci5xdWVyeVNlbGVjdG9yKCBsYW5ndWFnZUVsZW1lbnRRdWVyeVNlbGVjdG9yKCAnc3dpdGNoJyApICkgKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoIHN3aXRjaERPTSA9PiBzd2l0Y2hET00gIT09IG51bGwgKSxcbiAgICAgICAgICAgICAgICBkcm9wZG93bnM6IEFycmF5LmZyb20oIG9wdC5hbGxIZWFkZXJET01zIClcbiAgICAgICAgICAgICAgICAubWFwKCBoZWFkZXIgPT4gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoIGxhbmd1YWdlQmxvY2tRdWVyeVNlbGVjdG9yKCAnZHJvcGRvd24nICkgKSApXG4gICAgICAgICAgICAgICAgLmZpbHRlciggZHJvcGRvd25ET00gPT4gZHJvcGRvd25ET00gIT09IG51bGwgKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCB0aGlzLkRPTS5tZW51ICkgfHxcbiAgICAgICAgICAgICFWYWxpZGF0ZVV0aWxzLmlzRG9tRWxlbWVudCggdGhpcy5ET00uY2FuY2VsICkgfHxcbiAgICAgICAgICAgICF0aGlzLkRPTS5pdGVtLmxlbmd0aCB8fFxuICAgICAgICAgICAgIXRoaXMuRE9NLml0ZW0uZXZlcnkoIGl0ZW1PYmogPT4gVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQoIGl0ZW1PYmouc3dpdGNoICkgJiZcbiAgICAgICAgICAgICAgICBpdGVtT2JqLmRyb3Bkb3ducy5ldmVyeSggVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQgKSAmJlxuICAgICAgICAgICAgICAgIGl0ZW1PYmouZHJvcGRvd25zLmxlbmd0aCAhPT0gMCApIHx8XG4gICAgICAgICAgICAhVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQoIHRoaXMuRE9NLmxhbmd1YWdlLnN3aXRjaCApIHx8XG4gICAgICAgICAgICAhdGhpcy5ET00ubGFuZ3VhZ2Uuc3dpdGNoZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICAhdGhpcy5ET00ubGFuZ3VhZ2Uuc3dpdGNoZXMuZXZlcnkoIFZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50ICkgfHxcbiAgICAgICAgICAgICF0aGlzLkRPTS5sYW5ndWFnZS5kcm9wZG93bnMubGVuZ3RoIHx8XG4gICAgICAgICAgICAhdGhpcy5ET00ubGFuZ3VhZ2UuZHJvcGRvd25zLmV2ZXJ5KCBWYWxpZGF0ZVV0aWxzLmlzRG9tRWxlbWVudCApXG4gICAgICAgIClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ0RPTSBub3QgZm91bmQuJyApO1xuXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlTWVudUV2ZW50KCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlRHJvcGRvd25FdmVudCgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZUxhbmd1YWdlRXZlbnQoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVTY3JvbGxFdmVudCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHN1YnNjcmliZU1lbnVFdmVudCAoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGV2ZW50ICkgPT4ge1xuICAgICAgICAgICAgaWYgKCBldmVudC50YXJnZXQgIT09IHRoaXMuRE9NLm1lbnUgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5ET00ubmF2aWdhdGlvbi5jb250YWlucyggZXZlbnQudGFyZ2V0ICkgJiZcbiAgICAgICAgICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggdGhpcy5ET00uaGVhZGVyICkuZGlzcGxheSAhPT0gJ25vbmUnXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5hbGxOYXZpZ2F0aW9ucy5mb3JFYWNoKCAoIG5hdmlnYXRpb25ET00gKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzUmVtb3ZlKCBuYXZpZ2F0aW9uRE9NLCAnaGVhZGVyX19uYXZpZ2F0aW9uLS1hY3RpdmUnICk7XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdGhpcy5ET00ubWVudS5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkRPTS5hbGxOYXZpZ2F0aW9ucy5mb3JFYWNoKCAoIG5hdmlnYXRpb25ET00gKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xhc3NBZGQoIG5hdmlnYXRpb25ET00sICdoZWFkZXJfX25hdmlnYXRpb24tLWFjdGl2ZScgKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgIHRoaXMuRE9NLmNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkRPTS5hbGxOYXZpZ2F0aW9ucy5mb3JFYWNoKCAoIG5hdmlnYXRpb25ET00gKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xhc3NSZW1vdmUoIG5hdmlnYXRpb25ET00sICdoZWFkZXJfX25hdmlnYXRpb24tLWFjdGl2ZScgKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHN1YnNjcmliZURyb3Bkb3duRXZlbnQgKCkge1xuICAgICAgICB0aGlzLkRPTS5pdGVtLmZvckVhY2goICggaXRlbU9iaiApID0+IHtcbiAgICAgICAgICAgIGl0ZW1PYmouc3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIGl0ZW1PYmouc3dpdGNoLmNsYXNzTGlzdC5jb250YWlucyggJ2l0ZW1fX3N3aXRjaC0tYWN0aXZlJyApICkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtT2JqLnN3aXRjaGVzLmZvckVhY2goIHN3aXRjaERPTSA9PiBjbGFzc1JlbW92ZSggc3dpdGNoRE9NLCAnaXRlbV9fc3dpdGNoLS1hY3RpdmUnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbU9iai5kcm9wZG93bnMuZm9yRWFjaCggZHJvcGRvd25ET00gPT4gY2xhc3NSZW1vdmUoIGRyb3Bkb3duRE9NLCAnaXRlbV9fZHJvcGRvd24tLW9wZW4nICkgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLml0ZW0uZm9yRWFjaCggKCBpdGVtT2JqICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbU9iai5zd2l0Y2hlcy5mb3JFYWNoKCBzd2l0Y2hET00gPT4gY2xhc3NSZW1vdmUoIHN3aXRjaERPTSwgJ2l0ZW1fX3N3aXRjaC0tYWN0aXZlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtT2JqLmRyb3Bkb3ducy5mb3JFYWNoKCBkcm9wZG93bkRPTSA9PiBjbGFzc1JlbW92ZSggZHJvcGRvd25ET00sICdpdGVtX19kcm9wZG93bi0tb3BlbicgKSApO1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1PYmouc3dpdGNoZXMuZm9yRWFjaCggc3dpdGNoRE9NID0+IGNsYXNzQWRkKCBzd2l0Y2hET00sICdpdGVtX19zd2l0Y2gtLWFjdGl2ZScgKSApO1xuICAgICAgICAgICAgICAgICAgICBpdGVtT2JqLmRyb3Bkb3ducy5mb3JFYWNoKCBkcm9wZG93bkRPTSA9PiBjbGFzc0FkZCggZHJvcGRvd25ET00sICdpdGVtX19kcm9wZG93bi0tb3BlbicgKSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHN1YnNjcmliZUxhbmd1YWdlRXZlbnQgKCkge1xuICAgICAgICB0aGlzLkRPTS5sYW5ndWFnZS5zd2l0Y2guYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCB0aGlzLkRPTS5sYW5ndWFnZS5zd2l0Y2guY2xhc3NMaXN0LmNvbnRhaW5zKCAnbGFuZ3VhZ2VfX3N3aXRjaC0tYWN0aXZlJyApICkge1xuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmxhbmd1YWdlLmRyb3Bkb3ducy5mb3JFYWNoKCBkcm9wZG93bkRPTSA9PiBjbGFzc1JlbW92ZSggZHJvcGRvd25ET00sICdsYW5ndWFnZV9fZHJvcGRvd24tLW9wZW4nICkgKTtcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5sYW5ndWFnZS5zd2l0Y2hlcy5mb3JFYWNoKCBzd2l0Y2hET00gPT4gY2xhc3NSZW1vdmUoIHN3aXRjaERPTSwgJ2xhbmd1YWdlX19zd2l0Y2gtLWFjdGl2ZScgKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubGFuZ3VhZ2UuZHJvcGRvd25zLmZvckVhY2goIGRyb3Bkb3duRE9NID0+IGNsYXNzQWRkKCBkcm9wZG93bkRPTSwgJ2xhbmd1YWdlX19kcm9wZG93bi0tb3BlbicgKSApO1xuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmxhbmd1YWdlLnN3aXRjaGVzLmZvckVhY2goIHN3aXRjaERPTSA9PiBjbGFzc0FkZCggc3dpdGNoRE9NLCAnbGFuZ3VhZ2VfX3N3aXRjaC0tYWN0aXZlJyApICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICBzdWJzY3JpYmVTY3JvbGxFdmVudCAoKSB7XG4gICAgICAgIGxldCBwcmV2U2Nyb2xscG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxQb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICBpZiAoIHByZXZTY3JvbGxwb3MgPCBjdXJyZW50U2Nyb2xsUG9zICYmIGN1cnJlbnRTY3JvbGxQb3MgPiA5NiApXG4gICAgICAgICAgICAgICAgY2xhc3NBZGQoIHRoaXMuRE9NLmhlYWRlciwgJ2hlYWRlci0tYWN0aXZlJyApO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNsYXNzUmVtb3ZlKCB0aGlzLkRPTS5oZWFkZXIsICdoZWFkZXItLWFjdGl2ZScgKTtcblxuICAgICAgICAgICAgaWYgKCBjdXJyZW50U2Nyb2xsUG9zID4gOTYgKVxuICAgICAgICAgICAgICAgIGNsYXNzQWRkKCB0aGlzLkRPTS5oZWFkZXIsICdoZWFkZXItLWZpeGVkJyApO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNsYXNzUmVtb3ZlKCB0aGlzLkRPTS5oZWFkZXIsICdoZWFkZXItLWZpeGVkJyApO1xuICAgICAgICAgICAgcHJldlNjcm9sbHBvcyA9IGN1cnJlbnRTY3JvbGxQb3M7XG4gICAgICAgIH0gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgTGFuZ3VhZ2VVdGlscyBmcm9tICdtb2RlbHMvY29tbW9uL3V0aWxzL2xhbmd1YWdlLmpzJztcbmltcG9ydCBkZWdyZWVVdGlscyBmcm9tICdtb2RlbHMvZmFjdWx0eS91dGlscy9kZWdyZWUuanMnO1xuaW1wb3J0IFdlYkxhbmd1YWdlVXRpbHMgZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9sYW5ndWFnZS5qcyc7XG5pbXBvcnQgeyBlZGl0UGFnZVR5cGUsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL3VzZXIvZWRpdC1wYWdlLmpzJztcbmltcG9ydCBuYXRpb25VdGlscyBmcm9tICdtb2RlbHMvZmFjdWx0eS91dGlscy9uYXRpb24uanMnO1xuXG5jb25zdCBkYXRhSTE4biA9IE9iamVjdC5mcmVlemUoIHtcbiAgICBwcm9maWxlOiB7XG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXToge1xuICAgICAgICAgICAgdG9waWM6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAgICAgICAgICAnbmFtZScsXG4gICAgICAgICAgICAgICAgbmF0aW9uOiAgICAgICAgJ25haXRvbicsXG4gICAgICAgICAgICAgICAgb2ZmaWNlQWRkcmVzczogJ29mZmljZSBhZGRyZXNzJyxcbiAgICAgICAgICAgICAgICBvZmZpY2VUZWw6ICAgICAnb2ZmaWNlIHRlbCcsXG4gICAgICAgICAgICAgICAgbGFiTmFtZTogICAgICAgJ2xhYiBuYW1lJyxcbiAgICAgICAgICAgICAgICBsYWJBZGRyZXNzOiAgICAnbGFiIGFkZHJlc3MnLFxuICAgICAgICAgICAgICAgIGxhYlRlbDogICAgICAgICdsYWIgdGVsJyxcbiAgICAgICAgICAgICAgICBsYWJXZWI6ICAgICAgICAnbGFiIHdlYicsXG4gICAgICAgICAgICAgICAgZW1haWw6ICAgICAgICAgJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICBwZXJzb25hbFdlYjogICAncGVyc29uYWwgd2ViJyxcbiAgICAgICAgICAgICAgICBmYXg6ICAgICAgICAgICAnZmF4JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgbmFtZTogICAgICAgICAgJ2V4LiBTYW0gV2FuZycsXG4gICAgICAgICAgICAgICAgb2ZmaWNlQWRkcmVzczogJ2V4LiA2NXh4eCwgMTJGLCBDU0lFIG5ldyBidWlsZGluZycsXG4gICAgICAgICAgICAgICAgb2ZmaWNlVGVsOiAgICAgJ2V4LiAwNi14eHh4eHh4LGV4dCcsXG4gICAgICAgICAgICAgICAgbGFiTmFtZTogICAgICAgJ3BsZWFzZSBpbnB1dCB5b3VyIGxhYiBuYW1lJyxcbiAgICAgICAgICAgICAgICBsYWJBZGRyZXNzOiAgICAnZXguIDY1eHh4LCA1RiwgQ1NJRSBuZXcgYnVpbGRpbmcnLFxuICAgICAgICAgICAgICAgIGxhYlRlbDogICAgICAgICdleC4gMDYteHh4eHh4eCxleHQnLFxuICAgICAgICAgICAgICAgIGxhYldlYjogICAgICAgICdleC4gaHR0cDovL3lvdXJfd2ViX3NpdGUuY29tJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogICAgICAgICAnZXguIGV4YW1wbGVAeHh4eHh4eHgnLFxuICAgICAgICAgICAgICAgIHBlcnNvbmFsV2ViOiAgICdleC4gaHR0cDovL3lvdXJfd2ViX3NpdGUuY29tJyxcbiAgICAgICAgICAgICAgICBmYXg6ICAgICAgICAgICAncGxlYXNlIGlucHV0IHlvdXIgZmF4IG51bWJlcicsXG4gICAgICAgICAgICAgICAgbmF0aW9uOiAgICAgICAgMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXToge1xuICAgICAgICAgICAgdG9waWM6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAgICAgICAgICAn5aeT5ZCNJyxcbiAgICAgICAgICAgICAgICBuYXRpb246ICAgICAgICAn5ZyL57GNJyxcbiAgICAgICAgICAgICAgICBvZmZpY2VBZGRyZXNzOiAn6L6m5YWs5a6k5L2N572uJyxcbiAgICAgICAgICAgICAgICBvZmZpY2VUZWw6ICAgICAn6L6m5YWs5a6k6Zu76KmxJyxcbiAgICAgICAgICAgICAgICBsYWJOYW1lOiAgICAgICAn5a+m6amX5a6k5ZCN56ixJyxcbiAgICAgICAgICAgICAgICBsYWJBZGRyZXNzOiAgICAn5a+m6amX5a6k5L2N572uJyxcbiAgICAgICAgICAgICAgICBsYWJUZWw6ICAgICAgICAn5a+m6amX5a6k6Zu76KmxJyxcbiAgICAgICAgICAgICAgICBsYWJXZWI6ICAgICAgICAn5a+m6amX5a6k57ay56uZJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogICAgICAgICAnZW1haWwnLFxuICAgICAgICAgICAgICAgIHBlcnNvbmFsV2ViOiAgICflgIvkurrntrLnq5knLFxuICAgICAgICAgICAgICAgIGZheDogICAgICAgICAgICflgrPnnJ8nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAgICAgICAgICAnZXguIOeOi+Wwj+aYjicsXG4gICAgICAgICAgICAgICAgb2ZmaWNlQWRkcmVzczogJ2V4LiDos4foqIrns7vmlrDppKggNjV4eHgnLFxuICAgICAgICAgICAgICAgIG9mZmljZVRlbDogICAgICdleC4gMDYteHh4eHh4eCzliIbmqZ/omZ/norwnLFxuICAgICAgICAgICAgICAgIGxhYk5hbWU6ICAgICAgICdleC4geHh45a+m6amX5a6kJyxcbiAgICAgICAgICAgICAgICBsYWJBZGRyZXNzOiAgICAnZXguIOizh+ioiuezu+aWsOmkqCA2NXh4eCcsXG4gICAgICAgICAgICAgICAgbGFiVGVsOiAgICAgICAgJ2V4LiAwNi14eHh4eHh4LOWIhuapn+iZn+eivCcsXG4gICAgICAgICAgICAgICAgbGFiV2ViOiAgICAgICAgJ2V4LiBodHRwOi8veW91cl93ZWJfc2l0ZS5jb20nLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAgICAgICAgICdleC4gZXhhbXBsZUB4eHh4eHh4eCcsXG4gICAgICAgICAgICAgICAgcGVyc29uYWxXZWI6ICAgJ2V4LiBodHRwOi8veW91cl93ZWJfc2l0ZS5jb20nLFxuICAgICAgICAgICAgICAgIGZheDogICAgICAgICAgICfoq4vovLjlhaXmgqjnmoTlgrPnnJ/omZ/norwnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHRpdGxlOiB7XG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXToge1xuICAgICAgICAgICAgdG9waWM6ICAgJ3RpdGxlJyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogICAgICAgICdleC4gUHJvZmVzc29yJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXToge1xuICAgICAgICAgICAgdG9waWM6ICAgJ+iBt+eosScsXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6ICAgICAgICAnZXguIOaVmeaOiCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgc3BlY2lhbHR5OiB7XG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXToge1xuICAgICAgICAgICAgdG9waWM6ICAgJ3NwZWNpYWx0eScsXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgc3BlY2lhbHR5OiAgICAgJ2V4LiBtYWNoaW5lIGxlYXJuaW5nJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXToge1xuICAgICAgICAgICAgdG9waWM6ICAgJ+WwiOmVt+mgmOWfnycsXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgc3BlY2lhbHR5OiAgICAgJ2V4LiDmqZ/lmajlrbjnv5InLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGVkdWNhdGlvbjoge1xuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IHtcbiAgICAgICAgICAgIHRvcGljOiAgICdlZHVjYXRpb24nLFxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGRlZ3JlZTogMCxcbiAgICAgICAgICAgICAgICBzY2hvb2w6ICAgICAgICdleC4gTmF0aW9uIENoZW5nIEt1bmcgVW5pdmVyc2l0eScsXG4gICAgICAgICAgICAgICAgbWFqb3I6ICAgICAgICAnZXguIENTSUUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvY2FsVG9waWM6IHtcbiAgICAgICAgICAgICAgICBkZWdyZWU6ICdkZWdyZWUnLFxuICAgICAgICAgICAgICAgIHNjaG9vbDogJ3NjaG9vbCcsXG4gICAgICAgICAgICAgICAgbWFqb3I6ICAnbWFqb3InLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdOiB7XG4gICAgICAgICAgICB0b3BpYzogICAn5a245q23JyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBkZWdyZWU6IDAsXG4gICAgICAgICAgICAgICAgc2Nob29sOiAgICAgICAnZXguIOWci+eri+aIkOWKn+Wkp+WtuCcsXG4gICAgICAgICAgICAgICAgbWFqb3I6ICAgICAgICAnZXguIOizh+ioiuW3peeoi+WtuOezuycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbG9jYWxUb3BpYzoge1xuICAgICAgICAgICAgICAgIGRlZ3JlZTogJ+WtuOS9jScsXG4gICAgICAgICAgICAgICAgc2Nob29sOiAn5a245qChJyxcbiAgICAgICAgICAgICAgICBtYWpvcjogICfkuLvkv64nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGV4cGVyaWVuY2U6IHtcbiAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdOiB7XG4gICAgICAgICAgICB0b3BpYzogICAnZXhwZXJpZW5jZScsXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uOiAnZXguIE5hdGlvbiBDaGVuZyBLdW5nIFVuaXZlcnNpdHknLFxuICAgICAgICAgICAgICAgIGRlcGFydG1lbnQ6ICAgJ2V4LiBDU0lFJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogICAgICAgICdleC4gUHJvZmVzc29yJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2NhbFRvcGljOiB7XG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uOiAnb3JnYW5pemF0aW9uJyxcbiAgICAgICAgICAgICAgICBkZXBhcnRtZW50OiAgICdkZXBhcnRtZW50JyxcbiAgICAgICAgICAgICAgICB0aXRsZTogICAgICAgICd0aXRsZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IHtcbiAgICAgICAgICAgIHRvcGljOiAgICfntpPmrbcnLFxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogJ2V4LiDlnIvnq4vmiJDlip/lpKflrbgnLFxuICAgICAgICAgICAgICAgIGRlcGFydG1lbnQ6ICAgJ2V4LiDos4foqIrlt6XnqIvlrbjns7snLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAgICAgICAgJ2V4LiDmlZnmjognLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvY2FsVG9waWM6IHtcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb246ICfku7vogbfllq7kvY0nLFxuICAgICAgICAgICAgICAgIGRlcGFydG1lbnQ6ICAgJ+S7u+iBt+mDqOmWgCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICAgICAgICAn6IG35L2NJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBlZGl0UGFnZToge1xuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IHtcbiAgICAgICAgICAgIGJ1dHRvbjoge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogJ2NhbmNlbCcsXG4gICAgICAgICAgICAgICAgY2hlY2s6ICAnY2hlY2snLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvcGljOiB7XG4gICAgICAgICAgICAgICAgYWRkOiAgICAnYWRkIHlvdXIgJyxcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICd1cGRhdGUgeW91ciAnLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZSB5b3VyICcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IHtcbiAgICAgICAgICAgIGJ1dHRvbjoge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogJ+WPlua2iCcsXG4gICAgICAgICAgICAgICAgY2hlY2s6ICAn56K65a6aJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3BpYzoge1xuICAgICAgICAgICAgICAgIGFkZDogICAgJ+aWsOWinuaCqOeahCcsXG4gICAgICAgICAgICAgICAgdXBkYXRlOiAn5L+u5pS55oKo55qEJyxcbiAgICAgICAgICAgICAgICBkZWxldGU6ICfliKrpmaTmgqjnmoQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGJ1dHRvbjoge1xuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IHtcbiAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICB1cGRhdGU6ICAndXBkYXRlJyxcbiAgICAgICAgICAgIGFkZDogICAgICdhZGQnLFxuICAgICAgICB9LFxuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IHtcbiAgICAgICAgICAgIGRlbGV0ZTogJ+WIqumZpCcsXG4gICAgICAgICAgICB1cGRhdGU6ICAn6K6K5pu0JyxcbiAgICAgICAgICAgIGFkZDogICAgICfmlrDlop4nLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgdGltZToge1xuICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IHtcbiAgICAgICAgICAgIGZyb206ICAgICdmcm9tJyxcbiAgICAgICAgICAgIHRvOiAgICAgICd0bycsXG4gICAgICAgIH0sXG4gICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXToge1xuICAgICAgICAgICAgZnJvbTogICAgJ+W+nicsXG4gICAgICAgICAgICB0bzogICAgICAn6IezJyxcbiAgICAgICAgfSxcbiAgICB9LFxufSApO1xuXG5jb25zdCBkYXRhRWRpdFBhZ2VDb25maWcgPSBPYmplY3QuZnJlZXplKCB7XG4gICAgcHJvZmlsZToge1xuICAgICAgICBuYW1lOiBbXG4gICAgICAgICAgICBlZGl0UGFnZVR5cGUoIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnbmFtZScsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBpMThuOiAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIH0gKSxcbiAgICAgICAgXSxcbiAgICAgICAgb2ZmaWNlQWRkcmVzczogW1xuICAgICAgICAgICAgZWRpdFBhZ2VUeXBlKCB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogJ29mZmljZUFkZHJlc3MnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIHRydWUsXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIF0sXG4gICAgICAgIGxhYk5hbWU6IFtcbiAgICAgICAgICAgIGVkaXRQYWdlVHlwZSgge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdsYWJOYW1lJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGkxOG46ICAgICAgICB0cnVlLFxuICAgICAgICAgICAgfSApLFxuICAgICAgICBdLFxuICAgICAgICBsYWJBZGRyZXNzOiAgW1xuICAgICAgICAgICAgZWRpdFBhZ2VUeXBlKCB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogJ2xhYkFkZHJlc3MnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIHRydWUsXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIF0sXG4gICAgICAgIGxhYlRlbDogIFtcbiAgICAgICAgICAgIGVkaXRQYWdlVHlwZSgge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdsYWJUZWwnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGVsJyxcbiAgICAgICAgICAgICAgICBpMThuOiAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIF0sXG4gICAgICAgIGxhYldlYjogIFtcbiAgICAgICAgICAgIGVkaXRQYWdlVHlwZSgge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdsYWJXZWInLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndXJsJyxcbiAgICAgICAgICAgICAgICBpMThuOiAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIF0sXG4gICAgICAgIG9mZmljZVRlbDogW1xuICAgICAgICAgICAgZWRpdFBhZ2VUeXBlKCB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogJ29mZmljZVRlbCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICAgICd0ZWwnLFxuICAgICAgICAgICAgICAgIGkxOG46ICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIH0gKSxcbiAgICAgICAgXSxcbiAgICAgICAgZW1haWw6ICAgIFtcbiAgICAgICAgICAgIGVkaXRQYWdlVHlwZSgge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICAgICdlbWFpbCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgfSApLFxuICAgICAgICBdLFxuICAgICAgICBmYXg6ICAgIFtcbiAgICAgICAgICAgIGVkaXRQYWdlVHlwZSgge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdmYXgnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGVsJyxcbiAgICAgICAgICAgICAgICBpMThuOiAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIF0sXG4gICAgICAgIHBlcnNvbmFsV2ViOiAgW1xuICAgICAgICAgICAgZWRpdFBhZ2VUeXBlKCB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogJ3BlcnNvbmFsV2ViJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogICAgJ3VybCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgfSApLFxuICAgICAgICBdLFxuICAgICAgICBuYXRpb246IFtcbiAgICAgICAgICAgIGVkaXRQYWdlVHlwZSgge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAgJ2Ryb3Bkb3duJyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogICduYXRpb24nLFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duSXRlbTogbmF0aW9uVXRpbHMuaTE4blsgV2ViTGFuZ3VhZ2VVdGlscy5jdXJyZW50TGFuZ3VhZ2VJZCBdLFxuICAgICAgICAgICAgICAgIHV0aWw6ICAgICAgICAgbmF0aW9uVXRpbHMsXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBlZHVjYXRpb246IFtcbiAgICAgICAgZWRpdFBhZ2VUeXBlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0aW1lJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgZWRpdFBhZ2VUeXBlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAnbG9jYWxUb3BpYycsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdzY2hvb2wnLFxuICAgICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICBlZGl0UGFnZVR5cGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogJ3NjaG9vbCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBpMThuOiAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgZWRpdFBhZ2VUeXBlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAnbG9jYWxUb3BpYycsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdtYWpvcicsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnbWFqb3InLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ2xvY2FsVG9waWMnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnZGVncmVlJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgZWRpdFBhZ2VUeXBlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAgJ2Ryb3Bkb3duJyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogICdkZWdyZWUnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGRyb3Bkb3duSXRlbTogZGVncmVlVXRpbHMuaTE4blsgV2ViTGFuZ3VhZ2VVdGlscy5jdXJyZW50TGFuZ3VhZ2VJZCBdLFxuICAgICAgICAgICAgICAgIHV0aWw6ICAgICAgICAgZGVncmVlVXRpbHMsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgXSxcbiAgICBleHBlcmllbmNlOiBbXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndGltZScsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ2xvY2FsVG9waWMnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnb3JnYW5pemF0aW9uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgZWRpdFBhZ2VUeXBlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICdvcmdhbml6YXRpb24nLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ2xvY2FsVG9waWMnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnZGVwYXJ0bWVudCcsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnZGVwYXJ0bWVudCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBpMThuOiAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgZWRpdFBhZ2VUeXBlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAnbG9jYWxUb3BpYycsXG4gICAgICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICd0aXRsZScsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAndGl0bGUnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAgICAndGV4dCcsXG4gICAgICAgICAgICAgICAgaTE4bjogICAgICAgIHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgXSxcbiAgICB0aXRsZTogW1xuICAgICAgICBlZGl0UGFnZVR5cGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RpbWUnLFxuICAgICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICBlZGl0UGFnZVR5cGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbTogJ3RpdGxlJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGkxOG46ICAgICAgICB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICApLFxuICAgIF0sXG4gICAgc3BlY2lhbHR5OiBbXG4gICAgICAgIGVkaXRQYWdlVHlwZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiAnc3BlY2lhbHR5JyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogICAgJ3RleHQnLFxuICAgICAgICAgICAgICAgIGkxOG46ICAgICAgICB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICApLFxuICAgIF0sXG59ICk7XG5cbmV4cG9ydCB7IGRhdGFJMThuLCBkYXRhRWRpdFBhZ2VDb25maWcsIH07XG4iLCJpbXBvcnQgZWRpdFBhZ2VIVE1MIGZyb20gJ3N0YXRpYy9zcmMvcHVnL2NvbXBvbmVudHMvdXNlci9lZGl0LXBhZ2UucHVnJztcbmltcG9ydCBlZGl0UGFnZUNvbnRlbnRIVE1MIGZyb20gJ3N0YXRpYy9zcmMvcHVnL2NvbXBvbmVudHMvdXNlci9lZGl0LXBhZ2UtY29udGVudC5wdWcnO1xuaW1wb3J0IHsgZGF0YUkxOG4sIH0gZnJvbSAnc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL3VzZXIvZGF0YS1jb25maWcuanMnO1xuaW1wb3J0IExhbmd1YWdlVXRpbHMgZnJvbSAnbW9kZWxzL2NvbW1vbi91dGlscy9sYW5ndWFnZS5qcyc7XG5pbXBvcnQgeyBjbGFzc0FkZCwgY2xhc3NSZW1vdmUsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9zdHlsZS5qcyc7XG5pbXBvcnQgeyBob3N0LCB9IGZyb20gJ3NldHRpbmdzL3NlcnZlci9jb25maWcuanMnO1xuaW1wb3J0IFZhbGlkYXRlVXRpbHMgZnJvbSAnbW9kZWxzL2NvbW1vbi91dGlscy92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgV2ViTGFuZ3VhZ2VVdGlscyBmcm9tICdzdGF0aWMvc3JjL2pzL3V0aWxzL2xhbmd1YWdlLmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0XG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5cblxuY2xhc3MgRWRpdFBhZ2Uge1xuICAgIGNvbnN0cnVjdG9yICggb3B0ICkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhVmFsaWRhdGVVdGlscy5pc0RvbUVsZW1lbnQoIG9wdC5lZGl0UGFnZURPTSApIHx8XG4gICAgICAgICAgICAhV2ViTGFuZ3VhZ2VVdGlscy5pc1N1cHBvcnRlZExhbmd1YWdlSWQoIG9wdC5sYW5ndWFnZUlkIClcbiAgICAgICAgKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvciggJ2ludmFsaWQgYXJndW1lbnRzJyApO1xuXG4gICAgICAgIHRoaXMuRE9NID0ge1xuICAgICAgICAgICAgZWRpdFBhZ2U6IG9wdC5lZGl0UGFnZURPTSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBsYW5ndWFnZUlkOiAgICBvcHQubGFuZ3VhZ2VJZCxcbiAgICAgICAgICAgIGJ1dHRvbk1ldGhvZDogIG9wdC5idXR0b25NZXRob2QsXG4gICAgICAgICAgICBkYlRhYmxlOiAgICAgICBvcHQuZGJUYWJsZSxcbiAgICAgICAgICAgIGRiVGFibGVJdGVtSWQ6IG9wdC5pZCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kYXRhSTE4biA9IG9wdC5kYXRhSTE4bjtcbiAgICAgICAgdGhpcy5lZGl0UGFnZUNvbmZpZyA9IG9wdC5lZGl0UGFnZUNvbmZpZztcbiAgICAgICAgdGhpcy5kYkRhdGEgPSAoIG9wdC5idXR0b25NZXRob2QgPT09ICd1cGRhdGUnICkgPyBvcHQuZGJEYXRhIDoge307XG4gICAgICAgIHRoaXMuY29udGVudCA9IG9wdC5jb250ZW50O1xuICAgIH1cblxuICAgIGFzeW5jIHJlbmRlckVkaXRQYWdlV2luZG93ICgpIHtcbiAgICAgICAgY29uc3QgaTE4biA9IGRhdGFJMThuLmVkaXRQYWdlO1xuICAgICAgICBjbGFzc1JlbW92ZSggdGhpcy5ET00uZWRpdFBhZ2UsICdjb250ZW50X19lZGl0LXBhZ2UtLWhpZGRlbicgKTtcbiAgICAgICAgdGhpcy5ET00uZWRpdFBhZ2UuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMuRE9NLmVkaXRQYWdlLmlubmVySFRNTCArPSBlZGl0UGFnZUhUTUwoIHtcbiAgICAgICAgICAgIHVybDogICAgYCR7IGhvc3QgfS91c2VyL3Byb2ZpbGVgLFxuICAgICAgICAgICAgY2FuY2VsOiBpMThuWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF0uYnV0dG9uLmNhbmNlbCxcbiAgICAgICAgICAgIGNoZWNrOiAgaTE4blsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdLmJ1dHRvbi5jaGVjayxcbiAgICAgICAgICAgIHRvcGljOiAgYCR7IGkxOG5bIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXS50b3BpY1sgdGhpcy5jb25maWcuYnV0dG9uTWV0aG9kIF0gfSR7IHRoaXMuZGF0YUkxOG5bIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXS50b3BpYyB9YCxcbiAgICAgICAgfSApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5mbzogICB0aGlzLkRPTS5lZGl0UGFnZS5xdWVyeVNlbGVjdG9yKCAnLmVkaXQtcGFnZV9fd2luZG93ID4gLndpbmRvd19fZm9ybSA+IC5mb3JtX19jb250ZW50ID4gLmNvbnRlbnRfX2luZm8nICksXG4gICAgICAgICAgICBjaGVjazogICB0aGlzLkRPTS5lZGl0UGFnZS5xdWVyeVNlbGVjdG9yKCAnLmVkaXQtcGFnZV9fd2luZG93ID4gLndpbmRvd19fZm9ybSA+IC5mb3JtX19idXR0b24gPiAuYnV0dG9uX19pdGVtLS1jaGVjaycgKSxcbiAgICAgICAgICAgIGNhbmNlbDogIHRoaXMuRE9NLmVkaXRQYWdlLnF1ZXJ5U2VsZWN0b3IoICcuZWRpdC1wYWdlX193aW5kb3cgPiAud2luZG93X19mb3JtID4gLmZvcm1fX2J1dHRvbiA+IC5idXR0b25fX2l0ZW0tLWNhbmNlbCcgKSxcbiAgICAgICAgICAgIGVycm9yOiAgIHRoaXMuRE9NLmVkaXRQYWdlLnF1ZXJ5U2VsZWN0b3IoICcuZWRpdC1wYWdlX193aW5kb3cgPiAud2luZG93X19mb3JtID4gLmZvcm1fX2NvbnRlbnQgPiAuY29udGVudF9fZXJyb3IgPiAuZXJyb3JfX21lc3NhZ2UnICksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0VGV4dElucHV0ICggZWRpdFBhZ2VDb25maWcsIGVkaXRQYWdlSW5mb0RPTSApIHtcbiAgICAgICAgY29uc3QgZmxhZyA9IHtcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogYCR7IGhvc3QgfS9zdGF0aWMvaW1hZ2UvaWNvbi90dy5wbmdgLFxuICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdOiBgJHsgaG9zdCB9L3N0YXRpYy9pbWFnZS9pY29uL3VzLnBuZ2AsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlSWRzID0gKCBlZGl0UGFnZUNvbmZpZy5pMThuICkgPyBMYW5ndWFnZVV0aWxzLnN1cHBvcnRlZExhbmd1YWdlSWQgOiBbIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQsIF07XG4gICAgICAgIGxhbmd1YWdlSWRzLmZvckVhY2goICggbGFuZ3VhZ2VJZCApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5kYXRhSTE4blsgbGFuZ3VhZ2VJZCBdLmRlZmF1bHRbIGVkaXRQYWdlQ29uZmlnLmRiVGFibGVJdGVtIF07XG5cbiAgICAgICAgICAgIGVkaXRQYWdlSW5mb0RPTS5pbm5lckhUTUwgKz0gZWRpdFBhZ2VDb250ZW50SFRNTCgge1xuICAgICAgICAgICAgICAgIGZsYWc6ICAgICAgICAoIGVkaXRQYWdlQ29uZmlnLmkxOG4gKSA/IGZsYWdbIGxhbmd1YWdlSWQgXSA6IG51bGwsXG4gICAgICAgICAgICAgICAgdmFsdWU6ICAgICAgICggdGhpcy5jb25maWcuYnV0dG9uTWV0aG9kID09PSAndXBkYXRlJyApID8gdGhpcy5kYkRhdGFbIGxhbmd1YWdlSWQgXVsgZWRpdFBhZ2VDb25maWcuZGJUYWJsZUl0ZW0gXSA6ICcnLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICAgIG5hbWU6ICAgICAgICAoIGVkaXRQYWdlQ29uZmlnLmkxOG4gKSA/IGAkeyBlZGl0UGFnZUNvbmZpZy5kYlRhYmxlSXRlbSB9XyR7IGxhbmd1YWdlSWQgfWAgOiBgJHsgZWRpdFBhZ2VDb25maWcuZGJUYWJsZUl0ZW0gfWAsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICAgIGVkaXRQYWdlQ29uZmlnLmRhdGFUeXBlLFxuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICBlZGl0UGFnZUNvbmZpZy50eXBlLFxuICAgICAgICAgICAgICAgIGRiVGFibGVJdGVtOiBlZGl0UGFnZUNvbmZpZy5kYlRhYmxlSXRlbSxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUlkLFxuICAgICAgICAgICAgICAgIGkxOG46ICAgICAgICBlZGl0UGFnZUNvbmZpZy5pMThuLFxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgc2V0VGltZUlucHV0ICggZWRpdFBhZ2VJbmZvRE9NICkge1xuICAgICAgICBjb25zdCB0aW1lSTE4biA9IGRhdGFJMThuLnRpbWVbIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXTtcbiAgICAgICAgY29uc3QgdmFsdWVGcm9tID0gKCB0aGlzLmNvbmZpZy5idXR0b25NZXRob2QgPT09ICd1cGRhdGUnICkgPyB0aGlzLmRiRGF0YVsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdLmZyb20gOiBudWxsO1xuICAgICAgICBjb25zdCB2YWx1ZVRvID0gKCB0aGlzLmNvbmZpZy5idXR0b25NZXRob2QgPT09ICd1cGRhdGUnICkgPyB0aGlzLmRiRGF0YVsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdLnRvIDogbnVsbDtcblxuICAgICAgICBlZGl0UGFnZUluZm9ET00uaW5uZXJIVE1MICs9IGVkaXRQYWdlQ29udGVudEhUTUwoIHtcbiAgICAgICAgICAgIGZyb206ICAgICAgIHRpbWVJMThuLmZyb20sXG4gICAgICAgICAgICB0bzogICAgICAgICB0aW1lSTE4bi50byxcbiAgICAgICAgICAgIHZhbHVlRnJvbSxcbiAgICAgICAgICAgIHZhbHVlVG8sXG4gICAgICAgICAgICBuYW1lRnJvbTogICAnZnJvbScsXG4gICAgICAgICAgICBuYW1lVG86ICAgICAndG8nLFxuICAgICAgICAgICAgdHlwZTogICAgICAgJ3RpbWUnLFxuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgc2V0TG9jYWxUb3BpYyAoIHRvcGljLCBlZGl0UGFnZUluZm9ET00gKSB7XG4gICAgICAgIGVkaXRQYWdlSW5mb0RPTS5pbm5lckhUTUwgKz0gZWRpdFBhZ2VDb250ZW50SFRNTCgge1xuICAgICAgICAgICAgbG9jYWxUb3BpYzogICB0b3BpYyxcbiAgICAgICAgICAgIHR5cGU6ICAgICAgICAnbG9jYWwtdG9waWMnLFxuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgc2V0RHJvcGRvd25JbnB1dCAoIGVkaXRQYWdlQ29uZmlnLCBlZGl0UGFnZUluZm9ET00gKSB7XG4gICAgICAgIGNvbnN0IHV0aWwgPSBlZGl0UGFnZUNvbmZpZy51dGlsO1xuXG4gICAgICAgIGxldCB2YWx1ZSA9IHV0aWwubWFwLmluZGV4T2YoIHV0aWwuZGVmYXVsdE9wdGlvbiApO1xuICAgICAgICBpZiAoIHRoaXMuY29uZmlnLmJ1dHRvbk1ldGhvZCA9PT0gJ3VwZGF0ZScgKVxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRiRGF0YVsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdWyBlZGl0UGFnZUNvbmZpZy5kYlRhYmxlSXRlbSBdO1xuXG4gICAgICAgIGNvbnN0IHRvcCA9IHV0aWwuaTE4blsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdWyB1dGlsLm1hcFsgdmFsdWUgXSBdO1xuXG4gICAgICAgIGVkaXRQYWdlSW5mb0RPTS5pbm5lckhUTUwgKz0gZWRpdFBhZ2VDb250ZW50SFRNTCgge1xuICAgICAgICAgICAgdG9wLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBkYXRhOiAgICAgICAgZWRpdFBhZ2VDb25maWcuZHJvcGRvd25JdGVtLFxuICAgICAgICAgICAgbmFtZTogICAgICAgIGAkeyB0aGlzLmNvbmZpZy5kYlRhYmxlIH1fJHsgZWRpdFBhZ2VDb25maWcuZGJUYWJsZUl0ZW0gfWAsXG4gICAgICAgICAgICBkYlRhYmxlSXRlbTogZWRpdFBhZ2VDb25maWcuZGJUYWJsZUl0ZW0sXG4gICAgICAgICAgICB0eXBlOiAgICAgICAgJ2Ryb3Bkb3duJyxcbiAgICAgICAgfSApO1xuXG4gICAgICAgIGNvbnN0IGRyb3Bkb3duVG9wID0gZWRpdFBhZ2VJbmZvRE9NLnF1ZXJ5U2VsZWN0b3IoICcuaW5wdXRfX2Ryb3Bkb3duID4gLmRyb3Bkb3duX190b3AnICk7XG4gICAgICAgIGNvbnN0IGRyb3Bkb3duSXRlbXMgPSBlZGl0UGFnZUluZm9ET00ucXVlcnlTZWxlY3RvckFsbCggJy5pbnB1dF9fZHJvcGRvd24gPiAuZHJvcGRvd25fX2J1dHRvbiA+IC5idXR0b25fX2NvbnRlbnQgPiAuY29udGVudF9faXRlbScgKTtcbiAgICAgICAgY29uc3QgZHJvcGRvd25TdWJtaXQgPSBlZGl0UGFnZUluZm9ET00ucXVlcnlTZWxlY3RvciggJy5pbnB1dF9fZHJvcGRvd24gPiAuZHJvcGRvd25fX2J1dHRvbiA+IC5idXR0b25fX3N1Ym1pdCcgKTtcbiAgICAgICAgZHJvcGRvd25Ub3AuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY2xhc3NBZGQoIGVkaXRQYWdlSW5mb0RPTS5xdWVyeVNlbGVjdG9yKCAnLmlucHV0X19kcm9wZG93biA+IC5kcm9wZG93bl9fYnV0dG9uJyApLCAnZHJvcGRvd25fX2J1dHRvbi0tYWN0aXZlJyApO1xuICAgICAgICB9ICk7XG4gICAgICAgIGRyb3Bkb3duSXRlbXMuZm9yRWFjaCggKCBpdGVtICkgPT4ge1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGVsZW1lbnQgKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBlbGVtZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoICd2YWx1ZScgKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93blRvcC5pbm5lckhUTUwgPSB1dGlsLmkxOG5bIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXVsgbmV3VmFsdWUgXTtcbiAgICAgICAgICAgICAgICBkcm9wZG93blN1Ym1pdC52YWx1ZSA9IHV0aWwubWFwLmluZGV4T2YoIG5ld1ZhbHVlICk7XG4gICAgICAgICAgICAgICAgY2xhc3NSZW1vdmUoIGVkaXRQYWdlSW5mb0RPTS5xdWVyeVNlbGVjdG9yKCAnLmlucHV0X19kcm9wZG93biA+IC5kcm9wZG93bl9fYnV0dG9uJyApLCAnZHJvcGRvd25fX2J1dHRvbi0tYWN0aXZlJyApO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0RWRpdFBhZ2VJbnB1dEJsb2NrICggZWRpdFBhZ2VJbmZvRE9NICkge1xuICAgICAgICBlZGl0UGFnZUluZm9ET00uaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMuZWRpdFBhZ2VDb25maWcuZm9yRWFjaCggKCBlbGVtZW50ICkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoICggZWxlbWVudC50eXBlICkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHRJbnB1dCggZWxlbWVudCwgZWRpdFBhZ2VJbmZvRE9NICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRpbWVJbnB1dCggZWRpdFBhZ2VJbmZvRE9NICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsLXRvcGljJzpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9waWMgPSAgdGhpcy5kYXRhSTE4blsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdLmxvY2FsVG9waWNbIGVsZW1lbnQuZGJUYWJsZUl0ZW0gXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMb2NhbFRvcGljKCB0b3BpYywgZWRpdFBhZ2VJbmZvRE9NICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Ryb3Bkb3duJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREcm9wZG93bklucHV0KCBlbGVtZW50LCBlZGl0UGFnZUluZm9ET00gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRFZGl0UGFnZURlbGV0ZUJsb2NrICggZWRpdFBhZ2VJbmZvRE9NICkge1xuICAgICAgICBlZGl0UGFnZUluZm9ET00uaW5uZXJIVE1MICs9IGVkaXRQYWdlQ29udGVudEhUTUwoIHtcbiAgICAgICAgICAgIGxvY2FsVG9waWM6ICB0aGlzLmNvbnRlbnQsXG4gICAgICAgICAgICB0eXBlOiAgICAgICAnbG9jYWwtdG9waWMnLFxuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgc2V0Rm9jdXMgKCkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuRE9NLmVkaXRQYWdlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IHZhbCAgID0gaW5wdXRbIDAgXS52YWx1ZTtcbiAgICAgICAgaW5wdXRbIDAgXS5mb2N1cygpO1xuICAgICAgICBpbnB1dFsgMCBdLnZhbHVlID0gJyc7XG4gICAgICAgIGlucHV0WyAwIF0udmFsdWUgPSB2YWw7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyRWRpdFBhZ2UgKCkge1xuICAgICAgICBjb25zdCBlZGl0UGFnZUNvbnRlbnRET00gPSBhd2FpdCB0aGlzLnJlbmRlckVkaXRQYWdlV2luZG93KCk7XG5cbiAgICAgICAgaWYgKCB0aGlzLmNvbmZpZy5idXR0b25NZXRob2QgPT09ICdkZWxldGUnIClcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0RWRpdFBhZ2VEZWxldGVCbG9jayggZWRpdFBhZ2VDb250ZW50RE9NLmluZm8gKTtcblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0RWRpdFBhZ2VJbnB1dEJsb2NrKCBlZGl0UGFnZUNvbnRlbnRET00uaW5mbyApO1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVkaXRQYWdlQ29udGVudERPTTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJuIGEgb2JqZWN0IGFib3V0IGVkaXRQYWdlIGluZm9cbiAqIEBwYXJhbSB7b2JqZWN0fSBpbmZvXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gZWRpdFBhZ2VUeXBlICggaW5mbyApIHtcbiAgICBjb25zdCB0eXBlT2JqID0ge1xuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RleHQnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICAgIGluZm8uZGF0YVR5cGUsXG4gICAgICAgICAgICBkYlRhYmxlSXRlbTogaW5mby5kYlRhYmxlSXRlbSxcbiAgICAgICAgICAgIGkxOG46ICAgICAgICBpbmZvLmkxOG4sXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWU6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0aW1lJyxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYWxUb3BpYzoge1xuICAgICAgICAgICAgdHlwZTogICAgICAgICdsb2NhbC10b3BpYycsXG4gICAgICAgICAgICBkYlRhYmxlSXRlbTogaW5mby5kYlRhYmxlSXRlbSxcbiAgICAgICAgfSxcbiAgICAgICAgZHJvcGRvd246IHtcbiAgICAgICAgICAgIHR5cGU6ICAgICAgICAgJ2Ryb3Bkb3duJyxcbiAgICAgICAgICAgIHV0aWw6ICAgICAgICAgaW5mby51dGlsLFxuICAgICAgICAgICAgZGJUYWJsZUl0ZW06ICBpbmZvLmRiVGFibGVJdGVtLFxuICAgICAgICAgICAgZHJvcGRvd25JdGVtOiBpbmZvLmRyb3Bkb3duSXRlbSxcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHR5cGVPYmpbIGluZm8udHlwZSBdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBFZGl0UGFnZTtcblxuZXhwb3J0IHtcbiAgICBFZGl0UGFnZSxcbiAgICBlZGl0UGFnZVR5cGUsXG59O1xuXG4iLCJpbXBvcnQgRWRpdFBhZ2UgZnJvbSAnc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL3VzZXIvZWRpdC1wYWdlLmpzJztcbmltcG9ydCBXZWJMYW5ndWFnZVV0aWxzIGZyb20gJ3N0YXRpYy9zcmMvanMvdXRpbHMvbGFuZ3VhZ2UuanMnO1xuaW1wb3J0IHsgY2xhc3NBZGQsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9zdHlsZS5qcyc7XG5pbXBvcnQgeyBob3N0LCB9IGZyb20gJ3NldHRpbmdzL3NlcnZlci9jb25maWcuanMnO1xuaW1wb3J0IFZhbGlkYXRlVXRpbHMgZnJvbSAnbW9kZWxzL2NvbW1vbi91dGlscy92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgZHluYW1pY0lucHV0QmxvY2sgZnJvbSAnc3RhdGljL3NyYy9wdWcvY29tcG9uZW50cy91c2VyL2R5bmFtaWMtaW5wdXQtYmxvY2sucHVnJztcbmltcG9ydCBMYW5ndWFnZVV0aWxzIGZyb20gJ21vZGVscy9jb21tb24vdXRpbHMvbGFuZ3VhZ2UuanMnO1xuaW1wb3J0IGRlZ3JlZVV0aWxzIGZyb20gJ21vZGVscy9mYWN1bHR5L3V0aWxzL2RlZ3JlZS5qcyc7XG5pbXBvcnQgeyBkYXRhSTE4biwgZGF0YUVkaXRQYWdlQ29uZmlnLCB9IGZyb20gJ3N0YXRpYy9zcmMvanMvY29tcG9uZW50cy91c2VyL2RhdGEtY29uZmlnLmpzJztcbmltcG9ydCB2YWxpZGF0ZSBmcm9tICd2YWxpZGF0ZS5qcyc7XG5cbmNsYXNzIFNldERhdGEge1xuICAgIGNvbnN0cnVjdG9yICggb3B0ICkge1xuICAgICAgICBvcHQgPSBvcHQgfHwge307XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCBvcHQuYmxvY2tET00gKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCBvcHQuZWRpdFBhZ2VET00gKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCBvcHQuYWRkQnV0dG9uRE9NICkgfHxcbiAgICAgICAgICAgICFXZWJMYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkTGFuZ3VhZ2VJZCggb3B0Lmxhbmd1YWdlSWQgKVxuICAgICAgICApXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCAnaW52YWxpZCBhcmd1bWVudHMnICk7XG5cbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBsYW5ndWFnZUlkOiBvcHQubGFuZ3VhZ2VJZCxcbiAgICAgICAgICAgIHByb2ZpbGVJZDogIG9wdC5wcm9maWxlSWQsXG4gICAgICAgICAgICBkYlRhYmxlOiAgICBvcHQuZGJUYWJsZSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmkxOG4gPSBkYXRhSTE4blsgb3B0LmRiVGFibGUgXTtcblxuICAgICAgICB0aGlzLkRPTSA9IHtcbiAgICAgICAgICAgIGJsb2NrOiAgICAgb3B0LmJsb2NrRE9NLFxuICAgICAgICAgICAgZWRpdFBhZ2U6ICBvcHQuZWRpdFBhZ2VET00sXG4gICAgICAgICAgICBhZGRCdXR0b246IG9wdC5hZGRCdXR0b25ET00sXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy51cGRhdGVCdXR0b25RdWVyeVNlbGVjdG9yID0gKCBibG9jaywgaWQgKSA9PiBgLmlucHV0LWJsb2NrX19ibG9jayA+IC5ibG9ja19fY29udGVudCA+IC5jb250ZW50X19tb2RpZnktLSR7IGJsb2NrIH0tJHsgaWQgfWA7XG4gICAgICAgIHRoaXMuZGVsZXRlQnV0dG9uUXVlcnlTZWxlY3RvciA9ICggYmxvY2ssIGlkICkgPT4gYC5pbnB1dC1ibG9ja19fYmxvY2sgPiAuYmxvY2tfX2NvbnRlbnQgPiAuY29udGVudF9fcmVtb3ZlLS0keyBibG9jayB9LSR7IGlkIH1gO1xuXG4gICAgICAgIHRoaXMuZWRpdFBhZ2VDb25maWcgPSBkYXRhRWRpdFBhZ2VDb25maWdbIG9wdC5kYlRhYmxlIF07XG4gICAgfVxuXG4gICAgcXVlcnlBcGkgKCBsYW5nICkge1xuICAgICAgICByZXR1cm4gYCR7IGhvc3QgfS9hcGkvZmFjdWx0eS9mYWN1bHR5V2l0aElkLyR7IHRoaXMuY29uZmlnLnByb2ZpbGVJZCB9P2xhbmd1YWdlSWQ9JHsgbGFuZyB9YDtcbiAgICB9XG5cbiAgICBhc3luYyBmZXRjaERhdGEgKCBsYW5nICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goIHRoaXMucXVlcnlBcGkoIGxhbmcgKSApO1xuXG4gICAgICAgICAgICBpZiAoICFyZXMub2sgKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ05vIGZhY3VsdHkgZm91bmQnICk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoICggZXJyICkge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyQmxvY2sgKCBpbmZvICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uSTE4biA9IGRhdGFJMThuLmJ1dHRvbjtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5mbyxcbiAgICAgICAgICAgICAgICBidXR0b246ICAge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmU6IGJ1dHRvbkkxOG5bIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXS5kZWxldGUsXG4gICAgICAgICAgICAgICAgICAgIG1vZGlmeTogYnV0dG9uSTE4blsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdLnVwZGF0ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuRE9NLmJsb2NrLmlubmVySFRNTCArPSBkeW5hbWljSW5wdXRCbG9jaygge1xuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKCBlcnIgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCBlcnIgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlbmRlckVkdWNhdGlvbkJsb2NrICggZGF0YSApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuRE9NLmJsb2NrLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZGF0YVsgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCBdWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF0uZm9yRWFjaCggYXN5bmMgKCByZXMsIGluZGV4ICkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQmxvY2soIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZXI6ICdlZHVjYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgcmVzLmVkdWNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAgYCR7IHJlcy5zY2hvb2wgfSAkeyByZXMubWFqb3IgfSAkeyBkZWdyZWVVdGlscy5pMThuWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF1bIGRlZ3JlZVV0aWxzLm1hcFsgcmVzLmRlZ3JlZSBdIF0gfWAsXG4gICAgICAgICAgICAgICAgICAgIHJlczogICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IGRhdGFbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF0uZWR1Y2F0aW9uWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdOiBkYXRhWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdLmVkdWNhdGlvblsgaW5kZXggXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRVcGRhdGVCdXR0b25FdmVudCgge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25ET006IHRoaXMuRE9NLmJsb2NrLnF1ZXJ5U2VsZWN0b3IoIHRoaXMudXBkYXRlQnV0dG9uUXVlcnlTZWxlY3RvciggdGhpcy5jb25maWcuZGJUYWJsZSwgcmVzLmVkdWNhdGlvbklkICkgKSxcbiAgICAgICAgICAgICAgICAgICAgcmVzOiAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IGRhdGFbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXVsgaW5kZXggXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogZGF0YVsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgcmVzLmVkdWNhdGlvbklkLFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldERlbGV0ZUJ1dHRvbkV2ZW50KCB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkRPTTogdGhpcy5ET00uYmxvY2sucXVlcnlTZWxlY3RvciggdGhpcy5kZWxldGVCdXR0b25RdWVyeVNlbGVjdG9yKCB0aGlzLmNvbmZpZy5kYlRhYmxlLCByZXMuZWR1Y2F0aW9uSWQgKSApLFxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgIHJlcy5lZHVjYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogICBgJHsgcmVzLnNjaG9vbCB9ICR7IHJlcy5tYWpvciB9ICR7IGRlZ3JlZVV0aWxzLmkxOG5bIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXVsgZGVncmVlVXRpbHMubWFwWyByZXMuZGVncmVlIF0gXSB9YCxcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKCBlcnIgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZW5kZXJFeHBlcmllbmNlQmxvY2sgKCBkYXRhICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5ET00uYmxvY2suaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBkYXRhWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXS5mb3JFYWNoKCBhc3luYyAoIHJlcywgaW5kZXggKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJCbG9jaygge1xuICAgICAgICAgICAgICAgICAgICBtb2RpZmllcjogJ2V4cGVyaWVuY2UnLFxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgcmVzLmV4cGVyaWVuY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIGAkeyByZXMub3JnYW5pemF0aW9uIH0gJHsgcmVzLmRlcGFydG1lbnQgfSAkeyByZXMudGl0bGUgfWAsXG4gICAgICAgICAgICAgICAgICAgIHJlczogICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IGRhdGFbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXVsgaW5kZXggXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogZGF0YVsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFVwZGF0ZUJ1dHRvbkV2ZW50KCB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkRPTTogdGhpcy5ET00uYmxvY2sucXVlcnlTZWxlY3RvciggdGhpcy51cGRhdGVCdXR0b25RdWVyeVNlbGVjdG9yKCB0aGlzLmNvbmZpZy5kYlRhYmxlLCByZXMuZXhwZXJpZW5jZUlkICkgKSxcbiAgICAgICAgICAgICAgICAgICAgcmVzOiAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IGRhdGFbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXVsgaW5kZXggXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogZGF0YVsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgcmVzLmV4cGVyaWVuY2VJZCxcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXREZWxldGVCdXR0b25FdmVudCgge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25ET006IHRoaXMuRE9NLmJsb2NrLnF1ZXJ5U2VsZWN0b3IoIHRoaXMuZGVsZXRlQnV0dG9uUXVlcnlTZWxlY3RvciggdGhpcy5jb25maWcuZGJUYWJsZSwgcmVzLmV4cGVyaWVuY2VJZCApICksXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgcmVzLmV4cGVyaWVuY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogICBgJHsgcmVzLm9yZ2FuaXphdGlvbiB9ICR7IHJlcy5kZXBhcnRtZW50IH0gJHsgcmVzLnRpdGxlIH1gLFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoIGVyciApIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlbmRlclRpdGxlQmxvY2sgKCBkYXRhICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5ET00uYmxvY2suaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBkYXRhWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXS5mb3JFYWNoKCBhc3luYyAoIHJlcywgaW5kZXggKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJCbG9jaygge1xuICAgICAgICAgICAgICAgICAgICBtb2RpZmllcjogJ3RpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICAgICAgIHJlcy50aXRsZUlkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAgcmVzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICByZXM6ICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdOiBkYXRhWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF1bIGluZGV4IF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IGRhdGFbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXVsgaW5kZXggXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRVcGRhdGVCdXR0b25FdmVudCgge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25ET006IHRoaXMuRE9NLmJsb2NrLnF1ZXJ5U2VsZWN0b3IoIHRoaXMudXBkYXRlQnV0dG9uUXVlcnlTZWxlY3RvciggdGhpcy5jb25maWcuZGJUYWJsZSwgcmVzLnRpdGxlSWQgKSApLFxuICAgICAgICAgICAgICAgICAgICByZXM6ICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXTogZGF0YVsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdOiBkYXRhWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF1bIGluZGV4IF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICByZXMudGl0bGVJZCxcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXREZWxldGVCdXR0b25FdmVudCgge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25ET006IHRoaXMuRE9NLmJsb2NrLnF1ZXJ5U2VsZWN0b3IoIHRoaXMuZGVsZXRlQnV0dG9uUXVlcnlTZWxlY3RvciggdGhpcy5jb25maWcuZGJUYWJsZSwgcmVzLnRpdGxlSWQgKSApLFxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgIHJlcy50aXRsZUlkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAgIHJlcy50aXRsZSxcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKCBlcnIgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZW5kZXJTcGVjaWFsdHlCbG9jayAoIGRhdGEgKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLkRPTS5ibG9jay5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGRhdGFbIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdLmZvckVhY2goIGFzeW5jICggcmVzLCBpbmRleCApID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckJsb2NrKCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyOiAnc3BlY2lhbHR5JyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICAgICAgIHJlcy5zcGVjaWFsdHlJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogIHJlcy5zcGVjaWFsdHksXG4gICAgICAgICAgICAgICAgICAgIHJlczogICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF06IGRhdGFbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIF1bIHRoaXMuY29uZmlnLmRiVGFibGUgXVsgaW5kZXggXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogZGF0YVsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFVwZGF0ZUJ1dHRvbkV2ZW50KCB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkRPTTogdGhpcy5ET00uYmxvY2sucXVlcnlTZWxlY3RvciggdGhpcy51cGRhdGVCdXR0b25RdWVyeVNlbGVjdG9yKCB0aGlzLmNvbmZpZy5kYlRhYmxlLCByZXMuc3BlY2lhbHR5SWQgKSApLFxuICAgICAgICAgICAgICAgICAgICByZXM6ICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXTogZGF0YVsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXVsgdGhpcy5jb25maWcuZGJUYWJsZSBdWyBpbmRleCBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdOiBkYXRhWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF1bIGluZGV4IF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICByZXMuc3BlY2lhbHR5SWQsXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0RGVsZXRlQnV0dG9uRXZlbnQoIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uRE9NOiB0aGlzLkRPTS5ibG9jay5xdWVyeVNlbGVjdG9yKCB0aGlzLmRlbGV0ZUJ1dHRvblF1ZXJ5U2VsZWN0b3IoIHRoaXMuY29uZmlnLmRiVGFibGUsIHJlcy5zcGVjaWFsdHlJZCApICksXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgcmVzLnNwZWNpYWx0eUlkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAgIHJlcy5zcGVjaWFsdHksXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoICggZXJyICkge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xvc2VFZGl0UGFnZVdpbmRvdyAoKSB7XG4gICAgICAgIGNsYXNzQWRkKCB0aGlzLkRPTS5lZGl0UGFnZSwgJ2NvbnRlbnRfX2VkaXQtcGFnZS0taGlkZGVuJyApO1xuICAgIH1cblxuICAgIHVwbG9hZFVwZGF0ZURhdGEgKCBkYlRhYmxlSXRlbUlkICkge1xuICAgICAgICB0aGlzLmNoZWNrU3VibWl0RGF0YSgpO1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuRE9NLmVkaXRQYWdlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7fTtcbiAgICAgICAgY29uc3QgaTE4biA9IHtcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXToge30sXG4gICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IHt9LFxuICAgICAgICB9O1xuICAgICAgICBBcnJheS5mcm9tKCBpbnB1dCApLmZvckVhY2goICggZWxlbWVudCApID0+IHtcbiAgICAgICAgICAgIGlmICggZWxlbWVudC5nZXRBdHRyaWJ1dGUoICd0eXBlJyApID09PSAndGV4dCcgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdpMThuJyApICE9PSBudWxsIClcbiAgICAgICAgICAgICAgICBpMThuWyBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2xhbmd1YWdlSWQnICkgXVsgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdkYlRhYmxlSXRlbScgKSBdID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpdGVtWyBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2RiVGFibGVJdGVtJyApIF0gPSBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgZmV0Y2goIGAkeyBob3N0IH0vdXNlci9wcm9maWxlYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAgICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6ICAgSlNPTi5zdHJpbmdpZnkoIHtcbiAgICAgICAgICAgICAgICAncHJvZmlsZUlkJzogICAgdGhpcy5jb25maWcucHJvZmlsZUlkLFxuICAgICAgICAgICAgICAgICdtZXRob2QnOiAgICAgICAndXBkYXRlJyxcbiAgICAgICAgICAgICAgICAnZGJUYWJsZSc6ICAgICAgdGhpcy5jb25maWcuZGJUYWJsZSxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbUlkLFxuICAgICAgICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgICAgICAgaTE4bixcbiAgICAgICAgICAgIH0gKSxcbiAgICAgICAgfSApXG4gICAgICAgIC50aGVuKCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4ZWMoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0UGFnZVdpbmRvdygpO1xuICAgICAgICB9ICkuY2F0Y2goICggZXJyICkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXRQYWdlV2luZG93KCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCBlcnIgKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHVwbG9hZEFkZERhdGEgKCkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuRE9NLmVkaXRQYWdlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7fTtcbiAgICAgICAgY29uc3QgaTE4biA9IHtcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXToge30sXG4gICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IHt9LFxuICAgICAgICB9O1xuICAgICAgICBBcnJheS5mcm9tKCBpbnB1dCApLmZvckVhY2goICggZWxlbWVudCApID0+IHtcbiAgICAgICAgICAgIGlmICggZWxlbWVudC5nZXRBdHRyaWJ1dGUoICd0eXBlJyApID09PSAndGV4dCcgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdpMThuJyApICE9PSBudWxsIClcbiAgICAgICAgICAgICAgICBpMThuWyBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2xhbmd1YWdlSWQnICkgXVsgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdkYlRhYmxlSXRlbScgKSBdID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpdGVtWyBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2RiVGFibGVJdGVtJyApIF0gPSBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgZmV0Y2goIGAkeyBob3N0IH0vdXNlci9wcm9maWxlYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAgICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6ICAgSlNPTi5zdHJpbmdpZnkoIHtcbiAgICAgICAgICAgICAgICBwcm9maWxlSWQ6ICAgIHRoaXMuY29uZmlnLnByb2ZpbGVJZCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICAgICAgICdhZGQnLFxuICAgICAgICAgICAgICAgIGRiVGFibGU6ICAgICAgdGhpcy5jb25maWcuZGJUYWJsZSxcbiAgICAgICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgICAgIGkxOG4sXG4gICAgICAgICAgICB9ICksXG4gICAgICAgIH0gKVxuICAgICAgICAudGhlbiggYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5leGVjKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRWRpdFBhZ2VXaW5kb3coKTtcbiAgICAgICAgfSApLmNhdGNoKCAoIGVyciApID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0UGFnZVdpbmRvdygpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciggZXJyICk7XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICB1cGxvYWREZWxldGVEYXRhICggZGJUYWJsZUl0ZW1JZCApIHtcbiAgICAgICAgZmV0Y2goIGAkeyBob3N0IH0vdXNlci9wcm9maWxlYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAgICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6ICAgSlNPTi5zdHJpbmdpZnkoIHtcbiAgICAgICAgICAgICAgICBwcm9maWxlSWQ6ICAgICB0aGlzLmNvbmZpZy5wcm9maWxlSWQsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAgICAgICAgJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgZGJUYWJsZTogICAgICAgdGhpcy5jb25maWcuZGJUYWJsZSxcbiAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbUlkLFxuICAgICAgICAgICAgfSApLFxuICAgICAgICB9IClcbiAgICAgICAgLnRoZW4oIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhlYygpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXRQYWdlV2luZG93KCk7XG4gICAgICAgIH0gKS5jYXRjaCggKCBlcnIgKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRWRpdFBhZ2VXaW5kb3coKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIGVyciApO1xuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgY2hlY2tTdWJtaXREYXRhICggZXJyb3JET00gKSB7XG4gICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLkRPTS5lZGl0UGFnZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2lucHV0JyApO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBbIGB0aXRsZV8keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfkuK3mlofogbfnqLHmmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgWyBgdGl0bGVfJHsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgfWAgXToge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgICAn6Iux5paH6IG356ix5piv5b+F5aGr5qyE5L2NJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFsgYHNwZWNpYWx0eV8keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfkuK3mloflsIjplbfpoJjln5/mmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgWyBgc3BlY2lhbHR5XyR7IExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIH1gIF06IHtcbiAgICAgICAgICAgICAgICBwcmVzZW5jZToge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0VtcHR5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogICAgJ+iLseaWh+WwiOmVt+mgmOWfn+aYr+W/heWhq+ashOS9jScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbIGBzY2hvb2xfJHsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgfWAgXToge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgICAn5Lit5paH5a245qCh5piv5b+F5aGr5qyE5L2NJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFsgYHNjaG9vbF8keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfoi7HmloflrbjmoKHmmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgWyBgbWFqb3JfJHsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgfWAgXToge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgICAn5Lit5paH5Li75L+u5piv5b+F5aGr5qyE5L2NJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFsgYG1ham9yXyR7IExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApIH1gIF06IHtcbiAgICAgICAgICAgICAgICBwcmVzZW5jZToge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0VtcHR5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogICAgJ+iLseaWh+S4u+S/ruaYr+W/heWhq+ashOS9jScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbIGBvcmdhbml6YXRpb25fJHsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgfWAgXToge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgICAn5Lit5paH5Lu76IG35Zau5L2N5piv5b+F5aGr5qyE5L2NJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFsgYG9yZ2FuaXphdGlvbl8keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfoi7Hmlofku7vogbfllq7kvY3mmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnJvbToge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgICAn5bm05Lu95piv5b+F5aGr5qyE5L2NJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG51bWVyaWNhbGl0eToge1xuICAgICAgICAgICAgICAgICAgICBvbmx5SW50ZWdlcjogICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZ3JlYXRlclRoYW46ICAgICAgIDE5MDAsXG4gICAgICAgICAgICAgICAgICAgIGxlc3NUaGFuT3JFcXVhbFRvOiB0b2RheS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgICAgICAgICAgJ+W5tOS7veaHieS7i+aWvDE5MDB+54++5ZyoJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICflubTku73mmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbnVtZXJpY2FsaXR5OiB7XG4gICAgICAgICAgICAgICAgICAgIG9ubHlJbnRlZ2VyOiAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBncmVhdGVyVGhhbjogICAgICAgMTkwMCxcbiAgICAgICAgICAgICAgICAgICAgbGVzc1RoYW5PckVxdWFsVG86IHRvZGF5LmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICAgICAgICAn5bm05Lu95oeJ5LuL5pa8MTkwMH7nj77lnKgnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIEFycmF5LmZyb20oIGlucHV0ICkuZm9yRWFjaCggKCBlbGVtZW50ICkgPT4ge1xuICAgICAgICAgICAgaWYgKCBpc1ZhbGlkICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRlLnNpbmdsZSggZWxlbWVudC52YWx1ZSwgY29uc3RyYWludHNbIGVsZW1lbnQubmFtZSBdICk7XG4gICAgICAgICAgICAgICAgaWYgKCBlcnJvcnMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RXJyb3JNZXNzYWdlKCBlbGVtZW50LCBlcnJvcnNbIDAgXSwgZXJyb3JET00gKTtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIH1cblxuICAgIHNldEVycm9yTWVzc2FnZSAoIGlucHV0RE9NLCBlcnJvck1lc3NhZ2UsIGVycm9yRE9NICkge1xuICAgICAgICBpbnB1dERPTS5mb2N1cygpO1xuICAgICAgICBlcnJvckRPTS5pbm5lckhUTUwgPSBlcnJvck1lc3NhZ2U7XG4gICAgfVxuXG4gICAgc2V0QWRkQnV0dG9uRXZlbnQgKCkge1xuICAgICAgICB0aGlzLkRPTS5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWRpdFBhZ2UgPSBuZXcgRWRpdFBhZ2UoIHtcbiAgICAgICAgICAgICAgICBlZGl0UGFnZUNvbmZpZzogZGF0YUVkaXRQYWdlQ29uZmlnWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF0sXG4gICAgICAgICAgICAgICAgZGF0YUkxOG46ICAgICAgIGRhdGFJMThuWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF0sXG4gICAgICAgICAgICAgICAgZWRpdFBhZ2VET006ICAgIHRoaXMuRE9NLmVkaXRQYWdlLFxuICAgICAgICAgICAgICAgIGRiVGFibGU6ICAgICAgICB0aGlzLmNvbmZpZy5kYlRhYmxlLFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlSWQ6ICAgICB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkLFxuICAgICAgICAgICAgICAgIGJ1dHRvbk1ldGhvZDogICAnYWRkJyxcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRQYWdlRE9NID0gYXdhaXQgZWRpdFBhZ2UucmVuZGVyRWRpdFBhZ2UoKTtcblxuICAgICAgICAgICAgZWRpdFBhZ2VET00uY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZSApID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXRQYWdlV2luZG93KCk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBlZGl0UGFnZURPTS5jaGVjay5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGUgKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLmNoZWNrU3VibWl0RGF0YSggZWRpdFBhZ2VET00uZXJyb3IgKTtcbiAgICAgICAgICAgICAgICBpZiAoIGlzVmFsaWQgKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEFkZERhdGEoKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHNldFVwZGF0ZUJ1dHRvbkV2ZW50ICggaW5mbyApIHtcbiAgICAgICAgaW5mby5idXR0b25ET00uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWRpdFBhZ2UgPSBuZXcgRWRpdFBhZ2UoIHtcbiAgICAgICAgICAgICAgICBlZGl0UGFnZUNvbmZpZzogZGF0YUVkaXRQYWdlQ29uZmlnWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF0sXG4gICAgICAgICAgICAgICAgZGF0YUkxOG46ICAgICAgIGRhdGFJMThuWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF0sXG4gICAgICAgICAgICAgICAgZWRpdFBhZ2VET006ICAgIHRoaXMuRE9NLmVkaXRQYWdlLFxuICAgICAgICAgICAgICAgIGRiVGFibGU6ICAgICAgICB0aGlzLmNvbmZpZy5kYlRhYmxlLFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlSWQ6ICAgICB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkLFxuICAgICAgICAgICAgICAgIGRiRGF0YTogICAgICAgICBpbmZvLnJlcyxcbiAgICAgICAgICAgICAgICBidXR0b25NZXRob2Q6ICAgJ3VwZGF0ZScsXG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBjb25zdCBlZGl0UGFnZURPTSA9IGF3YWl0IGVkaXRQYWdlLnJlbmRlckVkaXRQYWdlKCk7XG5cbiAgICAgICAgICAgIGVkaXRQYWdlRE9NLmNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGUgKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0UGFnZVdpbmRvdygpO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgZWRpdFBhZ2VET00uY2hlY2suYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLmNoZWNrU3VibWl0RGF0YSggZWRpdFBhZ2VET00uZXJyb3IgKTtcbiAgICAgICAgICAgICAgICBpZiAoIGlzVmFsaWQgKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFVwZGF0ZURhdGEoIGluZm8uaWQgKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHNldERlbGV0ZUJ1dHRvbkV2ZW50ICggaW5mbyApIHtcbiAgICAgICAgaW5mby5idXR0b25ET00uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWRpdFBhZ2UgPSBuZXcgRWRpdFBhZ2UoIHtcbiAgICAgICAgICAgICAgICBkYXRhSTE4bjogICAgICAgZGF0YUkxOG5bIHRoaXMuY29uZmlnLmRiVGFibGUgXSxcbiAgICAgICAgICAgICAgICBlZGl0UGFnZUNvbmZpZzogZGF0YUVkaXRQYWdlQ29uZmlnWyB0aGlzLmNvbmZpZy5kYlRhYmxlIF0sXG4gICAgICAgICAgICAgICAgZWRpdFBhZ2VET006ICAgIHRoaXMuRE9NLmVkaXRQYWdlLFxuICAgICAgICAgICAgICAgIGRiVGFibGU6ICAgICAgICB0aGlzLmNvbmZpZy5kYlRhYmxlLFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlSWQ6ICAgICB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkLFxuICAgICAgICAgICAgICAgIGlkOiAgICAgICAgICAgICBpbmZvLmlkLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICAgICAgICBpbmZvLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgYnV0dG9uTWV0aG9kOiAgICdkZWxldGUnLFxuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgY29uc3QgZWRpdFBhZ2VET00gPSBhd2FpdCBlZGl0UGFnZS5yZW5kZXJFZGl0UGFnZSgpO1xuXG4gICAgICAgICAgICBlZGl0UGFnZURPTS5jYW5jZWwuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRWRpdFBhZ2VXaW5kb3coKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIGVkaXRQYWdlRE9NLmNoZWNrLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZSApID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGxvYWREZWxldGVEYXRhKCBpbmZvLmlkICk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjICgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXTogYXdhaXQgdGhpcy5mZXRjaERhdGEoIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApICksXG4gICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IGF3YWl0IHRoaXMuZmV0Y2hEYXRhKCBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSApLFxuICAgICAgICB9O1xuXG4gICAgICAgIHN3aXRjaCAoIHRoaXMuY29uZmlnLmRiVGFibGUgKSB7XG4gICAgICAgICAgICBjYXNlICdlZHVjYXRpb24nOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRWR1Y2F0aW9uQmxvY2soIGRhdGEgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2V4cGVyaWVuY2UnOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRXhwZXJpZW5jZUJsb2NrKCBkYXRhICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0aXRsZSc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJUaXRsZUJsb2NrKCBkYXRhICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzcGVjaWFsdHknOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyU3BlY2lhbHR5QmxvY2soIGRhdGEgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRBZGRCdXR0b25FdmVudCgpO1xuICAgIH1cbn1cblxuZXhwb3J0IHtcbiAgICBTZXREYXRhLFxufTtcbiIsImltcG9ydCBFZGl0UGFnZSBmcm9tICdzdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvdXNlci9lZGl0LXBhZ2UuanMnO1xuaW1wb3J0IFdlYkxhbmd1YWdlVXRpbHMgZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9sYW5ndWFnZS5qcyc7XG5pbXBvcnQgeyBjbGFzc0FkZCwgY2xhc3NSZW1vdmUsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy91dGlscy9zdHlsZS5qcyc7XG5pbXBvcnQgeyBob3N0LCB9IGZyb20gJ3NldHRpbmdzL3NlcnZlci9jb25maWcuanMnO1xuaW1wb3J0IFZhbGlkYXRlVXRpbHMgZnJvbSAnbW9kZWxzL2NvbW1vbi91dGlscy92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgTGFuZ3VhZ2VVdGlscyBmcm9tICdtb2RlbHMvY29tbW9uL3V0aWxzL2xhbmd1YWdlLmpzJztcbmltcG9ydCBuYXRpb25VdGlscyBmcm9tICdtb2RlbHMvZmFjdWx0eS91dGlscy9uYXRpb24uanMnO1xuaW1wb3J0IHsgZGF0YUkxOG4sIGRhdGFFZGl0UGFnZUNvbmZpZywgfSBmcm9tICdzdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvdXNlci9kYXRhLWNvbmZpZy5qcyc7XG5pbXBvcnQgdmFsaWRhdGUgZnJvbSAndmFsaWRhdGUuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXRQcm9maWxlRGF0YSB7XG4gICAgY29uc3RydWN0b3IgKCBvcHQgKSB7XG4gICAgICAgIG9wdCA9IG9wdCB8fCB7fTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhb3B0LnByb2ZpbGVET00gfHxcbiAgICAgICAgICAgICFWYWxpZGF0ZVV0aWxzLmlzRG9tRWxlbWVudCggb3B0LnByb2ZpbGVET00gKSB8fFxuICAgICAgICAgICAgIVZhbGlkYXRlVXRpbHMuaXNEb21FbGVtZW50KCBvcHQuZWRpdFBhZ2VET00gKSB8fFxuICAgICAgICAgICAgIVdlYkxhbmd1YWdlVXRpbHMuaXNTdXBwb3J0ZWRMYW5ndWFnZUlkKCBvcHQubGFuZ3VhZ2VJZCApIHx8XG4gICAgICAgICAgICAhVmFsaWRhdGVVdGlscy5pc1ZhbGlkSWQoIG9wdC5wcm9maWxlSWQgKVxuICAgICAgICApXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCAnaW52YWxpZCBhcmd1bWVudHMnICk7XG5cbiAgICAgICAgdGhpcy5ET00gPSB7XG4gICAgICAgICAgICBwcm9maWxlOiAgb3B0LnByb2ZpbGVET00sXG4gICAgICAgICAgICBlZGl0UGFnZTogb3B0LmVkaXRQYWdlRE9NLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICAgICAgZGJUYWJsZTogICAgJ3Byb2ZpbGUnLFxuICAgICAgICAgICAgbGFuZ3VhZ2VJZDogb3B0Lmxhbmd1YWdlSWQsXG4gICAgICAgICAgICBwcm9maWxlSWQ6ICBvcHQucHJvZmlsZUlkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSB7XG4gICAgICAgICAgICBub2RlOiAgIGJsb2NrID0+IGAucHJvZmlsZV9fJHsgYmxvY2sgfWAsXG4gICAgICAgICAgICB0ZXh0OiAgIGJsb2NrID0+IGAucHJvZmlsZV9faW5wdXQtYmxvY2stLSR7IGJsb2NrIH0gPiAuaW5wdXQtYmxvY2tfX2Jsb2NrID4gLmJsb2NrX19jb250ZW50ID4gLmNvbnRlbnRfX3dvcmRgLFxuICAgICAgICAgICAgdXBkYXRlOiBibG9jayA9PiBgLnByb2ZpbGVfX2lucHV0LWJsb2NrLS0keyBibG9jayB9ID4gLmlucHV0LWJsb2NrX19ibG9jayA+IC5ibG9ja19fY29udGVudCA+IC5jb250ZW50X19tb2RpZnlgLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZWRpdFBhZ2VDb25maWcgPSBkYXRhRWRpdFBhZ2VDb25maWcucHJvZmlsZTtcblxuICAgICAgICB0aGlzLmNsYXNzTW9kaWZpZXIgPSBPYmplY3QuZnJlZXplKCB7XG4gICAgICAgICAgICBuYW1lOiAgICAgICAgICAnbmFtZScsXG4gICAgICAgICAgICBvZmZpY2VBZGRyZXNzOiAgJ29mZmljZS1sb2NhdGlvbicsXG4gICAgICAgICAgICBsYWJOYW1lOiAgICAgICAnbGFiLW5hbWUnLFxuICAgICAgICAgICAgbGFiQWRkcmVzczogICAgJ2xhYi1sb2NhdGlvbicsXG4gICAgICAgICAgICBsYWJUZWw6ICAgICAgICAnbGFiLXRlbCcsXG4gICAgICAgICAgICBsYWJXZWI6ICAgICAgICAnbGFiLXdlYicsXG4gICAgICAgICAgICBvZmZpY2VUZWw6ICAgICAnb2ZmaWNlLXRlbCcsXG4gICAgICAgICAgICBlbWFpbDogICAgICAgICAnZW1haWwnLFxuICAgICAgICAgICAgZmF4OiAgICAgICAgICAgJ2ZheCcsXG4gICAgICAgICAgICBwZXJzb25hbFdlYjogICAncGVyc29uYWwtd2ViJyxcbiAgICAgICAgICAgIG5hdGlvbjogICAgICAgICduYXRpb24nLFxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdGhpcy5pMThuID0gZGF0YUkxOG4ucHJvZmlsZTtcblxuICAgICAgICB0aGlzLmltYWdlRE9NID0ge1xuICAgICAgICAgICAgYmxvY2s6ICAgb3B0LnByb2ZpbGVET00ucXVlcnlTZWxlY3RvciggJy5wcm9maWxlX19pbWFnZScgKSxcbiAgICAgICAgICAgIGJ1dHRvbjogIG9wdC5wcm9maWxlRE9NLnF1ZXJ5U2VsZWN0b3IoICcucHJvZmlsZV9faW1hZ2UgPiAuaW1hZ2VfX2ZyYW1lID4gLmZyYW1lX191cGxvYWQnICksXG4gICAgICAgICAgICBwcmV2aWV3OiBvcHQucHJvZmlsZURPTS5xdWVyeVNlbGVjdG9yKCAnLnByb2ZpbGVfX2ltYWdlID4gLmltYWdlX19mcmFtZScgKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlcGFydG1lbnQgPSBBcnJheVxuICAgICAgICAuZnJvbSggb3B0LnByb2ZpbGVET00ucXVlcnlTZWxlY3RvckFsbCggJy5pbnB1dC1ibG9jayA+IC5pbnB1dC1ibG9ja19fYmxvY2sgPiAuYmxvY2tfX2NvbnRlbnQgPiAuY29udGVudF9fdGFnLS1kZXBhcnRtZW50JyApIClcbiAgICAgICAgLm1hcCggbm9kZSA9PiAoIHtcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICBjbGFzc01vZGlmaWVyOiAnZGVwYXJ0bWVudCcsXG4gICAgICAgICAgICBzZWxlY3RlZDogICAgICBmYWxzZSxcbiAgICAgICAgICAgIGlkOiAgICAgICAgICAgIG5vZGUuZ2V0QXR0cmlidXRlKCAnZGF0YS1kZXBhcnRtZW50LWlkJyApLFxuICAgICAgICB9ICkgKTtcblxuICAgICAgICB0aGlzLnJlc2VhcmNoR3JvdXAgPSBBcnJheVxuICAgICAgICAuZnJvbSggb3B0LnByb2ZpbGVET00ucXVlcnlTZWxlY3RvckFsbCggJy5pbnB1dC1ibG9jayA+IC5pbnB1dC1ibG9ja19fYmxvY2sgPiAuYmxvY2tfX2NvbnRlbnQgPiAuY29udGVudF9fdGFnLS1yZXNlYXJjaCcgKSApXG4gICAgICAgIC5tYXAoIG5vZGUgPT4gKCB7XG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgY2xhc3NNb2RpZmllcjogJ3Jlc2VhcmNoJyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAgICAgIGZhbHNlLFxuICAgICAgICAgICAgaWQ6ICAgICAgICAgICAgbm9kZS5nZXRBdHRyaWJ1dGUoICdkYXRhLXJlc2VhcmNoLWlkJyApLFxuICAgICAgICB9ICkgKTtcbiAgICB9XG5cbiAgICBxdWVyeUFwaSAoIGxhbmd1YWdlSWQgKSB7XG4gICAgICAgIHJldHVybiBgJHsgaG9zdCB9L2FwaS9mYWN1bHR5L2ZhY3VsdHlXaXRoSWQvJHsgdGhpcy5jb25maWcucHJvZmlsZUlkIH0/bGFuZ3VhZ2VJZD0keyBsYW5ndWFnZUlkIH1gO1xuICAgIH1cblxuICAgIGFzeW5jIGZldGNoRGF0YSAoIGxhbmd1YWdlSWQgKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCggdGhpcy5xdWVyeUFwaSggbGFuZ3VhZ2VJZCApICk7XG5cbiAgICAgICAgICAgIGlmICggIXJlcy5vayApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnTm8gZmFjdWx0eSBmb3VuZCcgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKCBlcnIgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzZXREYXRhICgpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdOiBhd2FpdCB0aGlzLmZldGNoRGF0YSggTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgKSxcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogYXdhaXQgdGhpcy5mZXRjaERhdGEoIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApICksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS5sb2coIHJlcyApO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKCB0aGlzLmNsYXNzTW9kaWZpZXIgKS5mb3JFYWNoKCAoIGtleSApID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvZmlsZUJsb2NrKCBrZXksIHJlcyApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgdGhpcy5zZXRUYWdzKCByZXNbIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXSApO1xuICAgICAgICB0aGlzLnNldEltYWdlKCByZXNbIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQgXS5wcm9maWxlICk7XG4gICAgfVxuXG4gICAgY2xvc2VFZGl0UGFnZVdpbmRvdyAoKSB7XG4gICAgICAgIGNsYXNzQWRkKCB0aGlzLkRPTS5lZGl0UGFnZSwgJ2NvbnRlbnRfX2VkaXQtcGFnZS0taGlkZGVuJyApO1xuICAgIH1cblxuICAgIHNldFByb2ZpbGVCbG9jayAoIGRiVGFibGVJdGVtLCByZXMgKSB7XG4gICAgICAgIGNvbnN0IHRleHRET00gICAgICAgICA9IHRoaXMuRE9NLnByb2ZpbGUucXVlcnlTZWxlY3RvciggdGhpcy5zZWxlY3Rvci50ZXh0KCB0aGlzLmNsYXNzTW9kaWZpZXJbIGRiVGFibGVJdGVtIF0gKSApO1xuICAgICAgICBjb25zdCB1cGRhdGVCdXR0b25ET00gPSB0aGlzLkRPTS5wcm9maWxlLnF1ZXJ5U2VsZWN0b3IoIHRoaXMuc2VsZWN0b3IudXBkYXRlKCB0aGlzLmNsYXNzTW9kaWZpZXJbIGRiVGFibGVJdGVtIF0gKSApO1xuXG4gICAgICAgIHRleHRET00uaW5uZXJIVE1MID0gcmVzWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF0ucHJvZmlsZVsgZGJUYWJsZUl0ZW0gXTtcbiAgICAgICAgaWYgKCBkYlRhYmxlSXRlbSA9PT0gJ25hdGlvbicgKVxuICAgICAgICAgICAgdGV4dERPTS5pbm5lckhUTUwgPSBuYXRpb25VdGlscy5pMThuWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF1bIG5hdGlvblV0aWxzLm1hcFsgcmVzWyB0aGlzLmNvbmZpZy5sYW5ndWFnZUlkIF0ucHJvZmlsZS5uYXRpb24gXSBdO1xuXG5cbiAgICAgICAgdXBkYXRlQnV0dG9uRE9NLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0VXBkYXRlQnV0dG9uRXZlbnQoIGRiVGFibGVJdGVtLCByZXMgKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIGFzeW5jIHNldFVwZGF0ZUJ1dHRvbkV2ZW50ICggZGJUYWJsZUl0ZW0sIHJlcyApIHtcbiAgICAgICAgY29uc3QgdGVtcERhdGFJMThuID0ge1xuICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdOiB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICBbIGRiVGFibGVJdGVtIF06IHRoaXMuaTE4blsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXS5kZWZhdWx0WyBkYlRhYmxlSXRlbSBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdG9waWM6ICAgdGhpcy5pMThuWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdLnRvcGljWyBkYlRhYmxlSXRlbSBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgXTogIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIFsgZGJUYWJsZUl0ZW0gXTogdGhpcy5pMThuWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdLmRlZmF1bHRbIGRiVGFibGVJdGVtIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0b3BpYzogICB0aGlzLmkxOG5bIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF0udG9waWNbIGRiVGFibGVJdGVtIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlZGl0UGFnZSA9IG5ldyBFZGl0UGFnZSgge1xuICAgICAgICAgICAgZWRpdFBhZ2VET006ICAgIHRoaXMuRE9NLmVkaXRQYWdlLFxuICAgICAgICAgICAgZGJUYWJsZTogICAgICAgICdwcm9maWxlJyxcbiAgICAgICAgICAgIGVkaXRQYWdlQ29uZmlnOiB0aGlzLmVkaXRQYWdlQ29uZmlnWyBkYlRhYmxlSXRlbSBdLFxuICAgICAgICAgICAgbGFuZ3VhZ2VJZDogICAgIHRoaXMuY29uZmlnLmxhbmd1YWdlSWQsXG4gICAgICAgICAgICBkYXRhSTE4bjogICAgICAgdGVtcERhdGFJMThuLFxuICAgICAgICAgICAgZGJEYXRhOiAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXTogcmVzWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSBdLnByb2ZpbGUsXG4gICAgICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdOiByZXNbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF0ucHJvZmlsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidXR0b25NZXRob2Q6ICd1cGRhdGUnLFxuICAgICAgICB9ICk7XG4gICAgICAgIGNvbnN0IGVkaXRQYWdlRE9NID0gYXdhaXQgZWRpdFBhZ2UucmVuZGVyRWRpdFBhZ2UoKTtcblxuICAgICAgICBlZGl0UGFnZURPTS5jYW5jZWwuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXRQYWdlV2luZG93KCk7XG4gICAgICAgIH0gKTtcbiAgICAgICAgZWRpdFBhZ2VET00uY2hlY2suYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBlICkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IHRoaXMuY2hlY2tTdWJtaXREYXRhKCBlZGl0UGFnZURPTS5lcnJvciApO1xuICAgICAgICAgICAgaWYgKCBpc1ZhbGlkIClcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZFByb2ZpbGVEYXRhKCBkYlRhYmxlSXRlbSApO1xuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgY2hlY2tTdWJtaXREYXRhICggZXJyb3JET00gKSB7XG4gICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLkRPTS5lZGl0UGFnZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2lucHV0JyApO1xuXG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgWyBgbmFtZV8keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfkuK3mloflp5PlkI3mmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgWyBgbmFtZV8keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICdlbi1VUycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfoi7Hmloflp5PlkI3mmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICBwcmVzZW5jZToge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0VtcHR5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogICAgJ2VtYWls5piv5b+F5aGr5qyE5L2NJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdlbWFpbOagvOW8j+mMr+iqpCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYXg6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybjogJ1swLTktKCldKycsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflgrPnnJ/moLzlvI/pjK/oqqQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGVyc29uYWxXZWI6IHtcbiAgICAgICAgICAgICAgICBwcmVzZW5jZToge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0VtcHR5OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfntrLlnYDmoLzlvI/pjK/oqqQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgWyBgb2ZmaWNlQWRkcmVzc18keyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSB9YCBdOiB7XG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICAgICfkuK3mlofovqblhazlrqTkvY3nva7mmK/lv4XloavmrITkvY0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb2ZmaWNlVGVsOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiB7XG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46ICdbMC05LSgpLF0rJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+mbu+ipseagvOW8j+mMr+iqpCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYWJUZWw6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybjogJ1swLTktKCksXSsnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6Zu76Kmx5qC85byP6Yyv6KqkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhYldlYjoge1xuICAgICAgICAgICAgICAgIHVybDoge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn57ay5Z2A5qC85byP6Yyv6KqkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBBcnJheS5mcm9tKCBpbnB1dCApLmZvckVhY2goICggZWxlbWVudCApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRlLnNpbmdsZSggZWxlbWVudC52YWx1ZSwgY29uc3RyYWludHNbIGVsZW1lbnQubmFtZSBdICk7XG4gICAgICAgICAgICBpZiAoIGVycm9ycyApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVycm9yTWVzc2FnZSggZWxlbWVudCwgZXJyb3JzWyAwIF0sIGVycm9yRE9NICk7XG4gICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfVxuXG4gICAgc2V0RXJyb3JNZXNzYWdlICggaW5wdXRET00sIGVycm9yTWVzc2FnZSwgZXJyb3JET00gKSB7XG4gICAgICAgIGlucHV0RE9NLmZvY3VzKCk7XG4gICAgICAgIGVycm9yRE9NLmlubmVySFRNTCA9IGVycm9yTWVzc2FnZTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGxvYWRQcm9maWxlRGF0YSAoIGRiVGFibGVJdGVtICkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuRE9NLmVkaXRQYWdlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7fTtcbiAgICAgICAgY29uc3QgaTE4biA9IHtcbiAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXToge30sXG4gICAgICAgICAgICBbIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ3poLVRXJyApIF06IHt9LFxuICAgICAgICB9O1xuICAgICAgICBBcnJheS5mcm9tKCBpbnB1dCApLmZvckVhY2goICggZWxlbWVudCApID0+IHtcbiAgICAgICAgICAgIGlmICggZWxlbWVudC5nZXRBdHRyaWJ1dGUoICd0eXBlJyApID09PSAndGV4dCcgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdpMThuJyApICE9PSBudWxsIClcbiAgICAgICAgICAgICAgICBpMThuWyBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2xhbmd1YWdlSWQnICkgXVsgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdkYlRhYmxlSXRlbScgKSBdID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpdGVtWyBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2RiVGFibGVJdGVtJyApIF0gPSBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgZmV0Y2goIGAkeyBob3N0IH0vdXNlci9wcm9maWxlYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAgICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6ICAgSlNPTi5zdHJpbmdpZnkoIHtcbiAgICAgICAgICAgICAgICAncHJvZmlsZUlkJzogICAgdGhpcy5jb25maWcucHJvZmlsZUlkLFxuICAgICAgICAgICAgICAgICdtZXRob2QnOiAgICAgICAndXBkYXRlJyxcbiAgICAgICAgICAgICAgICAnZGJUYWJsZSc6ICAgICAgJ3Byb2ZpbGUnLFxuICAgICAgICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgICAgICAgaTE4bixcbiAgICAgICAgICAgIH0gKSxcbiAgICAgICAgfSApXG4gICAgICAgIC50aGVuKCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIFsgTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnZW4tVVMnICkgXTogYXdhaXQgdGhpcy5mZXRjaERhdGEoIExhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VJZCggJ2VuLVVTJyApICksXG4gICAgICAgICAgICAgICAgWyBMYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlSWQoICd6aC1UVycgKSBdOiBhd2FpdCB0aGlzLmZldGNoRGF0YSggTGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZUlkKCAnemgtVFcnICkgKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNldFByb2ZpbGVCbG9jayggZGJUYWJsZUl0ZW0sIGRhdGEgKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0UGFnZVdpbmRvdygpO1xuICAgICAgICB9ICkuY2F0Y2goICggZXJyICkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXRQYWdlV2luZG93KCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCBlcnIgKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIHNldEltYWdlICggcmVzICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCBWYWxpZGF0ZVV0aWxzLmlzVmFsaWRTdHJpbmcoIHJlcy5waG90byApICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBob3RvVXJsID0gYCR7IGhvc3QgfS9zdGF0aWMvaW1hZ2UvZmFjdWx0eS8keyByZXMucGhvdG8gfWA7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZURPTS5wcmV2aWV3LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7IHBob3RvVXJsIH0nKWA7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZURPTS5idXR0b24ubmFtZSA9IGBtb2RpZnlfcHJvZmlsZV9waG90b18wXyR7IHRoaXMuY29uZmlnLnByb2ZpbGVJZCB9YDtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlRE9NLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdtZXRob2QnLCAndXBkYXRlJyApO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VET00uYnV0dG9uLnNldEF0dHJpYnV0ZSggJ2RiVGFibGUnLCAncHJvZmlsZScgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlRE9NLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdkYlRhYmxlSXRlbScsICdwaG90bycgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlRE9NLmJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdsYW5ndWFnZUlkJywgdGhpcy5jb25maWcubGFuZ3VhZ2VJZCApO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VET00uYmxvY2suYWN0aW9uID0gYCR7IGhvc3QgfS91c2VyL3Byb2ZpbGVgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmltYWdlRE9NLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbWFnZURPTS5idXR0b247XG4gICAgICAgICAgICAgICAgaWYgKCBpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1sgMCBdICkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoIGUgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRE9NLnByZXZpZXcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHsgZS50YXJnZXQucmVzdWx0IH0nKWA7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKCBpbnB1dC5maWxlc1sgMCBdICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoICggZXJyICkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciggZXJyICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRUYWdzICggcmVzICkge1xuICAgICAgICBbICdkZXBhcnRtZW50JyxcbiAgICAgICAgICAgICdyZXNlYXJjaEdyb3VwJywgXS5mb3JFYWNoKCAoIGRiVGFibGUgKSA9PiB7XG4gICAgICAgICAgICByZXNbIGRiVGFibGUgXS5mb3JFYWNoKCAoIGVsZW1lbnQgKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xhc3NBZGQoIHRoaXNbIGRiVGFibGUgXVsgZWxlbWVudC50eXBlIF0ubm9kZSwgYGNvbnRlbnRfX3RhZy0tJHsgdGhpc1sgZGJUYWJsZSBdWyBlbGVtZW50LnR5cGUgXS5jbGFzc01vZGlmaWVyIH0tLWFjdGl2ZWAgKTtcbiAgICAgICAgICAgICAgICB0aGlzWyBkYlRhYmxlIF1bIGVsZW1lbnQudHlwZSBdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIHRoaXNbIGRiVGFibGUgXS5mb3JFYWNoKCAoIGVsZW1lbnQgKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gKCBlbGVtZW50LnNlbGVjdGVkICkgPyAnZGVsZXRlJyA6ICdhZGQnO1xuICAgICAgICAgICAgICAgICAgICBmZXRjaCggYCR7IGhvc3QgfS91c2VyL3Byb2ZpbGVgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICAgJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogICBKU09OLnN0cmluZ2lmeSgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVJZDogICAgIHRoaXMuY29uZmlnLnByb2ZpbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGJUYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYlRhYmxlSXRlbUlkOiBlbGVtZW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSApLFxuICAgICAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZWxlbWVudC5zZWxlY3RlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc1JlbW92ZSggZWxlbWVudC5ub2RlLCBgY29udGVudF9fdGFnLS0keyB0aGlzWyBkYlRhYmxlIF1bIGVsZW1lbnQuaWQgXS5jbGFzc01vZGlmaWVyIH0tLWFjdGl2ZWAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0FkZCggZWxlbWVudC5ub2RlLCBgY29udGVudF9fdGFnLS0keyB0aGlzWyBkYlRhYmxlIF1bIGVsZW1lbnQuaWQgXS5jbGFzc01vZGlmaWVyIH0tLWFjdGl2ZWAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCggKCBlcnIgKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCBlcnIgKTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWMgKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldERhdGEoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgR2V0SGVhZGVyQmFzZSBmcm9tICdzdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvY29tbW9uL2hlYWRlci1iYXNlLmpzJztcbmltcG9ydCBHZXRIZWFkZXJNZWRpdW0gZnJvbSAnc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL2NvbW1vbi9oZWFkZXItbWVkaXVtLmpzJztcbmltcG9ydCBHZXRIZWFkZXJMYXJnZSBmcm9tICdzdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvY29tbW9uL2hlYWRlci1sYXJnZS5qcyc7XG5pbXBvcnQgV2ViTGFuZ3VhZ2VVdGlscyBmcm9tICdzdGF0aWMvc3JjL2pzL3V0aWxzL2xhbmd1YWdlLmpzJztcbmltcG9ydCBTZXRQcm9maWxlRGF0YSBmcm9tICdzdGF0aWMvc3JjL2pzL2NvbXBvbmVudHMvdXNlci9zZXQtcHJvZmlsZS1kYXRhLmpzJztcbmltcG9ydCB7IFNldERhdGEsIH0gZnJvbSAnc3RhdGljL3NyYy9qcy9jb21wb25lbnRzL3VzZXIvc2V0LWRhdGEuanMnO1xuXG50cnkge1xuICAgIGNvbnN0IGhlYWRlckJhc2UgPSBuZXcgR2V0SGVhZGVyQmFzZSgge1xuICAgICAgICBoZWFkZXJET006ICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmJvZHlfX2hlYWRlci5oZWFkZXIuaGVhZGVyLS1iYXNlJyApLFxuICAgICAgICBhbGxIZWFkZXJET01zOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLmJvZHlfX2hlYWRlci5oZWFkZXInICksXG4gICAgfSApO1xuICAgIGlmICggISggaGVhZGVyQmFzZSBpbnN0YW5jZW9mIEdldEhlYWRlckJhc2UgKSApXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggJy5oZWFkZXIuaGVhZGVyLS1iYXNlIG5vdCBmb3VuZC4nICk7XG59XG5jYXRjaCAoIGVyciApIHtcbiAgICBjb25zb2xlLmVycm9yKCBlcnIgKTtcbn1cblxudHJ5IHtcbiAgICBjb25zdCBoZWFkZXJNZWRpdW0gPSBuZXcgR2V0SGVhZGVyTWVkaXVtKCB7XG4gICAgICAgIGhlYWRlckRPTTogICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuYm9keV9faGVhZGVyLmhlYWRlci5oZWFkZXItLW1lZGl1bScgKSxcbiAgICAgICAgYWxsSGVhZGVyRE9NczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5ib2R5X19oZWFkZXIuaGVhZGVyJyApLFxuICAgIH0gKTtcbiAgICBpZiAoICEoIGhlYWRlck1lZGl1bSBpbnN0YW5jZW9mIEdldEhlYWRlck1lZGl1bSApIClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnLmhlYWRlci5oZWFkZXItLW1lZGl1bSBub3QgZm91bmQuJyApO1xufVxuY2F0Y2ggKCBlcnIgKSB7XG4gICAgY29uc29sZS5lcnJvciggZXJyICk7XG59XG5cbnRyeSB7XG4gICAgY29uc3QgaGVhZGVyTGFyZ2UgPSBuZXcgR2V0SGVhZGVyTGFyZ2UoIHtcbiAgICAgICAgaGVhZGVyRE9NOiAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5ib2R5X19oZWFkZXIuaGVhZGVyLmhlYWRlci0tbGFyZ2UnICksXG4gICAgfSApO1xuICAgIGlmICggISggaGVhZGVyTGFyZ2UgaW5zdGFuY2VvZiBHZXRIZWFkZXJMYXJnZSApIClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnLmhlYWRlci5oZWFkZXItLW1lZGl1bSBub3QgZm91bmQuJyApO1xufVxuY2F0Y2ggKCBlcnIgKSB7XG4gICAgY29uc29sZS5lcnJvciggZXJyICk7XG59XG5cbnRyeSB7XG4gICAgY29uc3Qgc2V0UHJvZmlsZURhdGEgPSBuZXcgU2V0UHJvZmlsZURhdGEoIHtcbiAgICAgICAgcHJvZmlsZURPTTogICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdwcm9maWxlJyApLFxuICAgICAgICBlZGl0UGFnZURPTTogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2VkaXQtcGFnZScgKSxcbiAgICAgICAgbGFuZ3VhZ2VJZDogICAgICAgV2ViTGFuZ3VhZ2VVdGlscy5jdXJyZW50TGFuZ3VhZ2VJZCxcbiAgICAgICAgcHJvZmlsZUlkOiAgICAgICAgMjQsXG4gICAgfSApO1xuXG4gICAgc2V0UHJvZmlsZURhdGEuZXhlYygpO1xufVxuY2F0Y2ggKCBlcnIgKSB7XG4gICAgY29uc29sZS5lcnJvciggZXJyICk7XG59XG5cbnRyeSB7XG4gICAgY29uc3Qgc2V0RWR1Y2F0aW9uRGF0YSA9IG5ldyBTZXREYXRhKCB7XG4gICAgICAgIGJsb2NrRE9NOiAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2VkdWNhdGlvbicgKSxcbiAgICAgICAgZWRpdFBhZ2VET006ICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdlZGl0LXBhZ2UnICksXG4gICAgICAgIGFkZEJ1dHRvbkRPTTogICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnYWRkX19idXR0b24tLWVkdWNhdGlvbi1ibG9jaycgKSxcbiAgICAgICAgbGFuZ3VhZ2VJZDogICAgICAgV2ViTGFuZ3VhZ2VVdGlscy5jdXJyZW50TGFuZ3VhZ2VJZCxcbiAgICAgICAgZGJUYWJsZTogICAgICAgICAgJ2VkdWNhdGlvbicsXG4gICAgICAgIHByb2ZpbGVJZDogICAgICAgIDI0LFxuICAgIH0gKTtcblxuICAgIHNldEVkdWNhdGlvbkRhdGEuZXhlYygpO1xufVxuY2F0Y2ggKCBlcnIgKSB7XG4gICAgY29uc29sZS5lcnJvciggZXJyICk7XG59XG5cbnRyeSB7XG4gICAgY29uc3Qgc2V0RXhwZXJpZW5jZURhdGEgPSBuZXcgU2V0RGF0YSgge1xuICAgICAgICBibG9ja0RPTTogICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdleHBlcmllbmNlJyApLFxuICAgICAgICBlZGl0UGFnZURPTTogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2VkaXQtcGFnZScgKSxcbiAgICAgICAgYWRkQnV0dG9uRE9NOiAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdhZGRfX2J1dHRvbi0tZXhwZXJpZW5jZS1ibG9jaycgKSxcbiAgICAgICAgbGFuZ3VhZ2VJZDogICAgICAgV2ViTGFuZ3VhZ2VVdGlscy5jdXJyZW50TGFuZ3VhZ2VJZCxcbiAgICAgICAgZGJUYWJsZTogICAgICAgICAgJ2V4cGVyaWVuY2UnLFxuICAgICAgICBwcm9maWxlSWQ6ICAgICAgICAyNCxcbiAgICB9ICk7XG4gICAgaWYgKCAhKCBzZXRFeHBlcmllbmNlRGF0YSBpbnN0YW5jZW9mIFNldERhdGEgKSApXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggJ3NldEV4cGVyaWVuY2VEYXRhIGluVmFpbGQnICk7XG5cbiAgICBzZXRFeHBlcmllbmNlRGF0YS5leGVjKCk7XG59XG5jYXRjaCAoIGVyciApIHtcbiAgICBjb25zb2xlLmVycm9yKCBlcnIgKTtcbn1cblxudHJ5IHtcbiAgICBjb25zdCBzZXRUaXRsZURhdGEgPSBuZXcgU2V0RGF0YSgge1xuICAgICAgICBibG9ja0RPTTogICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3RpdGxlJyApLFxuICAgICAgICBlZGl0UGFnZURPTTogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2VkaXQtcGFnZScgKSxcbiAgICAgICAgYWRkQnV0dG9uRE9NOiAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdhZGRfX2J1dHRvbi0tdGl0bGUnICksXG4gICAgICAgIGxhbmd1YWdlSWQ6ICAgICAgIFdlYkxhbmd1YWdlVXRpbHMuY3VycmVudExhbmd1YWdlSWQsXG4gICAgICAgIGRiVGFibGU6ICAgICAgICAgICd0aXRsZScsXG4gICAgICAgIHByb2ZpbGVJZDogICAgICAgIDI0LFxuICAgIH0gKTtcbiAgICBpZiAoICEoIHNldFRpdGxlRGF0YSBpbnN0YW5jZW9mIFNldERhdGEgKSApXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggJ3NldFRpdGxlRGF0YSBpblZhaWxkJyApO1xuXG4gICAgc2V0VGl0bGVEYXRhLmV4ZWMoKTtcbn1cbmNhdGNoICggZXJyICkge1xuICAgIGNvbnNvbGUuZXJyb3IoIGVyciApO1xufVxuXG50cnkge1xuICAgIGNvbnN0IHNldFNwZWNpYWx0eURhdGEgPSBuZXcgU2V0RGF0YSgge1xuICAgICAgICBibG9ja0RPTTogICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3NwZWNpYWx0eScgKSxcbiAgICAgICAgZWRpdFBhZ2VET006ICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdlZGl0LXBhZ2UnICksXG4gICAgICAgIGFkZEJ1dHRvbkRPTTogICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnYWRkX19idXR0b24tLXNwZWNpYWx0eScgKSxcbiAgICAgICAgbGFuZ3VhZ2VJZDogICAgICAgV2ViTGFuZ3VhZ2VVdGlscy5jdXJyZW50TGFuZ3VhZ2VJZCxcbiAgICAgICAgZGJUYWJsZTogICAgICAgICAgJ3NwZWNpYWx0eScsXG4gICAgICAgIHByb2ZpbGVJZDogICAgICAgIDI0LFxuICAgIH0gKTtcbiAgICBpZiAoICEoIHNldFNwZWNpYWx0eURhdGEgaW5zdGFuY2VvZiBTZXREYXRhICkgKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdzZXRTcGVjaWFsdHlEYXRhIGluVmFpbGQnICk7XG5cbiAgICBzZXRTcGVjaWFsdHlEYXRhLmV4ZWMoKTtcbn1cbmNhdGNoICggZXJyICkge1xuICAgIGNvbnNvbGUuZXJyb3IoIGVyciApO1xufVxuIiwiaW1wb3J0IExhbmd1YWdlVXRpbHMgZnJvbSAnbW9kZWxzL2NvbW1vbi91dGlscy9sYW5ndWFnZS5qcyc7XG5cbmNsYXNzIFdlYkxhbmd1YWdlVXRpbHMgZXh0ZW5kcyBMYW5ndWFnZVV0aWxzIHtcbiAgICBzdGF0aWMgZ2V0IGN1cnJlbnRMYW5ndWFnZUlkICgpIHtcbiAgICAgICAgbGV0IGxhbmd1YWdlSWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCB3aW5kb3cubG9jYXRpb24uc2VhcmNoICkuZ2V0KCAnbGFuZ3VhZ2VJZCcgKTtcbiAgICAgICAgbGFuZ3VhZ2VJZCA9IE51bWJlciggbGFuZ3VhZ2VJZCApO1xuICAgICAgICBpZiAoIGxhbmd1YWdlSWQgJiYgV2ViTGFuZ3VhZ2VVdGlscy5pc1N1cHBvcnRlZExhbmd1YWdlSWQoIGxhbmd1YWdlSWQgKSApXG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VJZDtcbiAgICAgICAgcmV0dXJuIExhbmd1YWdlVXRpbHMuZGVmYXVsdExhbmd1YWdlSWQ7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXZWJMYW5ndWFnZVV0aWxzO1xuIiwiaW1wb3J0IFZhbGlkYXRlVXRpbHMgZnJvbSAnbW9kZWxzL2NvbW1vbi91dGlscy92YWxpZGF0ZS5qcyc7XG5cbi8qKlxuICogTWFraW5nIHN1cmUgdGhlcmUgaXMgbm8gYGNsYXNzTmFtZWAgY2xhc3Mgb24gdGhlIGVsZW1lbnQgYmVmb3JlIGFkZGluZyB0aGUgYGNsYXNzTmFtZWAgY2xhc3MgdG8gdGhlIGNsYXNzbGlzdC5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xhc3NBZGQgKCBlbGVtZW50LCBjbGFzc05hbWUgKSB7XG4gICAgaWYgKCAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoIGNsYXNzTmFtZSApIClcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCBjbGFzc05hbWUgKTtcbn1cblxuLyoqXG4gKiBNYWtpbmcgc3VyZSB0aGVyZSBpcyBgY2xhc3NOYW1lYCBjbGFzcyBvbiB0aGUgZWxlbWVudCBiZWZvcmUgcmVtb3ZpbmcgdGhlIGBjbGFzc05hbWVgIGNsYXNzIGZyb20gdGhlIGNsYXNzbGlzdC5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xhc3NSZW1vdmUgKCBlbGVtZW50LCBjbGFzc05hbWUgKSB7XG4gICAgaWYgKCBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyggY2xhc3NOYW1lICkgKVxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoIGNsYXNzTmFtZSApO1xufVxuXG4vKipcbiAqIERlbGF5IHJlcXVpcmVkIG1pbGxpc2Vjb25kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtc1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn1cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGVsYXkgKCBtcyA9IDEgKSB7XG4gICAgaWYgKCAhVmFsaWRhdGVVdGlscy5pc1Bvc2l0aXZlSW50ZWdlciggbXMgKSApXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoICdQYXJhbWV0ZXIgYG1zYCBzaG91bGQgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicgKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoIHJlcyA9PiBzZXRUaW1lb3V0KCByZXMsIG1zICkgKTtcbn1cbiIsInZhciBwdWcgPSByZXF1aXJlKFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wdWctcnVudGltZS9pbmRleC5qc1wiKTtcblxuZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7dmFyIHB1Z19odG1sID0gXCJcIiwgcHVnX21peGlucyA9IHt9LCBwdWdfaW50ZXJwOzt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChkYXRhKSB7XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDc2VjdGlvblwiICsgKHB1Zy5hdHRyKFwiY2xhc3NcIiwgcHVnLmNsYXNzZXMoW1wiaW5wdXQtYmxvY2tcIixgJHsgZGF0YS5pbmZvLm1vZGlmaWVyIH1fX2lucHV0LWJsb2NrICR7IGRhdGEuaW5mby5tb2RpZmllciB9X19pbnB1dC1ibG9jay0tJHsgZGF0YS5pbmZvLm1vZGlmaWVyIH1gXSwgW2ZhbHNlLHRydWVdKSwgZmFsc2UsIHRydWUpK3B1Zy5hdHRyKFwiaWRcIiwgYCR7IGRhdGEubW9kaWZpZXIgfS0keyBkYXRhLmlkIH1gLCB0cnVlLCB0cnVlKSkgKyBcIlxcdTAwM0VcXHUwMDNDbWFpbiBjbGFzcz1cXFwiaW5wdXQtYmxvY2tfX2Jsb2NrIGJsb2NrXFxcIlxcdTAwM0UgXFx1MDAzQ2FydGljbGUgY2xhc3M9XFxcImJsb2NrX19jb250ZW50IGNvbnRlbnRcXFwiXFx1MDAzRVxcdTAwM0NwIGNsYXNzPVxcXCJjb250ZW50X193b3JkXFxcIlxcdTAwM0VcIiArIChwdWcuZXNjYXBlKG51bGwgPT0gKHB1Z19pbnRlcnAgPSBkYXRhLmluZm8uY29udGVudCkgPyBcIlwiIDogcHVnX2ludGVycCkpICsgXCJcXHUwMDNDXFx1MDAyRnBcXHUwMDNFXFx1MDAzQ2J1dHRvblwiICsgKHB1Zy5hdHRyKFwiY2xhc3NcIiwgcHVnLmNsYXNzZXMoW1wiY29udGVudF9fcmVtb3ZlXCIsYGNvbnRlbnRfX3JlbW92ZS0tJHsgZGF0YS5pbmZvLm1vZGlmaWVyIH0tJHsgZGF0YS5pbmZvLmlkIH1gXSwgW2ZhbHNlLHRydWVdKSwgZmFsc2UsIHRydWUpKSArIFwiXFx1MDAzRVwiICsgKHB1Zy5lc2NhcGUobnVsbCA9PSAocHVnX2ludGVycCA9IGRhdGEuYnV0dG9uLnJlbW92ZSkgPyBcIlwiIDogcHVnX2ludGVycCkpICsgXCJcXHUwMDNDXFx1MDAyRmJ1dHRvblxcdTAwM0VcXHUwMDNDYnV0dG9uXCIgKyAocHVnLmF0dHIoXCJjbGFzc1wiLCBwdWcuY2xhc3NlcyhbXCJjb250ZW50X19tb2RpZnlcIixgY29udGVudF9fbW9kaWZ5LS0keyBkYXRhLmluZm8ubW9kaWZpZXIgfS0keyBkYXRhLmluZm8uaWQgfWBdLCBbZmFsc2UsdHJ1ZV0pLCBmYWxzZSwgdHJ1ZSkpICsgXCJcXHUwMDNFXCIgKyAocHVnLmVzY2FwZShudWxsID09IChwdWdfaW50ZXJwID0gZGF0YS5idXR0b24ubW9kaWZ5KSA/IFwiXCIgOiBwdWdfaW50ZXJwKSkgKyBcIlxcdTAwM0NcXHUwMDJGYnV0dG9uXFx1MDAzRVxcdTAwM0NcXHUwMDJGYXJ0aWNsZVxcdTAwM0VcXHUwMDNDXFx1MDAyRm1haW5cXHUwMDNFXFx1MDAzQ1xcdTAwMkZzZWN0aW9uXFx1MDAzRVwiO30uY2FsbCh0aGlzLFwiZGF0YVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZGF0YTp0eXBlb2YgZGF0YSE9PVwidW5kZWZpbmVkXCI/ZGF0YTp1bmRlZmluZWQpKTs7cmV0dXJuIHB1Z19odG1sO307XG5tb2R1bGUuZXhwb3J0cyA9IHRlbXBsYXRlOyIsInZhciBwdWcgPSByZXF1aXJlKFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9wdWctcnVudGltZS9pbmRleC5qc1wiKTtcblxuZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7dmFyIHB1Z19odG1sID0gXCJcIiwgcHVnX21peGlucyA9IHt9LCBwdWdfaW50ZXJwOzt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChjb250ZW50LCBkYXRhLCBkYXRhVHlwZSwgZGJUYWJsZUl0ZW0sIGZsYWcsIGZyb20sIGkxOG4sIGxhbmd1YWdlSWQsIGxvY2FsVG9waWMsIG5hbWUsIG5hbWVGcm9tLCBuYW1lVG8sIHBsYWNlaG9sZGVyLCB0bywgdG9wLCB0eXBlLCB2YWx1ZSwgdmFsdWVGcm9tLCB2YWx1ZVRvKSB7XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDYXJ0aWNsZSBjbGFzcz1cXFwiaW5mb19faW5wdXRcXFwiIGlkPVxcXCJpbnB1dFxcXCJcXHUwMDNFXCI7XG5pZiAodHlwZSA9PT0gJ3RleHQnKSB7XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDc2VjdGlvbiBjbGFzcz1cXFwiaW5wdXRfX3RleHRcXFwiXFx1MDAzRVwiO1xuaWYgKGZsYWcgIT09IG51bGwpIHtcbnB1Z19odG1sID0gcHVnX2h0bWwgKyBcIlxcdTAwM0NpbWdcIiArIChcIiBjbGFzcz1cXFwiaW5wdXRfX2ZsYWdcXFwiXCIrcHVnLmF0dHIoXCJzcmNcIiwgZmxhZywgdHJ1ZSwgdHJ1ZSkrXCIgYWx0PVxcXCImZ3Q7XFxcIlwiKSArIFwiXFx1MDAzRVwiO1xufVxuaWYgKGNvbnRlbnQgIT09IG51bGwpIHtcbnB1Z19odG1sID0gcHVnX2h0bWwgKyBcIlxcdTAwM0NpbnB1dFwiICsgKFwiIGNsYXNzPVxcXCJpbnB1dF9fY29udGVudFxcXCJcIitwdWcuYXR0cihcInBsYWNlaG9sZGVyXCIsIHBsYWNlaG9sZGVyLCB0cnVlLCB0cnVlKStwdWcuYXR0cihcInR5cGVcIiwgZGF0YVR5cGUsIHRydWUsIHRydWUpK3B1Zy5hdHRyKFwidmFsdWVcIiwgdmFsdWUsIHRydWUsIHRydWUpK3B1Zy5hdHRyKFwibmFtZVwiLCBuYW1lLCB0cnVlLCB0cnVlKStwdWcuYXR0cihcImRiVGFibGVJdGVtXCIsIGRiVGFibGVJdGVtLCB0cnVlLCB0cnVlKStwdWcuYXR0cihcImxhbmd1YWdlSWRcIiwgbGFuZ3VhZ2VJZCwgdHJ1ZSwgdHJ1ZSkrcHVnLmF0dHIoXCJpMThuXCIsIGkxOG4sIHRydWUsIHRydWUpKSArIFwiXFx1MDAzRVwiO1xufVxucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ1xcdTAwMkZzZWN0aW9uXFx1MDAzRVwiO1xufVxuZWxzZVxuaWYgKHR5cGUgPT09ICd0aW1lJykge1xucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ2FydGljbGUgY2xhc3M9XFxcImlucHV0X190aW1lIHRpbWVcXFwiXFx1MDAzRVxcdTAwM0Nhc2lkZSBjbGFzcz1cXFwidGltZV9fZnJvbSBmcm9tXFxcIlxcdTAwM0VcXHUwMDNDbGFiZWwgY2xhc3M9XFxcImZyb21fX3RleHRcXFwiXFx1MDAzRVwiICsgKHB1Zy5lc2NhcGUobnVsbCA9PSAocHVnX2ludGVycCA9IGZyb20pID8gXCJcIiA6IHB1Z19pbnRlcnApKSArIFwiXFx1MDAzQ1xcdTAwMkZsYWJlbFxcdTAwM0VcXHUwMDNDc3BhbiBjbGFzcz1cXFwiZnJvbV9faW5wdXQgaW5wdXRcXFwiXFx1MDAzRVxcdTAwM0NpbnB1dFwiICsgKFwiIGNsYXNzPVxcXCJpbnB1dF9feWVhclxcXCJcIitcIiB0eXBlPVxcXCJudW1iZXJcXFwiXCIrcHVnLmF0dHIoXCJ2YWx1ZVwiLCB2YWx1ZUZyb20sIHRydWUsIHRydWUpK1wiIGRiVGFibGVJdGVtPVxcXCJmcm9tXFxcIiBwbGFjZWhvbGRlcj1cXFwieXl5eVxcXCJcIitwdWcuYXR0cihcIm5hbWVcIiwgbmFtZUZyb20sIHRydWUsIHRydWUpKSArIFwiXFx1MDAzRVxcdTAwM0NcXHUwMDJGc3BhblxcdTAwM0VcXHUwMDNDXFx1MDAyRmFzaWRlXFx1MDAzRVxcdTAwM0Nhc2lkZSBjbGFzcz1cXFwidGltZV9fdG8gdG9cXFwiXFx1MDAzRVxcdTAwM0NsYWJlbCBjbGFzcz1cXFwidG9fX3RleHRcXFwiXFx1MDAzRVwiICsgKHB1Zy5lc2NhcGUobnVsbCA9PSAocHVnX2ludGVycCA9IHRvKSA/IFwiXCIgOiBwdWdfaW50ZXJwKSkgKyBcIlxcdTAwM0NcXHUwMDJGbGFiZWxcXHUwMDNFXFx1MDAzQ3NwYW4gY2xhc3M9XFxcInRvX19pbnB1dCBpbnB1dFxcXCJcXHUwMDNFXFx1MDAzQ2lucHV0XCIgKyAoXCIgY2xhc3M9XFxcImlucHV0X195ZWFyXFxcIlwiK1wiIHR5cGU9XFxcIm51bWJlclxcXCJcIitwdWcuYXR0cihcInZhbHVlXCIsIHZhbHVlVG8sIHRydWUsIHRydWUpK1wiIHBsYWNlaG9sZGVyPVxcXCJ5eXl5XFxcIlwiK3B1Zy5hdHRyKFwibmFtZVwiLCBuYW1lVG8sIHRydWUsIHRydWUpK1wiIGRiVGFibGVJdGVtPVxcXCJ0b1xcXCJcIikgKyBcIlxcdTAwM0VcXHUwMDNDXFx1MDAyRnNwYW5cXHUwMDNFXFx1MDAzQ1xcdTAwMkZhc2lkZVxcdTAwM0VcXHUwMDNDXFx1MDAyRmFydGljbGVcXHUwMDNFXCI7XG59XG5lbHNlXG5pZiAodHlwZSA9PT0gJ2xvY2FsLXRvcGljJykge1xucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ3NlY3Rpb24gY2xhc3M9XFxcImlucHV0X19sb2NhbC10b3BpYyBsb2NhbC10b3BpY1xcXCJcXHUwMDNFIFxcdTAwM0NwIGNsYXNzPVxcXCJsb2NhbC10b3BpY19fdGV4dFxcXCJcXHUwMDNFXCIgKyAocHVnLmVzY2FwZShudWxsID09IChwdWdfaW50ZXJwID0gbG9jYWxUb3BpYykgPyBcIlwiIDogcHVnX2ludGVycCkpICsgXCJcXHUwMDNDXFx1MDAyRnBcXHUwMDNFXFx1MDAzQ1xcdTAwMkZzZWN0aW9uXFx1MDAzRVwiO1xufVxuZWxzZVxuaWYgKHR5cGUgPT09ICdkcm9wZG93bicpIHtcbnB1Z19odG1sID0gcHVnX2h0bWwgKyBcIlxcdTAwM0NzZWN0aW9uIGNsYXNzPVxcXCJpbnB1dF9fZHJvcGRvd24gZHJvcGRvd25cXFwiXFx1MDAzRVxcdTAwM0NzZWN0aW9uIGNsYXNzPVxcXCJkcm9wZG93bl9fdG9wXFxcIlxcdTAwM0VcIiArIChwdWcuZXNjYXBlKG51bGwgPT0gKHB1Z19pbnRlcnAgPSB0b3ApID8gXCJcIiA6IHB1Z19pbnRlcnApKSArIFwiXFx1MDAzQ1xcdTAwMkZzZWN0aW9uXFx1MDAzRVxcdTAwM0NhcnRpY2xlIGNsYXNzPVxcXCJkcm9wZG93bl9fYnV0dG9uIGJ1dHRvblxcXCJcXHUwMDNFXFx1MDAzQ2lucHV0XCIgKyAoXCIgY2xhc3M9XFxcImJ1dHRvbl9fc3VibWl0XFxcIlwiK1wiIHR5cGU9XFxcImhpZGRlblxcXCJcIitwdWcuYXR0cihcIm5hbWVcIiwgbmFtZSwgdHJ1ZSwgdHJ1ZSkrcHVnLmF0dHIoXCJ2YWx1ZVwiLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSkrcHVnLmF0dHIoXCJkYlRhYmxlSXRlbVwiLCBkYlRhYmxlSXRlbSwgdHJ1ZSwgdHJ1ZSkpICsgXCJcXHUwMDNFXFx1MDAzQ3NlY3Rpb24gY2xhc3M9XFxcImJ1dHRvbl9fY29udGVudCBjb250ZW50XFxcIlxcdTAwM0VcIjtcbi8vIGl0ZXJhdGUgZGF0YSAgXG47KGZ1bmN0aW9uKCl7XG4gIHZhciAkJG9iaiA9IGRhdGEgIDtcbiAgaWYgKCdudW1iZXInID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyBpbmRleCA8ICQkbDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgdmFsID0gJCRvYmpbaW5kZXhdO1xucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ3NlY3Rpb25cIiArIChcIiBjbGFzcz1cXFwiY29udGVudF9faXRlbVxcXCJcIitwdWcuYXR0cihcInZhbHVlXCIsIGluZGV4LCB0cnVlLCB0cnVlKSkgKyBcIlxcdTAwM0VcIiArIChwdWcuZXNjYXBlKG51bGwgPT0gKHB1Z19pbnRlcnAgPSB2YWwpID8gXCJcIiA6IHB1Z19pbnRlcnApKSArIFwiXFx1MDAzQ1xcdTAwMkZzZWN0aW9uXFx1MDAzRVwiO1xuICAgICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyIGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKztcbiAgICAgIHZhciB2YWwgPSAkJG9ialtpbmRleF07XG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDc2VjdGlvblwiICsgKFwiIGNsYXNzPVxcXCJjb250ZW50X19pdGVtXFxcIlwiK3B1Zy5hdHRyKFwidmFsdWVcIiwgaW5kZXgsIHRydWUsIHRydWUpKSArIFwiXFx1MDAzRVwiICsgKHB1Zy5lc2NhcGUobnVsbCA9PSAocHVnX2ludGVycCA9IHZhbCkgPyBcIlwiIDogcHVnX2ludGVycCkpICsgXCJcXHUwMDNDXFx1MDAyRnNlY3Rpb25cXHUwMDNFXCI7XG4gICAgfVxuICB9XG59KS5jYWxsKHRoaXMpO1xuXG5wdWdfaHRtbCA9IHB1Z19odG1sICsgXCJcXHUwMDNDXFx1MDAyRnNlY3Rpb25cXHUwMDNFXFx1MDAzQ1xcdTAwMkZhcnRpY2xlXFx1MDAzRVxcdTAwM0NcXHUwMDJGc2VjdGlvblxcdTAwM0VcIjtcbn1cbnB1Z19odG1sID0gcHVnX2h0bWwgKyBcIlxcdTAwM0NcXHUwMDJGYXJ0aWNsZVxcdTAwM0VcIjt9LmNhbGwodGhpcyxcImNvbnRlbnRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmNvbnRlbnQ6dHlwZW9mIGNvbnRlbnQhPT1cInVuZGVmaW5lZFwiP2NvbnRlbnQ6dW5kZWZpbmVkLFwiZGF0YVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZGF0YTp0eXBlb2YgZGF0YSE9PVwidW5kZWZpbmVkXCI/ZGF0YTp1bmRlZmluZWQsXCJkYXRhVHlwZVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZGF0YVR5cGU6dHlwZW9mIGRhdGFUeXBlIT09XCJ1bmRlZmluZWRcIj9kYXRhVHlwZTp1bmRlZmluZWQsXCJkYlRhYmxlSXRlbVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZGJUYWJsZUl0ZW06dHlwZW9mIGRiVGFibGVJdGVtIT09XCJ1bmRlZmluZWRcIj9kYlRhYmxlSXRlbTp1bmRlZmluZWQsXCJmbGFnXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5mbGFnOnR5cGVvZiBmbGFnIT09XCJ1bmRlZmluZWRcIj9mbGFnOnVuZGVmaW5lZCxcImZyb21cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmZyb206dHlwZW9mIGZyb20hPT1cInVuZGVmaW5lZFwiP2Zyb206dW5kZWZpbmVkLFwiaTE4blwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguaTE4bjp0eXBlb2YgaTE4biE9PVwidW5kZWZpbmVkXCI/aTE4bjp1bmRlZmluZWQsXCJsYW5ndWFnZUlkXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5sYW5ndWFnZUlkOnR5cGVvZiBsYW5ndWFnZUlkIT09XCJ1bmRlZmluZWRcIj9sYW5ndWFnZUlkOnVuZGVmaW5lZCxcImxvY2FsVG9waWNcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmxvY2FsVG9waWM6dHlwZW9mIGxvY2FsVG9waWMhPT1cInVuZGVmaW5lZFwiP2xvY2FsVG9waWM6dW5kZWZpbmVkLFwibmFtZVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgubmFtZTp0eXBlb2YgbmFtZSE9PVwidW5kZWZpbmVkXCI/bmFtZTp1bmRlZmluZWQsXCJuYW1lRnJvbVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgubmFtZUZyb206dHlwZW9mIG5hbWVGcm9tIT09XCJ1bmRlZmluZWRcIj9uYW1lRnJvbTp1bmRlZmluZWQsXCJuYW1lVG9cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLm5hbWVUbzp0eXBlb2YgbmFtZVRvIT09XCJ1bmRlZmluZWRcIj9uYW1lVG86dW5kZWZpbmVkLFwicGxhY2Vob2xkZXJcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnBsYWNlaG9sZGVyOnR5cGVvZiBwbGFjZWhvbGRlciE9PVwidW5kZWZpbmVkXCI/cGxhY2Vob2xkZXI6dW5kZWZpbmVkLFwidG9cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnRvOnR5cGVvZiB0byE9PVwidW5kZWZpbmVkXCI/dG86dW5kZWZpbmVkLFwidG9wXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC50b3A6dHlwZW9mIHRvcCE9PVwidW5kZWZpbmVkXCI/dG9wOnVuZGVmaW5lZCxcInR5cGVcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnR5cGU6dHlwZW9mIHR5cGUhPT1cInVuZGVmaW5lZFwiP3R5cGU6dW5kZWZpbmVkLFwidmFsdWVcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnZhbHVlOnR5cGVvZiB2YWx1ZSE9PVwidW5kZWZpbmVkXCI/dmFsdWU6dW5kZWZpbmVkLFwidmFsdWVGcm9tXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC52YWx1ZUZyb206dHlwZW9mIHZhbHVlRnJvbSE9PVwidW5kZWZpbmVkXCI/dmFsdWVGcm9tOnVuZGVmaW5lZCxcInZhbHVlVG9cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnZhbHVlVG86dHlwZW9mIHZhbHVlVG8hPT1cInVuZGVmaW5lZFwiP3ZhbHVlVG86dW5kZWZpbmVkKSk7O3JldHVybiBwdWdfaHRtbDt9O1xubW9kdWxlLmV4cG9ydHMgPSB0ZW1wbGF0ZTsiLCJ2YXIgcHVnID0gcmVxdWlyZShcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcHVnLXJ1bnRpbWUvaW5kZXguanNcIik7XG5cbmZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge3ZhciBwdWdfaHRtbCA9IFwiXCIsIHB1Z19taXhpbnMgPSB7fSwgcHVnX2ludGVycDs7dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoY2FuY2VsLCBjaGVjaywgdG9waWMsIHVybCkge1xucHVnX2h0bWwgPSBwdWdfaHRtbCArIFwiXFx1MDAzQ3NlY3Rpb24gY2xhc3M9XFxcImVkaXQtcGFnZV9fd2luZG93IHdpbmRvd1xcXCJcXHUwMDNFXFx1MDAzQ2Zvcm1cIiArIChcIiBjbGFzcz1cXFwid2luZG93X19mb3JtIGZvcm1cXFwiXCIrXCIgaWQ9XFxcImZvcm1cXFwiXCIrcHVnLmF0dHIoXCJhY3Rpb25cIiwgdXJsLCB0cnVlLCB0cnVlKStcIiBtZXRob2Q9XFxcIlBPU1RcXFwiXCIpICsgXCJcXHUwMDNFXFx1MDAzQ21haW4gY2xhc3M9XFxcImZvcm1fX2NvbnRlbnQgY29udGVudFxcXCIgaWQ9XFxcImNvbnRlbnRcXFwiXFx1MDAzRVxcdTAwM0NhcnRpY2xlIGNsYXNzPVxcXCJjb250ZW50X190aXRsZVxcXCJcXHUwMDNFXFx1MDAzQ2gxIGNsYXNzPVxcXCJ0aXRsZV9fd29yZFxcXCJcXHUwMDNFXCIgKyAocHVnLmVzY2FwZShudWxsID09IChwdWdfaW50ZXJwID0gdG9waWMpID8gXCJcIiA6IHB1Z19pbnRlcnApKSArIFwiXFx1MDAzQ1xcdTAwMkZoMVxcdTAwM0VcXHUwMDNDXFx1MDAyRmFydGljbGVcXHUwMDNFXFx1MDAzQ2FydGljbGUgY2xhc3M9XFxcImNvbnRlbnRfX2luZm9cXFwiIGlkPVxcXCJpbmZvXFxcIlxcdTAwM0VcXHUwMDNDXFx1MDAyRmFydGljbGVcXHUwMDNFXFx1MDAzQ2FydGljbGUgY2xhc3M9XFxcImNvbnRlbnRfX2Vycm9yIGVycm9yXFxcIlxcdTAwM0VcXHUwMDNDaDEgY2xhc3M9XFxcImVycm9yX19tZXNzYWdlXFxcIiBpZD1cXFwiZXJyb3ItbWVzc2FnZVxcXCJcXHUwMDNFXFx1MDAzQ1xcdTAwMkZoMVxcdTAwM0VcXHUwMDNDXFx1MDAyRmFydGljbGVcXHUwMDNFXFx1MDAzQ1xcdTAwMkZtYWluXFx1MDAzRVxcdTAwM0NhcnRpY2xlIGNsYXNzPVxcXCJmb3JtX19idXR0b24gYnV0dG9uXFxcIlxcdTAwM0VcXHUwMDNDYnV0dG9uIGNsYXNzPVxcXCJidXR0b25fX2l0ZW0gYnV0dG9uX19pdGVtLS1jYW5jZWxcXFwiIGZvcm1ub3ZhbGlkYXRlXFx1MDAzRVwiICsgKHB1Zy5lc2NhcGUobnVsbCA9PSAocHVnX2ludGVycCA9IGNhbmNlbCkgPyBcIlwiIDogcHVnX2ludGVycCkpICsgXCJcXHUwMDNDXFx1MDAyRmJ1dHRvblxcdTAwM0VcXHUwMDNDYnV0dG9uIGNsYXNzPVxcXCJidXR0b25fX2l0ZW0gYnV0dG9uX19pdGVtLS1jaGVja1xcXCJcXHUwMDNFXCIgKyAocHVnLmVzY2FwZShudWxsID09IChwdWdfaW50ZXJwID0gY2hlY2spID8gXCJcIiA6IHB1Z19pbnRlcnApKSArIFwiXFx1MDAzQ1xcdTAwMkZidXR0b25cXHUwMDNFXFx1MDAzQ1xcdTAwMkZhcnRpY2xlXFx1MDAzRVxcdTAwM0NcXHUwMDJGZm9ybVxcdTAwM0VcXHUwMDNDXFx1MDAyRnNlY3Rpb25cXHUwMDNFXCI7fS5jYWxsKHRoaXMsXCJjYW5jZWxcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmNhbmNlbDp0eXBlb2YgY2FuY2VsIT09XCJ1bmRlZmluZWRcIj9jYW5jZWw6dW5kZWZpbmVkLFwiY2hlY2tcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmNoZWNrOnR5cGVvZiBjaGVjayE9PVwidW5kZWZpbmVkXCI/Y2hlY2s6dW5kZWZpbmVkLFwidG9waWNcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnRvcGljOnR5cGVvZiB0b3BpYyE9PVwidW5kZWZpbmVkXCI/dG9waWM6dW5kZWZpbmVkLFwidXJsXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC51cmw6dHlwZW9mIHVybCE9PVwidW5kZWZpbmVkXCI/dXJsOnVuZGVmaW5lZCkpOztyZXR1cm4gcHVnX2h0bWw7fTtcbm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGU7IiwiLyogKGlnbm9yZWQpICovIl0sInNvdXJjZVJvb3QiOiIifQ==